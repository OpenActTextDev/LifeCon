<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Modeling Lifetimes | Life Contingencies: The Mathematics, Statistics, and Economics of Life Insurance</title>
  <meta name="description" content="This is an interactive, online, freely available text. - The online version will contain many interactive objects (quizzes, computer demonstrations, interactive graphs, video, and the like) to promote deeper learning. - A subset of the book will be available in pdf format for low-cost printing. - The online text will be available in multiple languages to promote access to a worldwide audience." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Modeling Lifetimes | Life Contingencies: The Mathematics, Statistics, and Economics of Life Insurance" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an interactive, online, freely available text. - The online version will contain many interactive objects (quizzes, computer demonstrations, interactive graphs, video, and the like) to promote deeper learning. - A subset of the book will be available in pdf format for low-cost printing. - The online text will be available in multiple languages to promote access to a worldwide audience." />
  <meta name="github-repo" content="https://github.com/OpenActTextDev" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Modeling Lifetimes | Life Contingencies: The Mathematics, Statistics, and Economics of Life Insurance" />
  
  <meta name="twitter:description" content="This is an interactive, online, freely available text. - The online version will contain many interactive objects (quizzes, computer demonstrations, interactive graphs, video, and the like) to promote deeper learning. - A subset of the book will be available in pdf format for low-cost printing. - The online text will be available in multiple languages to promote access to a worldwide audience." />
  

<meta name="author" content="An open text authored by the Actuarial Community" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="C-SimpleBenefit.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.19/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<script src="libs/rglWebGL-binding-0.106.8/rglWebGL.js"></script>
<link href="libs/rglwidgetClass-0.106.8/rgl.css" rel="stylesheet" />
<script src="libs/rglwidgetClass-0.106.8/rglClass.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/utils.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/subscenes.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/shaders.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/textures.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/projection.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/mouse.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/init.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/pieces.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/draw.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/controls.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/selection.src.js"></script>
<script src="libs/rglwidgetClass-0.106.8/rglTimer.src.js"></script>
<script src="libs/CanvasMatrix4-0.106.8/CanvasMatrix.src.js"></script>
<script language="javascript">
function openTab(evt, tabName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
</script>

<script language="javascript">
function toggle(id1,id2) {
	var ele = document.getElementById(id1); var text = document.getElementById(id2);
	if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Solution";}
		else {ele.style.display = "block"; text.innerHTML = "Hide Solution";}}
</script>

<script language="javascript">
function togglecode(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show R Code";}
      else {ele.style.display = "block"; text.innerHTML = "Hide R Code";}}
</script>
<script language="javascript">
function toggleEX(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Example";}
      else {ele.style.display = "block"; text.innerHTML = "Hide Example";}}
</script>
<script language="javascript">
function toggleTheory(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Theory";}
      else {ele.style.display = "block"; text.innerHTML = "Hide Theory";}}
</script>

<script language="javascript">
function toggleDet(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Details";}
      else {ele.style.display = "block"; text.innerHTML = "Hide  Details";}}
</script>

<script language="javascript">
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
});
</script>

<script src=https://cdn.datacamp.com/datacamp-light-latest.min.js></script>

<script src="https://bossanova.uk/jspreadsheet/v4/jexcel.js"></script>
<link rel="stylesheet" href="https://bossanova.uk/jspreadsheet/v4/jexcel.css" type="text/css" />
<script src="https://jsuites.net/v4/jsuites.js"></script>
<link rel="stylesheet" href="https://jsuites.net/v4/jsuites.css" type="text/css" />


<script>
$(document).ready(function(){
    $('[data-toggle="popover"]').popover(); 
});
</script>

<style>
/* Rearrange console label */
.datacamp-exercise ol li, .datacamp-exercise ul li {
  margin-bottom: 0em !important;
}

/* Remove bullet marker */
.datacamp-exercise ol li::before, .datacamp-exercise ul li::before {
  content: '' !important;
}
</style>


<script language="javascript">
var submitAnswer = function() {

  var radios = document.getElementsByName('choice');
  var val= "";
  for (var i = 0, length = radios.length; i < length; i++) {
      if (radios[i].checked) {
         val = radios[i].value; 
         break;
       }
  }
  
  if (val == "" ) {
    alert('please select choice answer');
  } else if ( val == "Correct" ) {
    alert('Answer is correct !');
  } else {
    alert('Answer is wrong');
  }
};
</script>





<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-125587869-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-125587869-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Life Contingencies</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#for-our-readers"><i class="fa fa-check"></i>For our Readers</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html"><i class="fa fa-check"></i><b>2</b> Modeling Lifetimes</a>
<ul>
<li class="chapter" data-level="2.1" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:MortData"><i class="fa fa-check"></i><b>2.1</b> Mortality data: Life Expectancies, Deaths, Counts, &amp; Lifetimes</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:DataLifeExp"><i class="fa fa-check"></i><b>2.1.1</b> Life Expectancies</a></li>
<li class="chapter" data-level="2.1.2" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:HMDData"><i class="fa fa-check"></i><b>2.1.2</b> Population Mortality Counts</a></li>
<li class="chapter" data-level="2.1.3" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:IndivMortData"><i class="fa fa-check"></i><b>2.1.3</b> Individual Mortality Data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#Sec:ModelingDeaths"><i class="fa fa-check"></i><b>2.2</b> Modeling Death</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#lifetime-random-variable-and-its-distribution"><i class="fa fa-check"></i><b>2.2.1</b> Lifetime Random Variable and its Distribution</a></li>
<li class="chapter" data-level="2.2.2" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#standard-actuarial-notation-q_bfx-_tp_bfx-and-all-that"><i class="fa fa-check"></i><b>2.2.2</b> Standard Actuarial Notation: <span class="math inline">\(q_{\bf{x}}\)</span>, <span class="math inline">\(_tp_{\bf{x}}\)</span>, and All That</a></li>
<li class="chapter" data-level="2.2.3" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:ModelOnlyAge"><i class="fa fa-check"></i><b>2.2.3</b> The Classical Case: Age-Only Model</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:AnalMortLaws"><i class="fa fa-check"></i><b>2.3</b> Analytical laws of mortality</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#de-moivre-and-constant-force-models"><i class="fa fa-check"></i><b>2.3.1</b> De Moivre and Constant Force Models</a></li>
<li class="chapter" data-level="2.3.2" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#gompertz-and-makeham-laws"><i class="fa fa-check"></i><b>2.3.2</b> Gompertz and Makeham Laws</a></li>
<li class="chapter" data-level="2.3.3" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#makeham-law-based-on-life-expectancies-data"><i class="fa fa-check"></i><b>2.3.3</b> Makeham Law based on Life Expectancies Data</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:LifeTab"><i class="fa fa-check"></i><b>2.4</b> Life Tables and their Functions</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:LifeTabBasics"><i class="fa fa-check"></i><b>2.4.1</b> Life Table Basics</a></li>
<li class="chapter" data-level="2.4.2" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:LifeTabEst"><i class="fa fa-check"></i><b>2.4.2</b> Life Table based on U.S. Population Data</a></li>
<li class="chapter" data-level="2.4.3" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:LifeTabRec"><i class="fa fa-check"></i><b>2.4.3</b> Curtate Quantities and Recursive Relationships</a></li>
<li class="chapter" data-level="2.4.4" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:LifeTabFrac"><i class="fa fa-check"></i><b>2.4.4</b> Fractional year assumptions</a></li>
<li class="chapter" data-level="2.4.5" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:LifeTabMImpr"><i class="fa fa-check"></i><b>2.4.5</b> Cohort Life Tables and Mortality Improvement Modeling</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:NonParamSurv"><i class="fa fa-check"></i><b>2.5</b> Non-parametric survival estimation</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#kaplan-meier-estimate"><i class="fa fa-check"></i><b>2.5.1</b> Kaplan-Meier Estimate</a></li>
<li class="chapter" data-level="2.5.2" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#nelson-aalen"><i class="fa fa-check"></i><b>2.5.2</b> Nelson-Aalen</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#S:SurvReg"><i class="fa fa-check"></i><b>2.6</b> Conditional models: Survival regression</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#the-cox-proportional-hazard-model"><i class="fa fa-check"></i><b>2.6.1</b> The Cox Proportional Hazard Model</a></li>
<li class="chapter" data-level="2.6.2" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#cox-models-based-on-life-insurer-data"><i class="fa fa-check"></i><b>2.6.2</b> Cox Models Based on Life Insurer Data</a></li>
<li class="chapter" data-level="2.6.3" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#conditional-life-tables"><i class="fa fa-check"></i><b>2.6.3</b> Conditional Life Tables</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="modeling-lifetimes.html"><a href="modeling-lifetimes.html#notes-and-comments"><i class="fa fa-check"></i><b>2.7</b> Notes and Comments</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html"><i class="fa fa-check"></i><b>3</b> Basic Life Contingent Benefits</a>
<ul>
<li class="chapter" data-level="3.1" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#Sec:BenefitCFunc"><i class="fa fa-check"></i><b>3.1</b> Valuation of Cash Flows under Uncertainty</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#moment-calculations"><i class="fa fa-check"></i><b>3.1.1</b> Moment Calculations</a></li>
<li class="chapter" data-level="3.1.2" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#illustrative-moments-of-cash-flows"><i class="fa fa-check"></i><b>3.1.2</b> Illustrative Moments of Cash Flows</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#Sec:BenefitActNot"><i class="fa fa-check"></i><b>3.2</b> Life Insurance Benefits</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#Sec:BenefitWL"><i class="fa fa-check"></i><b>3.2.1</b> Whole of life insurance</a></li>
<li class="chapter" data-level="3.2.2" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#Sec:BenefitTI"><i class="fa fa-check"></i><b>3.2.2</b> Term insurance</a></li>
<li class="chapter" data-level="3.2.3" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#pure-endowment"><i class="fa fa-check"></i><b>3.2.3</b> Pure endowment</a></li>
<li class="chapter" data-level="3.2.4" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#endowment-insurance"><i class="fa fa-check"></i><b>3.2.4</b> Endowment insurance</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#Sec:BenefitAnnuity"><i class="fa fa-check"></i><b>3.3</b> Life Annuity Benefits</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#life-annuity"><i class="fa fa-check"></i><b>3.3.1</b> Life annuity</a></li>
<li class="chapter" data-level="3.3.2" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#term-life-annuity"><i class="fa fa-check"></i><b>3.3.2</b> Term life annuity</a></li>
<li class="chapter" data-level="3.3.3" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#deferred-life-annuity"><i class="fa fa-check"></i><b>3.3.3</b> Deferred life annuity</a></li>
<li class="chapter" data-level="3.3.4" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#guaranteed-life-annuity"><i class="fa fa-check"></i><b>3.3.4</b> Guaranteed life annuity</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#Sec:BenefitSpread"><i class="fa fa-check"></i><b>3.4</b> Valuing Life Contingent Benefits using a Spreadsheet</a></li>
<li class="chapter" data-level="3.5" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#Sec:BenefitCS"><i class="fa fa-check"></i><b>3.5</b> Case Study: A Portfolio of Term Insurance Policies</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#Sec:BenefitCSInd"><i class="fa fa-check"></i><b>3.5.1</b> An individual policy</a></li>
<li class="chapter" data-level="3.5.2" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#Sec:BenefitCSPort"><i class="fa fa-check"></i><b>3.5.2</b> Moments of a portfolio of policies</a></li>
<li class="chapter" data-level="3.5.3" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#simulated-distribution-of-a-portfolio-of-policies"><i class="fa fa-check"></i><b>3.5.3</b> Simulated distribution of a portfolio of policies</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#further-resources-and-contributors"><i class="fa fa-check"></i><b>3.6</b> Further Resources and Contributors</a></li>
<li class="chapter" data-level="3.7" data-path="C-SimpleBenefit.html"><a href="C-SimpleBenefit.html#Sec:ExamplesValCash"><i class="fa fa-check"></i><b>3.7</b> Appendix 3A. Examples of Valuation of General Cash Flows</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="C-BenefitExt.html"><a href="C-BenefitExt.html"><i class="fa fa-check"></i><b>4</b> Extensions to Modeling Basic Life Contingent Benefits</a>
<ul>
<li class="chapter" data-level="4.1" data-path="C-BenefitExt.html"><a href="C-BenefitExt.html#the-impact-of-self-selection"><i class="fa fa-check"></i><b>4.1</b> The Impact of Self Selection</a></li>
<li class="chapter" data-level="4.2" data-path="C-BenefitExt.html"><a href="C-BenefitExt.html#modelling-contingent-cash-flows-more-frequently-than-annually"><i class="fa fa-check"></i><b>4.2</b> Modelling Contingent Cash Flows more Frequently than Annually</a></li>
<li class="chapter" data-level="4.3" data-path="C-BenefitExt.html"><a href="C-BenefitExt.html#modelling-contingent-cash-flows-in-continuous-time"><i class="fa fa-check"></i><b>4.3</b> Modelling Contingent Cash Flows in Continuous Time</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="C-Forward.html"><a href="C-Forward.html"><i class="fa fa-check"></i><b>5</b> Going Forward</a>
<ul>
<li class="chapter" data-level="5.1" data-path="C-Forward.html"><a href="C-Forward.html#table-of-contents"><i class="fa fa-check"></i><b>5.1</b> Table of Contents</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="C-NotationConventionLC.html"><a href="C-NotationConventionLC.html"><i class="fa fa-check"></i><b>6</b> Appendix: Conventions for Notation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="C-NotationConventionLC.html"><a href="C-NotationConventionLC.html#S:NC:ActSymbols"><i class="fa fa-check"></i><b>6.1</b> Actuarial Notation</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="C-NotationConventionLC.html"><a href="C-NotationConventionLC.html#life-table-symbols"><i class="fa fa-check"></i><b>6.1.1</b> Life Table Symbols</a></li>
<li class="chapter" data-level="6.1.2" data-path="C-NotationConventionLC.html"><a href="C-NotationConventionLC.html#Sec:LifeInsSymbols"><i class="fa fa-check"></i><b>6.1.2</b> Life Insurance Symbols</a></li>
<li class="chapter" data-level="6.1.3" data-path="C-NotationConventionLC.html"><a href="C-NotationConventionLC.html#Sec:LifeAnnSymbols"><i class="fa fa-check"></i><b>6.1.3</b> Annuity Certain and Life Annuity Symbols</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="C-NotationConventionLC.html"><a href="C-NotationConventionLC.html#C:NotConv:Halo"><i class="fa fa-check"></i><b>6.2</b> Halo System</a></li>
<li class="chapter" data-level="6.3" data-path="C-NotationConventionLC.html"><a href="C-NotationConventionLC.html#S:NC:General"><i class="fa fa-check"></i><b>6.3</b> General Conventions</a></li>
<li class="chapter" data-level="6.4" data-path="C-NotationConventionLC.html"><a href="C-NotationConventionLC.html#S:NC:Abbreviations"><i class="fa fa-check"></i><b>6.4</b> Abbreviations</a></li>
<li class="chapter" data-level="6.5" data-path="C-NotationConventionLC.html"><a href="C-NotationConventionLC.html#S:NC:StatSymbols"><i class="fa fa-check"></i><b>6.5</b> Common Statistical Symbols and Operators</a></li>
<li class="chapter" data-level="6.6" data-path="C-NotationConventionLC.html"><a href="C-NotationConventionLC.html#S:NC:Symbols"><i class="fa fa-check"></i><b>6.6</b> Common Mathematical Symbols and Functions</a></li>
<li class="chapter" data-level="6.7" data-path="C-NotationConventionLC.html"><a href="C-NotationConventionLC.html#further-readings"><i class="fa fa-check"></i><b>6.7</b> Further Readings</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i>Bibliography</a></li>
<li class="divider"></li>
<li><a href="https://github.com/OpenActTextDev/LifeCon" target="blank">Life Contingencies on GitHub</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Life Contingencies: The Mathematics, Statistics, and Economics of Life Insurance</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="modeling-lifetimes" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Modeling Lifetimes</h1>
<p>The analysis of life contingent exposures such as insurer’s liability when selling a life insurance contract or a pension fund’s obligations when offering a new pension scheme starts with modeling individual <em>lifetime</em> and <em>death</em>. These models, in turn, have to be calibrated in the context of relevant (mortality) data.</p>
<p>Therefore, in this chapter, we first present different types of data that describe the lifetimes and mortality of a certain population. We deliberately introduce the data in Section <a href="modeling-lifetimes.html#S:MortData">2.1</a> without assuming prior knowledge of life contingent modeling, and aim to develop an intuitive understanding of some of the associated challenges.</p>
<p>We then introduce the conventional framework for modeling lifetimes, particularly by introducing the concept of a future lifetime variable <span class="math inline">\(T_{\bf x}\)</span> and its properties, and we then explore various approaches of specifying and estimating its distribution. Here, we discuss the traditional actuarial models for lifetimes such as analytical mortality laws and life tables, but we also introduce conditional predictive models that characterize the lifetime distribution based on a set of covariates or <em>features</em>.</p>
<div id="S:MortData" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Mortality data: Life Expectancies, Deaths, Counts, &amp; Lifetimes</h2>
<div id="S:DataLifeExp" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Life Expectancies</h3>
<p>Perhaps the most relevant question to any individual when it comes to their future lifetime is: how long am I expected to live? As we will discuss, there are many angles to this question. However, as a first and proximate answer, we may rely on public statistics. Government agencies around the world publish vital statistics such as the <em>life expectancies</em> for their population, which are typically separated by age and gender – and potentially other attributes such as race.</p>
<p>The file <code>CDCLifeExp.csv</code> is provided with the supplemental information of this text and includes an excerpt of the U.S. <a href="https://www.cdc.gov/nchs/data/nvsr/nvsr68/nvsr68_07-508.pdf">national vital statistics</a> that provides “Expectation of life, by age, race, […] and sex: United States, 2017” in Table <a href="modeling-lifetimes.html#tab:MortChapCDC">2.1</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="modeling-lifetimes.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-2"><a href="modeling-lifetimes.html#cb1-2" aria-hidden="true" tabindex="-1"></a>us_les <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Data/CDCLifeExp.csv&quot;</span>)</span>
<span id="cb1-3"><a href="modeling-lifetimes.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(us_les, <span class="at">caption=</span><span class="st">&quot;Life Expectancies From 2017 U.S. National Vital Statistics&quot;</span>)</span></code></pre></div>
<table>
<caption><span id="tab:MortChapCDC">Table 2.1: </span>Life Expectancies From 2017 U.S. National Vital Statistics</caption>
<thead>
<tr class="header">
<th align="right">Age</th>
<th align="right">Total</th>
<th align="right">Male</th>
<th align="right">Female</th>
<th align="right">Hispanic..Total</th>
<th align="right">Hispanic..Male</th>
<th align="right">Hispanic..Female</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">78.6</td>
<td align="right">76.1</td>
<td align="right">81.1</td>
<td align="right">81.8</td>
<td align="right">79.1</td>
<td align="right">84.3</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="right">59.4</td>
<td align="right">57.0</td>
<td align="right">61.8</td>
<td align="right">62.5</td>
<td align="right">59.9</td>
<td align="right">64.9</td>
</tr>
<tr class="odd">
<td align="right">40</td>
<td align="right">40.7</td>
<td align="right">38.7</td>
<td align="right">42.6</td>
<td align="right">43.5</td>
<td align="right">41.2</td>
<td align="right">45.5</td>
</tr>
<tr class="even">
<td align="right">60</td>
<td align="right">23.3</td>
<td align="right">21.7</td>
<td align="right">24.7</td>
<td align="right">25.5</td>
<td align="right">23.6</td>
<td align="right">27.0</td>
</tr>
<tr class="odd">
<td align="right">80</td>
<td align="right">9.2</td>
<td align="right">8.4</td>
<td align="right">9.8</td>
<td align="right">10.5</td>
<td align="right">9.4</td>
<td align="right">11.1</td>
</tr>
</tbody>
</table>
<p>This excerpt provides the life expectancy for ages 0 (newborn), 20, 40, 60, and 80 observed within a population, for males and females with separate figures for the hispanic subpopulation. There are a few immediate observations.</p>
<p>First, females generally seem to have a longer life expectancy than males, whereas the aggregate “Total” life expectancy is in between the two figures. This is intuitive as the aggregate population is (largely) made up of male and female individuals, so that the “Total” life expectancy is a weighted average of the gender-specific life expectancies, relative to the composition of the population.</p>
<p>Second, life expectancy is decreasing in age, which again is intuitive: older individuals will have shorter life expectancies, ceteris paribus. It may be somewhat less obvious that the differences in life expectancies are less than the differences in age; subtracting the lines in Table <a href="modeling-lifetimes.html#tab:MortChapCDC">2.1</a> gives incremental life expectancies for 20-year age gaps.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="modeling-lifetimes.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(us_les[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>]<span class="sc">-</span>us_les[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>])</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Total</th>
<th align="right">Male</th>
<th align="right">Female</th>
<th align="right">Hispanic..Total</th>
<th align="right">Hispanic..Male</th>
<th align="right">Hispanic..Female</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">19.2</td>
<td align="right">19.1</td>
<td align="right">19.3</td>
<td align="right">19.3</td>
<td align="right">19.2</td>
<td align="right">19.4</td>
</tr>
<tr class="even">
<td align="right">18.7</td>
<td align="right">18.3</td>
<td align="right">19.2</td>
<td align="right">19.0</td>
<td align="right">18.7</td>
<td align="right">19.4</td>
</tr>
<tr class="odd">
<td align="right">17.4</td>
<td align="right">17.0</td>
<td align="right">17.9</td>
<td align="right">18.0</td>
<td align="right">17.6</td>
<td align="right">18.5</td>
</tr>
<tr class="even">
<td align="right">14.1</td>
<td align="right">13.3</td>
<td align="right">14.9</td>
<td align="right">15.0</td>
<td align="right">14.2</td>
<td align="right">15.9</td>
</tr>
</tbody>
</table>
<p>Hence, while a 40-year-old male is twenty years older than a 20-year-old male, the 20-year-old’s life expectancy is 18.3 years higher. The difference of 1.7 years is due to the possibility of the 20-year-old not surviving up to age 40. Consider the following: 40-year-old males lived 20 years since age 20 plus they are expected to live another 38.7 years, for a total of 58.7 years; in contrast, 20-year-old males have a life expectancy of 57 years, which is 1.7 years less. In other words, 40-year-old males have a higher expected age at death than 20-year-old males, because view view them <em>conditionally</em> on already having lived until age 40. As the table reveals, this effect is more pronounced when comparing a 40-year-old with a 60-year-old or a 60-year-old with an 80-year-old.</p>
<p>Third, the life expectancies for the hispanic subpopulation exceed the figures of the total population, which suggests that other subpopulations must exhibit a lower life expectancy. There are many questions of potential reasons for this difference, although these fall more in the demographic or even sociological realm. For insstance, there are many interesting studies related to the dependence of life expectancies on socio-economic factors, including some concerning recent trends related to so-called “<a href="https://www.vox.com/2020/4/15/21214734/deaths-of-despair-coronavirus-covid-19-angus-deaton-anne-case-americans-deaths">deaths of despair</a>” in the U.S.</p>
<p>From an actuarial perspective, a relevant question may be how we could model the mortality data. In other words, is there a simple parametric model that may describe the progression of life expectancy across ages, at least in the context of one particular population? We will return to this question in the context of our mortality models, particularly in Section <a href="modeling-lifetimes.html#S:AnalMortLaws">2.3</a>.</p>
<p>As an early caveat to the question raised at the beginning of this section, it is not necessarily accurate to take these figures as estimates of a given individual’s future lifetime or even its expectation. This is the case since the <em>life expectancy</em> is usually generated based on recent mortality <em>experience</em> rather than <em>forecasts</em>. As we will discuss in Section <a href="modeling-lifetimes.html#S:LifeTab">2.4</a>, this is the difference between the so-called <em>period</em> and <em>cohort</em> life expectancies.</p>
</div>
<div id="S:HMDData" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Population Mortality Counts</h3>
<p>We now bring into consideration <em>mortality experience</em> for populations that had been observed over time, which is available at the <a href="https://www.mortality.org">Human Mortality Database (HMD)</a> for a wide range of countries. The available data include <em>Exposures</em> by age, sex, and calender year period, i.e. how many people people of a given age and sex lived in the country’s population during a given period of time, and corresponding <em>Deaths</em>, i.e. how many of these individuals had died.</p>
<p>In the supplemental information to this text, we provide exposures and deaths for the U.S. population, downloaded from the HMD as <code>HMD_Expo.csv</code> and <code>HMD_Deaths.csv</code>. We use the data over five year intervals starting at 1935 until 2015. Let us take a look at the exposures:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="modeling-lifetimes.html#cb3-1" aria-hidden="true" tabindex="-1"></a>us_exp <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Data/HMD_Expo.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="modeling-lifetimes.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(us_exp), <span class="at">align =</span> <span class="st">&quot;cccrrr&quot;</span>, <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format.args =</span> <span class="fu">list</span>(<span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="center">Year_start</th>
<th align="center">Year_end</th>
<th align="center">Age</th>
<th align="right">Female</th>
<th align="right">Male</th>
<th align="right">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">0</td>
<td align="right">4,869,267</td>
<td align="right">5,057,569</td>
<td align="right">9,926,836</td>
</tr>
<tr class="even">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">1</td>
<td align="right">4,802,597</td>
<td align="right">4,936,238</td>
<td align="right">9,738,835</td>
</tr>
<tr class="odd">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">2</td>
<td align="right">5,119,574</td>
<td align="right">5,244,634</td>
<td align="right">10,364,208</td>
</tr>
<tr class="even">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">3</td>
<td align="right">5,159,494</td>
<td align="right">5,287,402</td>
<td align="right">10,446,896</td>
</tr>
<tr class="odd">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">4</td>
<td align="right">5,189,350</td>
<td align="right">5,307,754</td>
<td align="right">10,497,104</td>
</tr>
<tr class="even">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">5</td>
<td align="right">5,359,159</td>
<td align="right">5,531,967</td>
<td align="right">10,891,126</td>
</tr>
</tbody>
</table>
<p>and deaths:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="modeling-lifetimes.html#cb5-1" aria-hidden="true" tabindex="-1"></a>us_deaths <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Data/HMD_Deaths.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="modeling-lifetimes.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(us_deaths), <span class="at">align =</span> <span class="st">&quot;cccrrr&quot;</span>, <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format.args =</span> <span class="fu">list</span>(<span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="center">Year_start</th>
<th align="center">Year_end</th>
<th align="center">Age</th>
<th align="right">Female</th>
<th align="right">Male</th>
<th align="right">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">0</td>
<td align="right">253,145.89</td>
<td align="right">335,492.00</td>
<td align="right">588,637.89</td>
</tr>
<tr class="even">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">1</td>
<td align="right">36,010.02</td>
<td align="right">42,169.20</td>
<td align="right">78,179.22</td>
</tr>
<tr class="odd">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">2</td>
<td align="right">17,718.83</td>
<td align="right">21,208.22</td>
<td align="right">38,927.05</td>
</tr>
<tr class="even">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">3</td>
<td align="right">12,450.36</td>
<td align="right">14,852.17</td>
<td align="right">27,302.53</td>
</tr>
<tr class="odd">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">4</td>
<td align="right">10,154.85</td>
<td align="right">11,771.25</td>
<td align="right">21,926.10</td>
</tr>
<tr class="even">
<td align="center">1935</td>
<td align="center">1939</td>
<td align="center">5</td>
<td align="right">8,678.43</td>
<td align="right">10,339.57</td>
<td align="right">19,018.00</td>
</tr>
</tbody>
</table>
<p>To illustrate, let us plot the exposures and deaths for a 70-year-old U.S. females over time, which is given in Figure <a href="modeling-lifetimes.html#fig:70ChapHMDUSFigsa">2.1</a>:</p>
<h5 style="text-align: center;">
<a id="displayCode.70ChapHMDUSFigs" href="javascript:togglecode('toggleCode.70ChapHMDUSFigs','displayCode.70ChapHMDUSFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.70ChapHMDUSFigs" style="display: none">
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="modeling-lifetimes.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">9</span>)</span>
<span id="cb7-2"><a href="modeling-lifetimes.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">9</span>)</span>
<span id="cb7-3"><a href="modeling-lifetimes.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb7-4"><a href="modeling-lifetimes.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(us_exp[us_exp<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">2</span>], us_exp[us_exp<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">4</span>]<span class="sc">/</span><span class="dv">1000</span>, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;green&quot;</span>, <span class="at">main=</span><span class="st">&quot;Exposures&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;year&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;count&quot;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fu">max</span>(us_exp[us_exp<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">4</span>])<span class="sc">/</span><span class="dv">1000</span>))</span>
<span id="cb7-5"><a href="modeling-lifetimes.html#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(us_deaths[us_deaths<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">2</span>], us_deaths[us_deaths<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">4</span>]<span class="sc">/</span><span class="dv">1000</span>, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">main=</span><span class="st">&quot;Deaths&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;year&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;count&quot;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fu">max</span>(us_deaths[us_deaths<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">4</span>])<span class="sc">/</span><span class="dv">1000</span>))</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:70ChapHMDUSFigsa"></span>
<img src="LifeCon_files/figure-html/70ChapHMDUSFigsa-1.png" alt="Exposures and Deaths (in thousands) for Females age 70 from the HMD U.S." width="768" />
<p class="caption">
Figure 2.1: <strong>Exposures and Deaths (in thousands) for Females age 70 from the HMD U.S.</strong>
</p>
</div>
<p>The stark increase in exposures is due to two effects; on one hand, the U.S. population had been growing substantially since 1935, and on the other hand, individuals had been showing an enhanced life expectancy over time. As a consequence, the number of 70-year-old U.S. females had increased from less than two million to more than six million. In contrast, the number of deaths had been more steady. While with an increasing number of exposures the number of deaths have increased, the chance of dying for a 70-year-old had been decreasing. The latter becomes more evident by plotting the ratio of deaths and exposures as in Figure <a href="modeling-lifetimes.html#fig:70DRChapHMDUSFigsa">2.2</a></p>
<h5 style="text-align: center;">
<a id="displayCode.70DRChapHMDUSFigs" href="javascript:togglecode('toggleCode.70DRChapHMDUSFigs','displayCode.70DRChapHMDUSFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.70DRChapHMDUSFigs" style="display: none">
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="modeling-lifetimes.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb8-2"><a href="modeling-lifetimes.html#cb8-2" aria-hidden="true" tabindex="-1"></a>minlim <span class="ot">&lt;-</span> <span class="fu">min</span>(us_deaths[us_deaths<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">4</span>]<span class="sc">/</span>us_exp[us_exp<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">4</span>])</span>
<span id="cb8-3"><a href="modeling-lifetimes.html#cb8-3" aria-hidden="true" tabindex="-1"></a>maxlim <span class="ot">&lt;-</span> <span class="fu">max</span>(us_deaths[us_deaths<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">4</span>]<span class="sc">/</span>us_exp[us_exp<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">4</span>])</span>
<span id="cb8-4"><a href="modeling-lifetimes.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(us_deaths[us_deaths<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">2</span>],us_deaths[us_deaths<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">4</span>]<span class="sc">/</span>us_exp[us_exp<span class="sc">$</span>Age <span class="sc">==</span> <span class="dv">70</span>,<span class="dv">4</span>],<span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">main=</span><span class="st">&quot;Deaths/Exposures&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;year&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;rate&quot;</span>,<span class="at">ylim =</span> <span class="fu">c</span>(minlim,maxlim))</span>
<span id="cb8-5"><a href="modeling-lifetimes.html#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(minlim, maxlim)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:70DRChapHMDUSFigsa"></span>
<img src="LifeCon_files/figure-html/70DRChapHMDUSFigsa-1.png" alt="Death rates for Females age 70 from the HMD U.S" width="576" />
<p class="caption">
Figure 2.2: <strong>Death rates for Females age 70 from the HMD U.S</strong>
</p>
</div>
<p>Note that the chance of dying for a 70-year-old female was more than 4% around 1940, but it had decreased over time to a level lower than 2%. As we will see in Section <a href="modeling-lifetimes.html#S:LifeTab">2.4</a>, the ratio of deaths and exposures is closely related to <em>death rates</em>.</p>
<p>Alternatively, we can focus on a specific period – say the most recent five years in our data, i.e. 2010-2014 – and plot the deaths over exposures across ages as in Figure <a href="modeling-lifetimes.html#fig:AllDRChapHMDUSFigsa">2.3</a></p>
<h5 style="text-align: center;">
<a id="displayCode.AllDRChapHMDUSFigs" href="javascript:togglecode('toggleCode.AllDRChapHMDUSFigs','displayCode.AllDRChapHMDUSFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.AllDRChapHMDUSFigs" style="display: none">
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="modeling-lifetimes.html#cb9-1" aria-hidden="true" tabindex="-1"></a>us_mx_fem_2014 <span class="ot">&lt;-</span> us_deaths[us_deaths<span class="sc">$</span>Year_start <span class="sc">==</span> <span class="dv">2010</span>,<span class="dv">4</span>]<span class="sc">/</span>us_exp[us_exp<span class="sc">$</span>Year_start <span class="sc">==</span> <span class="dv">2010</span>,<span class="dv">4</span>]</span>
<span id="cb9-2"><a href="modeling-lifetimes.html#cb9-2" aria-hidden="true" tabindex="-1"></a>us_mx_mal_2014 <span class="ot">&lt;-</span> us_deaths[us_deaths<span class="sc">$</span>Year_start <span class="sc">==</span> <span class="dv">2010</span>,<span class="dv">5</span>]<span class="sc">/</span>us_exp[us_exp<span class="sc">$</span>Year_start <span class="sc">==</span> <span class="dv">2010</span>,<span class="dv">5</span>]</span>
<span id="cb9-3"><a href="modeling-lifetimes.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(us_mx_fem_2014,<span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">main=</span><span class="st">&quot;Deaths/Exposures&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;year&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;death rate&quot;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fu">min</span>(us_mx_fem_2014),<span class="fu">max</span>(us_mx_fem_2014)))</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:AllDRChapHMDUSFigsa"></span>
<img src="LifeCon_files/figure-html/AllDRChapHMDUSFigsa-1.png" alt="Death rates for Females across ages for 2010-2014 from the HMD U.S." width="576" />
<p class="caption">
Figure 2.3: <strong>Death rates for Females across ages for 2010-2014 from the HMD U.S.</strong>
</p>
</div>
<p>We observe that the death rate increases fairly regularly with respect to age and its growth looks exponential. This observation is the foundation for the most famous and common analytic mortality model that is detailed in Section <a href="modeling-lifetimes.html#S:AnalMortLaws">2.3</a> known as the <em>Gompertz law</em>. It should be noted that the death rates at higher ages, specifically from 106 to 110, are showing a larger variability that could be explained by the fact very small sub-populations of high ages are observed and the estimates are more uncertain than those at lower ages.</p>
<p>We note some precaution when using the Human Mortality Database (HMD). It is intended to provide a wide range of interested parties with detailed and up-to-date mortality and population data covering about 41 countries. There are some countries that may exhibit different mortality patterns from these 41 countries, and these include for example, some of the most populous countries such as China, India, and Indonesia, and several countries in the African continents such as South Africa, Nigeria, and Egypt.</p>
</div>
<div id="S:IndivMortData" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Individual Mortality Data</h3>
<p>While mortality <em>counts</em> are a common way to organize mortality data across a large population, which had been our emphasis in the previous section, the individual survival time data may provide valuable pieces of information. Indeed, the data available to an insurance company typically consists of records of individuals. The company records individual details for each insured person from when they purchased the contract; these include personal characteristics such as sex, age, date-of-birth, etc., but also medical records and other <em>underwriting information</em>. In addition, the company knows whether or not the person had died at the current time—and if so, the time of death.</p>
<p>This latter aspect is common for <em>survival</em> or <em>event history data</em>. For each observation (individual) <span class="math inline">\(i\)</span>, a number of covariates or <em>features</em> <span class="math inline">\(\textbf{x}_i\)</span>, as well as the <em>event time</em> <span class="math inline">\(T_i\)</span> <em>if</em> the event has already happened. Otherwise, we only know that by the current <em>cutoff</em> time, the event has not happened yet. In the context of <em>survival analysis</em>, which is the branch of statistics that deals with <em>survival</em> or <em>event data</em>, this is known as <em>(right) censoring</em>, i.e. the data are (right-)censored.</p>
<p>Data protection policies are omnipresent and insurance companies are not any different with respect to policyholder data. On one hand, there are regulatory data protection that disallow disclosure of personal identifiable pieces of information. On the other hand, data are a key resource to a life insurer and sharing this valuable piece of information creates a competition disadvantage by revealing important information to the company’s competitive position. Therefore, rather than relying on real survival data, we consider a synthetic dataset consisting of a hypothetical portfolio of policyholders.</p>
<p>In the supplemental information to this text, we provide survival information for a hypothetical insurance company in <code>SyntheticInsurerData.csv</code>. The company has sold “whole life insurance policies” for since 1955 (the coming chapters discuss different life insurance policies in detail). Policyholders have to go through an underwriting examination, and in addition to policyholders’ age, sex (0 for female, 1 for male), smoking status (0 for non-smoker, 1 for smoker), and the month of sale, the company records the applicants body-mass index (BMI) and the systolic blood pressure at the time of underwriting. Finally, for those policyholders with a claim, i.e., for the policyholders that have died, the company records the time of death (relative to the month of underwriting). The data is organized in the order of sales, so that the oldest entries are at the top of the data and the newest entries are at the bottom:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="modeling-lifetimes.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb10-2"><a href="modeling-lifetimes.html#cb10-2" aria-hidden="true" tabindex="-1"></a>ins_data <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;Data/SyntheticInsurerData.csv&quot;</span>,<span class="at">data.table=</span><span class="cn">FALSE</span>)</span>
<span id="cb10-3"><a href="modeling-lifetimes.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(ins_data), <span class="at">align =</span> <span class="st">&quot;ccccrrrr&quot;</span>,<span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb10-4"><a href="modeling-lifetimes.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#displaying the very end of the table similar to the very top of the table requires a few more steps</span></span>
<span id="cb10-5"><a href="modeling-lifetimes.html#cb10-5" aria-hidden="true" tabindex="-1"></a>tmp_tail_ins_data <span class="ot">&lt;-</span> <span class="fu">tail</span>(ins_data); <span class="fu">rownames</span>(tmp_tail_ins_data) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb10-6"><a href="modeling-lifetimes.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tmp_tail_ins_data, <span class="at">align =</span> <span class="st">&quot;ccccrrrr&quot;</span>,<span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="center">Month_of_Sale</th>
<th align="center">Age</th>
<th align="center">Sex</th>
<th align="center">Smoking</th>
<th align="right">BMI</th>
<th align="right">BloodPressure</th>
<th align="right">Claim</th>
<th align="right">Time_of_death</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">27</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="right">25.8</td>
<td align="right">117</td>
<td align="right">YES</td>
<td align="right">55.63</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">51</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="right">17.6</td>
<td align="right">109</td>
<td align="right">YES</td>
<td align="right">18.53</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="center">59</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="right">22.5</td>
<td align="right">132</td>
<td align="right">YES</td>
<td align="right">15.88</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">37</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="right">22.9</td>
<td align="right">109</td>
<td align="right">YES</td>
<td align="right">57.40</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="center">62</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="right">30.9</td>
<td align="right">147</td>
<td align="right">YES</td>
<td align="right">27.83</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">31</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="right">17.3</td>
<td align="right">91</td>
<td align="right">YES</td>
<td align="right">64.06</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Month_of_Sale</th>
<th align="center">Age</th>
<th align="center">Sex</th>
<th align="center">Smoking</th>
<th align="right">BMI</th>
<th align="right">BloodPressure</th>
<th align="right">Claim</th>
<th align="right">Time_of_death</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">780</td>
<td align="center">43</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="right">17.10</td>
<td align="right">110</td>
<td align="right">NO</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="center">780</td>
<td align="center">57</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="right">19.30</td>
<td align="right">118</td>
<td align="right">NO</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="center">780</td>
<td align="center">40</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="right">20.10</td>
<td align="right">117</td>
<td align="right">NO</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="center">780</td>
<td align="center">27</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="right">20.60</td>
<td align="right">90</td>
<td align="right">NO</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="center">780</td>
<td align="center">55</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="right">20.10</td>
<td align="right">118</td>
<td align="right">NO</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="center">780</td>
<td align="center">23</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="right">19.03</td>
<td align="right">82</td>
<td align="right">NO</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>Evidently, most of the policies sold in the first months—back in 1955—have matured, and most recently underwritten policyholders are still alive. Let us further investigate the mortality dataframe and we start by summarizing the attributes of our data:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="modeling-lifetimes.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressWarnings</span>(<span class="fu">library</span>(psych))</span>
<span id="cb11-2"><a href="modeling-lifetimes.html#cb11-2" aria-hidden="true" tabindex="-1"></a>tmp_describe_ins_data<span class="ot">&lt;-</span>psych<span class="sc">::</span><span class="fu">describe</span>(ins_data)</span>
<span id="cb11-3"><a href="modeling-lifetimes.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tmp_describe_ins_data, <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format.args =</span> <span class="fu">list</span>(<span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>))</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="13%" />
<col width="4%" />
<col width="7%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="7%" />
<col width="6%" />
<col width="4%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="8%" />
<col width="4%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">vars</th>
<th align="right">n</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">median</th>
<th align="right">trimmed</th>
<th align="right">mad</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">range</th>
<th align="right">skew</th>
<th align="right">kurtosis</th>
<th align="right">se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Month_of_Sale</td>
<td align="right">1</td>
<td align="right">160,781</td>
<td align="right">394.58</td>
<td align="right">216.72</td>
<td align="right">382.00</td>
<td align="right">393.08</td>
<td align="right">277.25</td>
<td align="right">1.0</td>
<td align="right">780.0</td>
<td align="right">779.0</td>
<td align="right">0.08</td>
<td align="right">-1.17</td>
<td align="right">0.54</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="right">2</td>
<td align="right">160,781</td>
<td align="right">39.99</td>
<td align="right">11.61</td>
<td align="right">39.00</td>
<td align="right">39.65</td>
<td align="right">11.86</td>
<td align="right">19.0</td>
<td align="right">65.0</td>
<td align="right">46.0</td>
<td align="right">0.22</td>
<td align="right">-0.73</td>
<td align="right">0.03</td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="right">3</td>
<td align="right">160,781</td>
<td align="right">0.70</td>
<td align="right">0.46</td>
<td align="right">1.00</td>
<td align="right">0.75</td>
<td align="right">0.00</td>
<td align="right">0.0</td>
<td align="right">1.0</td>
<td align="right">1.0</td>
<td align="right">-0.87</td>
<td align="right">-1.25</td>
<td align="right">0.00</td>
</tr>
<tr class="even">
<td align="left">Smoking</td>
<td align="right">4</td>
<td align="right">160,781</td>
<td align="right">0.30</td>
<td align="right">0.46</td>
<td align="right">0.00</td>
<td align="right">0.25</td>
<td align="right">0.00</td>
<td align="right">0.0</td>
<td align="right">1.0</td>
<td align="right">1.0</td>
<td align="right">0.88</td>
<td align="right">-1.22</td>
<td align="right">0.00</td>
</tr>
<tr class="odd">
<td align="left">BMI</td>
<td align="right">5</td>
<td align="right">160,781</td>
<td align="right">22.79</td>
<td align="right">4.55</td>
<td align="right">21.70</td>
<td align="right">22.20</td>
<td align="right">3.85</td>
<td align="right">16.1</td>
<td align="right">69.6</td>
<td align="right">53.5</td>
<td align="right">1.46</td>
<td align="right">3.26</td>
<td align="right">0.01</td>
</tr>
<tr class="even">
<td align="left">BloodPressure</td>
<td align="right">6</td>
<td align="right">160,781</td>
<td align="right">114.74</td>
<td align="right">15.75</td>
<td align="right">114.00</td>
<td align="right">114.36</td>
<td align="right">16.31</td>
<td align="right">57.0</td>
<td align="right">208.0</td>
<td align="right">151.0</td>
<td align="right">0.26</td>
<td align="right">0.09</td>
<td align="right">0.04</td>
</tr>
<tr class="odd">
<td align="left">Claim*</td>
<td align="right">7</td>
<td align="right">160,781</td>
<td align="right">1.37</td>
<td align="right">0.48</td>
<td align="right">1.00</td>
<td align="right">1.34</td>
<td align="right">0.00</td>
<td align="right">1.0</td>
<td align="right">2.0</td>
<td align="right">1.0</td>
<td align="right">0.54</td>
<td align="right">-1.71</td>
<td align="right">0.00</td>
</tr>
<tr class="even">
<td align="left">Time_of_death</td>
<td align="right">8</td>
<td align="right">59,382</td>
<td align="right">28.27</td>
<td align="right">13.69</td>
<td align="right">28.36</td>
<td align="right">28.24</td>
<td align="right">15.21</td>
<td align="right">0.0</td>
<td align="right">64.2</td>
<td align="right">64.2</td>
<td align="right">0.02</td>
<td align="right">-0.73</td>
<td align="right">0.06</td>
</tr>
</tbody>
</table>
<p>In summary, there are 160,781 insureds, out of which 59,382, i.e. 36.93%, have died; the average age at purchase is about 40, and our portfolio has a high percentage of men (70%) and non-smokers (70%). The average BMI is 22.8 and the average blood pressure is 114.7, which are close to (but somewhat lower than) U.S. national averages; for details on common BMI and blood pressure levels, see e.g. the <a href="https://obs.withings.com/us">Withings Health Observatory</a> that provides real-time information for U.S. Americans.</p>
<p>To illustrate the sales history, we plot the monthly sales of the company, which is given as Figure <a href="modeling-lifetimes.html#fig:MonthlySalesFigsa">2.4</a>.</p>
<h5 style="text-align: center;">
<a id="displayCode.MonthlySalesFigs" href="javascript:togglecode('toggleCode.MonthlySalesFigs','displayCode.MonthlySalesFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.MonthlySalesFigs" style="display: none">
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="modeling-lifetimes.html#cb12-1" aria-hidden="true" tabindex="-1"></a>monthly_sales <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">780</span>)</span>
<span id="cb12-2"><a href="modeling-lifetimes.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">780</span>){</span>
<span id="cb12-3"><a href="modeling-lifetimes.html#cb12-3" aria-hidden="true" tabindex="-1"></a>  monthly_sales[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(ins_data<span class="sc">$</span>Month_of_Sale <span class="sc">==</span> i)</span>
<span id="cb12-4"><a href="modeling-lifetimes.html#cb12-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-5"><a href="modeling-lifetimes.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(monthly_sales,<span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">&quot;green&quot;</span>, <span class="at">main=</span><span class="st">&quot;Monthly Sales&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;month&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Sales&quot;</span>)</span>
<span id="cb12-6"><a href="modeling-lifetimes.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">mean</span>(monthly_sales), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:MonthlySalesFigsa"></span>
<img src="LifeCon_files/figure-html/MonthlySalesFigsa-1.png" alt="Monthy sales for the synthetic mortality data" width="576" />
<p class="caption">
Figure 2.4: <strong>Monthy sales for the synthetic mortality data</strong>
</p>
</div>
<p>In summary, the company sells about 200 insurance contracts each month, although there is some variation over time; while sales initially increased, the company experience some ebbs and flows, potentially due to marketing efforts and/or the effectiveness or attractiveness of the products.</p>
<p>We now investigate the traits of the insureds for which various histograms are given as Figure <a href="modeling-lifetimes.html#fig:HistInsDataFigsa">2.5</a>.</p>
<h5 style="text-align: center;">
<a id="displayCode.HistInsDataFigs" href="javascript:togglecode('toggleCode.HistInsDataFigs','displayCode.HistInsDataFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.HistInsDataFigs" style="display: none">
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="modeling-lifetimes.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb13-2"><a href="modeling-lifetimes.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(ins_data<span class="sc">$</span>Age,<span class="at">main=</span><span class="st">&quot;Insured Age&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;age&quot;</span>, <span class="at">border=</span><span class="st">&quot;red&quot;</span>, <span class="at">col=</span><span class="st">&quot;green&quot;</span>)</span>
<span id="cb13-3"><a href="modeling-lifetimes.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(ins_data<span class="sc">$</span>BMI,<span class="at">main=</span><span class="st">&quot;Body Mass Index&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;bmi&quot;</span>, <span class="at">border=</span><span class="st">&quot;red&quot;</span>, <span class="at">col=</span><span class="st">&quot;green&quot;</span>)</span>
<span id="cb13-4"><a href="modeling-lifetimes.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(ins_data<span class="sc">$</span>BloodPressure,<span class="at">main=</span><span class="st">&quot;Systolic Blood Pressure&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;bp&quot;</span>, <span class="at">border=</span><span class="st">&quot;red&quot;</span>, <span class="at">col=</span><span class="st">&quot;green&quot;</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:HistInsDataFigsa"></span>
<img src="LifeCon_files/figure-html/HistInsDataFigsa-1.png" alt="Histograms for the synthetic mortality data" width="768" />
<p class="caption">
Figure 2.5: <strong>Histograms for the synthetic mortality data</strong>
</p>
</div>
<p>Most individuals are in between thirty and fifty years of age when purchasing the coverage, but some sales to younger and some older individuals are observed. The <em>Body Mass Index (BMI)</em> is concentrated between 20 and 30, although there are some outliers with relatively large values. The systolic blood pressure is roughly bell shaped, with most applicants exhibiting blood pressure measurements at normal levels (below 120) or slightly elevated levels (120-130). We further visualize the relationship between these three attributes by looking at the correlation correlation matrix corresponding to these three characteristics, which is given as Figure <a href="modeling-lifetimes.html#fig:CorrPlotInsDataFigsa">2.6</a>.</p>
<h5 style="text-align: center;">
<a id="displayCode.CorrPlotInsDataFigs" href="javascript:togglecode('toggleCode.CorrPlotInsDataFigs','displayCode.CorrPlotInsDataFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.CorrPlotInsDataFigs" style="display: none">
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="modeling-lifetimes.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressWarnings</span>(<span class="fu">library</span>(corrplot))</span>
<span id="cb14-2"><a href="modeling-lifetimes.html#cb14-2" aria-hidden="true" tabindex="-1"></a>tmp_corr_ins_data <span class="ot">&lt;-</span> <span class="fu">cor</span>(ins_data[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">6</span>)])</span>
<span id="cb14-3"><a href="modeling-lifetimes.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tmp_corr_ins_data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>, <span class="st">&quot;BMI&quot;</span>, <span class="st">&quot;BP&quot;</span>)</span>
<span id="cb14-4"><a href="modeling-lifetimes.html#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(tmp_corr_ins_data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>, <span class="st">&quot;BMI&quot;</span>, <span class="st">&quot;BP&quot;</span>)</span>
<span id="cb14-5"><a href="modeling-lifetimes.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(tmp_corr_ins_data, <span class="at">method=</span><span class="st">&quot;circle&quot;</span>, <span class="at">order=</span><span class="st">&quot;hclust&quot;</span>, <span class="at">addCoef.col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">tl.col=</span><span class="st">&quot;black&quot;</span>,<span class="at">tl.srt=</span><span class="dv">45</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:CorrPlotInsDataFigsa"></span>
<img src="LifeCon_files/figure-html/CorrPlotInsDataFigsa-1.png" alt="Correlation matrix for the synthetic mortality data corresponding to age, BMI and BP (blood pressure)" width="960" />
<p class="caption">
Figure 2.6: <strong>Correlation matrix for the synthetic mortality data corresponding to age, BMI and BP (blood pressure)</strong>
</p>
</div>
<p>Clearly, high blood pressure and elevated BMI are positively associated, and an elevated blood pressure is more common for elderly insureds, which are common observations in many populations.</p>
<p>One of our main focus is the realized lifetime, which can only be observed for those individuals where a claim had been paid. We thus plot the distribution of the age at death based on these observations, which is illustrated in Figure <a href="modeling-lifetimes.html#fig:AgeDeathHistInsDataFigs">2.7</a>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="modeling-lifetimes.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(ins_data<span class="sc">$</span>Age<span class="sc">+</span>ins_data<span class="sc">$</span>Time_of_death,<span class="at">main=</span><span class="st">&quot;Age at Death&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;age&quot;</span>, <span class="at">border=</span><span class="st">&quot;red&quot;</span>, <span class="at">col=</span><span class="st">&quot;green&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:AgeDeathHistInsDataFigs"></span>
<img src="LifeCon_files/figure-html/AgeDeathHistInsDataFigs-1.png" alt="Age at Death for the synthetic mortality data" width="576" />
<p class="caption">
Figure 2.7: Age at Death for the synthetic mortality data
</p>
</div>
<p>Not surprisingly, the majority of deceased policyholders have died at higher ages, since the bulk of deaths are concentrated between seventy and ninety years old. There are a few individuals that died relatively young, and similarly a few that were close to achieving the centenarian status, though it should be noted that some policyholders at higher ages may still be alive. Indeed, the ages of five oldest individuals that are still alive are</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="modeling-lifetimes.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">tail</span>(<span class="fu">sort</span>(ins_data[ins_data<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;NO&quot;</span>,<span class="dv">2</span>]<span class="sc">+</span> (<span class="dv">780</span> <span class="sc">-</span> ins_data[ins_data<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;NO&quot;</span>,<span class="dv">1</span>])<span class="sc">/</span><span class="dv">12</span>),<span class="dv">5</span>), <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>[1] 102.50 102.67 103.50 104.17 105.58</code></pre>
<p>and thus, it is clear that we observe not many centenarians.</p>
<p>It is intuitive that the number of deaths are associated with sales: The maximal number of deaths is the number of individuals that purchased insurance. This is evident when plotting the number of deaths by the year of sale, which is displayed in Figure <a href="modeling-lifetimes.html#fig:DeathSalesPlotInsDataFigsa">2.8</a>, particularly over the early years.</p>
<h5 style="text-align: center;">
<a id="displayCode.DeathSalesPlotInsDataFigs" href="javascript:togglecode('toggleCode.DeathSalesPlotInsDataFigs','displayCode.DeathSalesPlotInsDataFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.DeathSalesPlotInsDataFigs" style="display: none">
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="modeling-lifetimes.html#cb18-1" aria-hidden="true" tabindex="-1"></a>annual_death <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">65</span>)</span>
<span id="cb18-2"><a href="modeling-lifetimes.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">65</span>){</span>
<span id="cb18-3"><a href="modeling-lifetimes.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>){</span>
<span id="cb18-4"><a href="modeling-lifetimes.html#cb18-4" aria-hidden="true" tabindex="-1"></a>    annual_death[i] <span class="ot">&lt;-</span> annual_death[i] <span class="sc">+</span> <span class="fu">sum</span>(ins_data[ins_data<span class="sc">$</span>Month_of_Sale <span class="sc">==</span> (i<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">12</span> <span class="sc">+</span>j,<span class="dv">7</span>] <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) </span>
<span id="cb18-5"><a href="modeling-lifetimes.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-6"><a href="modeling-lifetimes.html#cb18-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-7"><a href="modeling-lifetimes.html#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(annual_death,<span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">main=</span><span class="st">&quot;Annual Deaths&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Deaths&quot;</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:DeathSalesPlotInsDataFigsa"></span>
<img src="LifeCon_files/figure-html/DeathSalesPlotInsDataFigsa-1.png" alt="Annual deaths for the synthetic mortality data" width="576" />
<p class="caption">
Figure 2.8: <strong>Annual deaths for the synthetic mortality data</strong>
</p>
</div>
<p>We can also investigate the relationship of the time of death to policyholder characteristics by creating a correlation plot amongst those that had already died. The correlation matrix appears as Figure <a href="modeling-lifetimes.html#fig:DeadCorrPlotInsDataFigsa">2.9</a>.</p>
<h5 style="text-align: center;">
<a id="displayCode.DeadCorrPlotInsDataFigs" href="javascript:togglecode('toggleCode.DeadCorrPlotInsDataFigs','displayCode.DeadCorrPlotInsDataFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.DeadCorrPlotInsDataFigs" style="display: none">
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="modeling-lifetimes.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#suppressWarnings(library(corrplot))</span></span>
<span id="cb19-2"><a href="modeling-lifetimes.html#cb19-2" aria-hidden="true" tabindex="-1"></a>tmp_dead_corr_ins_data <span class="ot">&lt;-</span> <span class="fu">cor</span>(ins_data[ins_data<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">8</span>)])</span>
<span id="cb19-3"><a href="modeling-lifetimes.html#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tmp_dead_corr_ins_data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>, <span class="st">&quot;BMI&quot;</span>, <span class="st">&quot;BP&quot;</span>, <span class="st">&quot;TD&quot;</span>)</span>
<span id="cb19-4"><a href="modeling-lifetimes.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(tmp_dead_corr_ins_data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Age&quot;</span>, <span class="st">&quot;BMI&quot;</span>, <span class="st">&quot;BP&quot;</span>, <span class="st">&quot;TD&quot;</span>)</span>
<span id="cb19-5"><a href="modeling-lifetimes.html#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(tmp_dead_corr_ins_data, <span class="at">method=</span><span class="st">&quot;circle&quot;</span>, <span class="at">order=</span><span class="st">&quot;hclust&quot;</span>, <span class="at">addCoef.col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">tl.col=</span><span class="st">&quot;black&quot;</span>, <span class="at">tl.srt=</span><span class="dv">45</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:DeadCorrPlotInsDataFigsa"></span>
<img src="LifeCon_files/figure-html/DeadCorrPlotInsDataFigsa-1.png" alt="Correlation matrix for the synthetic mortality data corresponding to age, BMI, BP (blood pressure) and TD (time of death)" width="960" />
<p class="caption">
Figure 2.9: <strong>Correlation matrix for the synthetic mortality data corresponding to age, BMI, BP (blood pressure) and TD (time of death)</strong>
</p>
</div>
<p>Hence, the time of death is (strongly) negatively associated with age, which is not surprising as elderly individuals are more likely to die. Similar behaviour is also observed for the BMI and blood pressure attributes that are negatively associated with the the time of death, but we should clarify that the BMI and blood pressure measurements are observed at policy inception though these negative associations explain why such attributes are good predictors of the insured’s health. The pairwise correlation between age, BMI and blood pressure are in line with our findings from Figure <a href="modeling-lifetimes.html#fig:CorrPlotInsDataFigsa">2.6</a> that includes all insureds irrespective of their life status.</p>
<p>Even this simple analysis helps in understanding why the life office should evaluate the individual risk per policy by taking into consideration the available information, and more importantly, to have a fair evaluation of the covariates with strong influence over the policy final payout.</p>
<p>Returning to our general description of survival data sets in the current context, if there was a claim and the death event was recorded, this data entry is <em>non-censored</em>; however, if the claim is not raised, then the policyholder is alive by the end of the observation period, and in turn, this datum is <em>right-censored</em> as the death event has not yet occurred. For example, a policyholder of age <span class="math inline">\(33\)</span> buys a policy in early January 1990, i.e. her/his <em>Month_of_Sale</em> record would be <span class="math inline">\(421\)</span> – recall that month <span class="math inline">\(780\)</span> indicates that a policy is bought in December 2019. If the policyholder survives by the end of the observation period, then a censored datum is recorded as <span class="math inline">\(30\)</span>; in contrast, if the policyholder dies 13 years and 2 months after, then a censored datum is recorded with an event time <span class="math inline">\(13+2/12\approx13.17\)</span>.</p>
</div>
</div>
<div id="Sec:ModelingDeaths" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Modeling Death</h2>
<p>The previous section has introduced various examples of mortality data. Clearly, the most relevant question to actuaries is how to use the available pieces of information in order to devise lifetime models that could become the basis for analyzing the life contingent exposures. This section provides the theoretical foundation for modeling lifetimes.</p>
<p>An important caveat is that we focus, both in the presentation of the datasets and in the modeling considerations in this chapter, on understanding the <em>lifetime uncertainty</em> for a given individual or (sub)population, where the life status is assumed to be dichotomous, i.e. <em>alive</em> and <em>dead</em> are the only life status under observation. Clearly, this simplified assumption helps us to create a parsimonious presentation that is fit for its purpose at this very moment, though one could consider <em>multi-state models</em> – with multiple life status such as alive, death, temporary disability, permanent disability and any other long term health condition, etc. – or <em>models with multiple decrements</em> that relate to specific life insurance products where the modeler could consider non-health related factors such as early termination of a contract that have an impact on the policy’s cashflows. Clearly multi-state and multi-decrement models present a generalization of the dichotomous lifetime model, where there are only two states – alive and dead – and a single decrement – dying, respectively. However, aside from being an important special case, there are benefits to discussing and building such more general models armed with the understanding of and experience working with the dichotomous model. We will return to multi-decrement and multi-state models in Chapter XX.</p>
<p>We commence by introducing the most important concept of a lifetime random variable and then discuss key actuarial quantities that allow for a formal interpretation of the data previously presented. We deviate from a traditional actuarial presentation in that we allow for general attributes, which we denote by <span class="math inline">\(\bf{x}\)</span>, to affect the lifetime distribution. However, towards the end of the section, we specialize to the more limited – but in traditional actuarial modeling conventional
– assumption that the only relevant (dynamic) covariate for the distribution of the lifetimes is age <span class="math inline">\(x\)</span>.</p>
<div id="lifetime-random-variable-and-its-distribution" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Lifetime Random Variable and its Distribution</h3>
<p>We start by considering an individual with attributes <span class="math inline">\(\bf{x}\)</span> from some feature space. We assume that the attributes <span class="math inline">\(\bf{x}\)</span> are sufficient to determine the distribution of the individual’s future lifetime, which we denote by <span class="math inline">\(T_{\bf{x}}\)</span>. In other words, the <em>lifetime random variable</em> <span class="math inline">\(T_{\bf{x}}\)</span> follows a distribution depending on the attributes <span class="math inline">\(\bf{x}\)</span>. We will assume this random variable has positive real values, i.e. its support is <span class="math inline">\((0,\infty)\)</span>, and that the random variable is “well-behaved” (integrable, continuous, etc.) so that all the operations in what follows are well-defined.</p>
<p>It is helpful to pause and reflect on different types of possible attributes. Some attributes, such as the individual’s race, the individual’s (biological) sex, race, learned profession, etc., are immutable. Thus, one can either include them in the considered set of attributes <span class="math inline">\(\bf{x}\)</span>. <em>Or</em> we can consider a population of individuals with the same immutable characteristics, and then differentiate them solely by non-immutable characteristics <span class="math inline">\(\bf{x}\)</span>. An example are the life expectancy tables in Section <a href="modeling-lifetimes.html#S:DataLifeExp">2.1.1</a>: here the relevant population could be hispanic females, for which we distinguished (only) different age levels. This approach, where <em>age</em> – typically denoted by <span class="math inline">\(x\)</span> – is the only attribute under consideration, is the setting contemplated in traditional life-contingent analysis, and we will discuss this as an important special case in the last part <a href="modeling-lifetimes.html#S:ModelOnlyAge">2.2.3</a> of this section.</p>
<p>However, the latter setting is restrictive from a number of perspectives. For instance, there are various individual characteristics that are relevant to the future lifetime that are non-immutable. For instance, the health-related attributes of BMI and systolic blood pressure in the dataset presented in Section <a href="modeling-lifetimes.html#S:IndivMortData">2.1.3</a> may change over time, and a blood pressure level of 130 for a 30 year old may carry a different interpretation than a level of 130 for a 70 year old. Moreover, environmental or socio-economic conditions may change over time and could impact the distribution of future lifetimes, and these could also be reflected in the set of attributes <span class="math inline">\(\bf{x}\)</span>. We leave the exploration of different relevant examples to the remaining sections of this chapter as well as later, more advanced chapters of this book.</p>
<p>Let <span class="math inline">\(F_{\bf{x}}\)</span> and <span class="math inline">\(S_{\bf{x}}\)</span> be the <em>cumulative distribution function</em> (cdf) and <em>survival function</em> of <span class="math inline">\(T_{\bf{x}}\)</span>, respectively:
<span class="math display">\[
F_{\bf{x}}(t) =\Pr(T_{\bf{x}}\le t)\quad \text{and}\quad S_{\bf{x}}(t) =\Pr(T_{\bf{x}} &gt; t)=1-\Pr(T_{\bf{x}} \le t)=1-F_{\bf{x}}(t)\quad\text{for all}\;t\geq0.
\]</span></p>
<p>Given our natural assumption that the lifetime variable <span class="math inline">\(T_{\bf{x}}\)</span> is continuously distributed, i.e. that there are no outcomes that carry point masses, we can also defined its probability density function <span class="math inline">\(f_{\bf{x}}\)</span>:</p>
<p><span class="math display">\[
f_{\bf{x}}(t) =\frac{\partial F_{\bf{x}}(t)}{\partial t}=\frac{\partial \big(1- S_{\bf{x}}(t)\big)}{\partial t}=-\frac{\partial S_{\bf{x}}(t)}{\partial t},\;t\geq 0.
\]</span></p>
<p>Similarly, we can define the <em>force of mortality</em>, <span class="math inline">\(\mu_\bf{x}\)</span>, which in different contexts is also referred to as the <em>hazard rate</em> or the <em>mortality intensity</em>:</p>
<p><span class="math display">\[
\mu_{\bf{x}}(t) = - \frac{\partial \log\{ S_{\bf{x}}(t)\}}{\partial t} = \frac{-\frac{\partial S_{\bf{x}}(t)}{\partial t}}{S_{\bf{x}}(t)}=\frac{f_{\bf{x}}(t)}{S_{\bf{x}}(t)},\;t\geq 0,
\]</span></p>
<p>which is equivalent to:
<span class="math display">\[
S_{\bf{x}}(t) = \exp\left\{-\int_0^t \mu_{\bf{x}}(s)\;ds \right\}\quad\text{for all}\quad t\ge 0.
\]</span>
The important point to note is that any one of the functions <span class="math inline">\(F_{\bf{x}}\)</span>, <span class="math inline">\(S_{\bf{x}}\)</span>, <span class="math inline">\(f_{\bf{x}}\)</span>, or <span class="math inline">\(\mu_{\bf{x}}\)</span> completely determines the distribution of the future lifetime <span class="math inline">\(T_{\bf{x}}\)</span>. In other words, in order to specify a probabilistic model of future lifetimes, we can choose to model any of these quantities – knowing the form of just one of them will allow you to determine expressions for the other functions.</p>
</div>
<div id="standard-actuarial-notation-q_bfx-_tp_bfx-and-all-that" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Standard Actuarial Notation: <span class="math inline">\(q_{\bf{x}}\)</span>, <span class="math inline">\(_tp_{\bf{x}}\)</span>, and All That</h3>
<p>The introduction of the lifetime random variable, in principle, is enough for actuarial analyses of life-contingent exposures. In particular, as we will see in the next chapter, based on <span class="math inline">\(T_{\bf{x}}\)</span> we can model (discounted) cash flows of common life insurance and annuity products, determine their expected values and variances, etc. However, the discussion so far was primarily formal and did not instill much intuition. For instance, the cdf <span class="math inline">\(F_{\bf{x}}(t)\)</span> at time <span class="math inline">\(t\)</span> is nothing else than the probability that an individual will die before a certain time <span class="math inline">\(t\)</span>, i.e. the <em>mortality probability</em>; and the expected value of <span class="math inline">\(T_{\bf{x}}\)</span> is nothing else than the expected years lived, i.e. the <em>life expectancy</em>, for an individual with attributes <span class="math inline">\(\bf{x}\)</span> that we had already encountered in Section <a href="modeling-lifetimes.html#S:DataLifeExp">2.1.1</a> in the context of national vital statistics.</p>
<p>To instill interpretation into the notation, but also to have a precise, uniform representation to record and communicate relevant quantities, actuaries around the globe rely on so-called <a href="https://en.wikipedia.org/wiki/Actuarial_notation">standard actuarial notation</a>. This notation is based on a so-called <em>Halo</em> system where symbols are placed as superscript or subscript before or after a main character. In particular, the <span class="math inline">\(t\)</span>-year <em>mortality probability</em> for an individual with attributes <span class="math inline">\(\bf{x}\)</span> is denotes by <span class="math inline">\(_tq_{\bf{x}}\)</span>:
<span class="math display">\[
{_tq_{\bf{x}}} = F_{\bf{x}}(t),\;t\geq 0.
\]</span>
Similarly the <span class="math inline">\(t\)</span>-year <em>survival probability</em>, denoted by <span class="math inline">\(_tp_{\bf{x}}\)</span>, is nothing else than the survival function:
<span class="math display">\[
{_tp_{\bf{x}}} = S_{\bf{x}}(t),\;t\geq 0.
\]</span>
Clearly, <span class="math inline">\({_tp_{\bf{x}}}+{_tq_{\bf{x}}}=1\)</span>, since the individual <span class="math inline">\(x\)</span> either dies or survives after <span class="math inline">\(t\)</span> units of time. Furthermore, is is conventional to drop a superscript of one:
<span class="math display">\[
{_1p_{\bf{x}}} = {p_{\bf{x}}}\quad\text{and}\quad {_1q_{\bf{x}}} = {q_{\bf{x}}}.
\]</span>
Furthemore, we denote the <span class="math inline">\(s\)</span>-year mortality probability after surviving for <span class="math inline">\(t\)</span> years as:
<span class="math display">\[
{_{t|s}q_{\bf{x}}} = F_{\bf{x}}(t+s) - F_{\bf{x}}(t) = {_{t+s}q_{\bf{x}}} - {_tq_{\bf{x}}} = S_{\bf{x}}(t) - S_{\bf{x}}(t+s) = {_tp_{\bf{x}}} - {_{t+s}p_{\bf{x}}} ,\;t,s\geq 0.
\]</span></p>
<p>As indicated, the expected value of the lifetime random variable corresponds to the <em>(complete) expectation of life</em> or <em>life expectancy</em>. It is defined as follows:</p>
<p><span class="math display">\[
\stackrel{\circ}{e}_{\bf{x}}=E[T_{\bf{x}}]=\int_0^\infty t \,f_{\bf{x}}(t)\;dt=\int_0^\infty {_tp_{\bf{x}}}\;dt,
\]</span>
where the last equaility follows from integration by parts.</p>
<h5 style="text-align: center;">
<a id="displayTheory.DerivationLifeExp" href="javascript:toggleTheory('toggleTheory.DerivationLifeExp','displayCode.DerivationLifeExp');"><i><strong>Derivation of Formula for Complete Life Expectancy</strong></i></a>
</h5>
<div id="toggleTheory.DerivationLifeExp" style="display: none">
<p><span class="math display">\[
\stackrel{\circ}{e}_{\bf{x}} = E[T_{\bf{x}}] = \int_0^{\infty} t\, \underbrace{f_{\bf{x}}(t)}_{-S_{\bf{x}}&#39;(t)}\,dt = - \left[S_{\bf{x}}(t)\, t\right]_{t=0}^{\infty} + \int_0^{\infty} S_{\bf{x}}(t)\,dt = \int_0^{\infty} {_tp_{\bf{x}}}\,dt.
\]</span></p>
</div>
<p>It is also helpful to define a <em>temporary</em> version of the expectation of life, i.e. the number of years lived wihin the next <span class="math inline">\(n\)</span> years. In actuarial notation, temporary quantities are denoted by <span class="math inline">\(\cdot_{\cdot:\overline{n}|}\)</span>:
<span class="math display">\[
\stackrel{\circ}{e}_{{\bf{x}}:\overline{n}|} = E[\min\{T_{\bf{x}},n\}] = \int_0^{n} {_tp_{\bf{x}}}\,dt.
\]</span>
The interpretation is that unlike for the complete expectation of life, we only count years lived until time <span class="math inline">\(n.\)</span> For instance, considering a population of <span class="math inline">\(l_0\)</span> individuals, while <span class="math inline">\(l_0 \times {_tp_{\bf{x}}}\)</span> denotes the expected number of survivors until time <span class="math inline">\(t\)</span>, <span class="math inline">\(l_0 \times \stackrel{\circ}{e}_{{\bf{x}}:\overline{t}|}\)</span> denotes the average size of the population over the next <span class="math inline">\(t\)</span> periods. We will return to this point in the context of life tables in section <a href="modeling-lifetimes.html#S:LifeTab">2.4</a>.</p>
<p>We will see many more examples of actuarial notation through the course of this book, and we will heavily rely on it.</p>
</div>
<div id="S:ModelOnlyAge" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> The Classical Case: Age-Only Model</h3>
<p>As mentioned, an important special case is the situation where the only (non-immutable) attribute is age. In this case, it is conventional to write <span class="math inline">\({\bf{x}} = x\)</span>, where <span class="math inline">\(x\)</span> is a number denoting current age, and the lifetime random variable <span class="math inline">\(T_x\)</span> that explains the remaining future lifetime for an individual currently aged <span class="math inline">\(x\)</span>. Hence, in this case, <span class="math inline">\(T_x\)</span> – and its distribution – solely depends on the age <span class="math inline">\(x\)</span>, and, thus, <span class="math inline">\(T_x\)</span> and <span class="math inline">\(T_0|T_0&gt;x\)</span> are identically distributed random variables (here <span class="math inline">\(T_0|T_0&gt;x\)</span> denotes the random variable conditional on the event <span class="math inline">\(\{T_0&gt;x\}\)</span>). In other words, the future lifetime for <span class="math inline">\((x)\)</span> is the same as the future lifetime of a newborn given that this newborn reaches age <span class="math inline">\(x\)</span>, <span class="math inline">\(T_0&gt;x\)</span>.</p>
<p>The mathematical formulations are thus described by conditional probabilities:
<span class="math display">\[\begin{eqnarray*}
{_tq_x} = F_x(t) &amp;=&amp; Pr(T_x \le t) = Pr(T_x \le t \mid T_x&gt;0) \\
&amp;=&amp; Pr(T_0-x \le t \mid T_0-x&gt;0) = Pr(T_0 \le x + t \mid T_0 &gt; x)\\
&amp;=&amp;\frac{\Pr(x&lt;T_0\leq x+t)}{\Pr(T_0&gt;x)}=\frac{F_0(x+t)-F_0(x)}{S_0(x)}=\frac{S_0(x)-S_0(x+t)}{S_0(x)}
\end{eqnarray*}\]</span>
and
<span class="math display">\[\begin{eqnarray*}
{_tp_x} = S_x(t) &amp;=&amp; Pr(T_x &gt; t) = Pr(T_x &gt; t \mid T_x &gt; 0) \\
&amp;=&amp; Pr(T_0-x &gt; t \mid T_0-x&gt;0) =  Pr(T_0 &gt; x+t \mid T_0&gt;x)\\
&amp;=&amp;\frac{\Pr(T_0&gt; x+t)}{\Pr(T_0&gt;x)}=\frac{S_0(x+t)}{S_0(x)}.
\end{eqnarray*}\]</span>
Similarly, the probability density function of <span class="math inline">\(T_x\)</span> is simply given by the conditional density function of <span class="math inline">\(T_0\)</span>:
<span class="math display">\[
f_x(t)=-\frac{\partial S_x(t)}{\partial t}=-\frac{\partial \left(\frac{S_0(x+t)}{S_0(x)}\right)}{\partial t}=-\frac{\frac{\partial S_0(x+t)}{\partial t}}{S_0(x)}=\frac{f_0(x+t)}{S_0(x)}\quad\text{for all}\;t&gt;0.
\]</span>
and the force of mortality:
<span class="math display">\[
\mu_x(t) = -\frac{\partial}{\partial t} \log\{S_x(t)\} = -\frac{\partial}{\partial t} \log\{S_0(x+t)\} = \mu_0(x+t) = \mu_{x+t},
\]</span>
i.e. it depends on current age only.</p>
<p>Given the formula for the survival probability, we have:
<span class="math display">\[
{_tp_x} = \frac{S_0(x+t)}{S_0(x)} = \frac{S_0(x+t)}{S_0(x+s)} \frac{S_0(x+s)}{S_0(x)} = \frac{S_0(x+s + (t-s))}{S_0(x+s)} \frac{S_0(x+s)}{S_0(x)} = {_{t-s}p_{x+s}}\,{_sp_x},
\]</span>
i.e. survival probabilities factorize into subperiod survival probabilities in this case. This is one of the key properties that does <em>not</em> hold in the general situation for <span class="math inline">\({_tp_{\bf{x}}}\)</span> from the previous section, but simplifies expressions in this “age-only” model. For instance, we obtain for the <span class="math inline">\(s\)</span>-year mortality probability after surviving for <span class="math inline">\(t\)</span> years as:
<span class="math display">\[
{_{t|s}q_{x}} =  {_tp_x} - {_{t+s}p_x} =  {_tp_x}\, (1 - {_sp_{x+t}}) = {_tp_x}\,{_sq_{x+t}},\;t,s\geq 0.
\]</span>
As for another example, we can express the <span class="math inline">\(n\)</span>-year temporary life expectancy for an <span class="math inline">\(x\)</span>-year old as a function of complete life expectancies at ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span>, and the survival probability:
<span class="math display">\[
\stackrel{\circ}{e}_{x:\overline{n}|} = \stackrel{\circ}{e}_{x}-{_np_x}\,\stackrel{\circ}{e}_{x+n}.
\]</span></p>
<h5 style="text-align: center;">
<a id="displayTheory.FormTempLifeExp" href="javascript:toggleTheory('toggleTheory.FormTempLifeExp','displayCode.FormTempLifeExp');"><i><strong>Derivation of Relationship for Temporary Life Expectancy</strong></i></a>
</h5>
<div id="toggleTheory.FormTempLifeExp" style="display: none">
<p><span class="math display">\[
\stackrel{\circ}{e}_{x:\overline{n}|} = \int_0^{n} {_tp_x}\,dt = \int_0^{\infty} {_tp_x}\,dt - \int_n^{\infty} {_tp_x}\,dt = \stackrel{\circ}{e}_{x} - {_np_x}\,\int_n^{\infty} {_{t-n}p_{x+n}}\,dt = \stackrel{\circ}{e}_{x} - {_np_x}\,\int_0^{\infty} {_{t}p_{x+n}}\,dt = \stackrel{\circ}{e}_{x}-{_np_x}\,\stackrel{\circ}{e}_{x+n}.
\]</span></p>
</div>
<p>Some of the most common models for future lifetimes fall in this category of “age-only models,” in particular the most common <em>analytical mortality laws</em> that we will encounter in the next section as well as models based on conventional life tables (see Section <a href="modeling-lifetimes.html#S:LifeTab">2.4</a>) – both of which are very common in actuarial analysis. While the idea of age being the sole co-variate appears limiting, recall the note from above that one could view the model as specific to a certain population with the same immutable characteristics. Indeed, sometimes it is helpful to carry immutable characteristics as an additional subscript, say <span class="math inline">\({\bf{x}}=(x,a)\)</span> where <span class="math inline">\(a\)</span> is immutable. Here, the same considerations apply as in the “age-only model,” e.g. we have:
<span class="math display">\[
{_tp_{(x,a)}} = {_{t-s}p_{(x+s,a)}}\,{_sp_{(x,a)}},
\]</span>
We will encounter similar models and notation in the context of <em>select-and-ultimate life tables</em> or in the context of <em>cohort life tables</em> in Section <a href="modeling-lifetimes.html#S:LifeTab">2.4</a>. That said, approaches that allow for individual attributes affecting the future lifetime distribution as survival regression models that we will discuss in Section <a href="modeling-lifetimes.html#S:SurvReg">2.6</a> as well as models that incorporate a stochastic evolution of mortality rates due to uncertainty in the demographic environment or in medical technology do not fall in this class of “age-only models,” but are covered by our more general approach and notation.</p>
<p>Obviously, in order to make the model accurate, it should include all possible sources of data and their attributes that could better differentiate the mortality risk amongst insureds or in other words, to achieve equity in the pricing process. However, the choice of an appropriate model also depends on context and potential restrictions. For example, the use of genetic specific attributes for risk classification is under vast scrutiny by insurance ethical experts, since such pieces of information could lead to genetic discrimination, and therefore, there are regulatory constraints in using such attributes. Moreover, even the (biological) sex attribute – one of the most important mortality explanatory variable – is not always acceptable; for example, the European Union insurance regulations had imposed pricing neutrality with respect to sex factors for quite some time, which means that life and non-life insurance policies issued within the European Union market should price males and females at the same level if all other observable attributes are similar.</p>
<p>We will return to such considerations in future chapters when contemplating instututional aspects of certain insurance products or services. In the remainder of this chapter, we will discuss the most common mortality models, i.e. ways of characterizing the distribution of <span class="math inline">\(T_{\bf{x}}\)</span>. In particular, in addition to its specification, we will also comment on statistical estimation of the resulting model.</p>
</div>
</div>
<div id="S:AnalMortLaws" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Analytical laws of mortality</h2>
<p>Actuarial practice relies on extensive mortality experience based on non-parametric and semi-parametric models. Early on mortality modeling had focused on simplified parametric models that depend on some parameters and are known as <em>Analytic Mortality Laws</em>; such models assume analytic survival or mortality functions, which have their own merits though the lack of sophistication is easily visible. From the pedagogical perspective, some of these analytical laws of mortality may be good toy models that provide simple approximations of reality, which is the essence of any model. These models are typically relatively simple and fall in the category of “age-only” models from Section <a href="modeling-lifetimes.html#S:ModelOnlyAge">2.2.3</a>, so that a suitable interpretatuion is that the model describes the mortality of a specific population.</p>
<div id="de-moivre-and-constant-force-models" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> De Moivre and Constant Force Models</h3>
<p>Starting with the simplest approach, it is clear that any survival function takes the value 1 and 0 at the left and right end point of its distribution. Thus, if a newborn is assumed to have a known limited age <span class="math inline">\(\omega\)</span>, then <span class="math inline">\(S_0(0)=1\)</span> and <span class="math inline">\(S_0(\omega)=0\)</span>. One simple analytical example is the <em>De Moivre Mortality Law</em> which assumes a linear dependence of <span class="math inline">\(S_0\)</span>, i.e.
<span class="math display">\[
S_0(x) = 1 - \frac{x}{\omega}\quad\text{for all}\quad 0 \leq x \leq \omega.
\]</span>
Now, the force of mortality becomes
<span class="math display">\[
\mu_x= \frac{-S_0&#39;(x)}{S_0(x)} = \frac{\frac{1}{\omega}}{1 - \frac{x}{\omega}} = \frac{1}{\omega - x}\quad\text{for all}\quad 0 \leq x &lt; \omega.
\]</span>
It should be noted that if the lifetime distribution of a newborn follows <em>De Moivre Mortality Law</em>, then once the newborn reaches a certain age <span class="math inline">\(x\)</span>, the new lifetime distribution also follows <em>De Moivre</em>, with a parameterization replacing <span class="math inline">\(\omega\)</span> with <span class="math inline">\(\omega -x\)</span>.</p>
<p>A generalization of the above analytical mortality law is known as the <em>generalized De Moivre Law</em>, and corresponds to a survival function with the following parametrization
<span class="math display">\[
S_0(x) = \left(1 - \frac{x}{\omega}\right)^{\alpha}\quad\text{for all}\quad 0\leq x \leq \omega,
\]</span>
where the positive shape parameter <span class="math inline">\(\alpha\)</span> decides how far the survival function departs from the linear dependence. Then, its force of mortality becomes
<span class="math display">\[
\mu_x = \frac{\alpha/\omega\,(1-x/\omega)^{\alpha-1}}{(1-x/\omega)^{\alpha}} = \frac{\alpha}{\omega - x}\quad\text{for all}\quad 0\leq x \leq \omega.
\]</span>
Future lifetime distribution is also preserved with <em>generalized De Moivre Law</em>. For a newborn with mortality that follows this law, the future lifetime distribution, upon reaching a particular age <span class="math inline">\(x\)</span>, also follows <em>generalized De Moivre Law</em>. The <span class="math inline">\(\alpha\)</span> parameter is preserved but as in <em>De Moivre Mortality Law</em>, parameter <span class="math inline">\(\omega\)</span> is replaced with <span class="math inline">\(\omega -x\)</span>.</p>
<p>As indicated, a different approach is to impose a particular structure to the force of mortality. The simplest example is to consider a constant force of mortality model, i.e. <span class="math inline">\(\mu_t=\mu\)</span> for all <span class="math inline">\(t&gt;0\)</span>, which corresponds to an Exponentially distributed lifetime <span class="math inline">\(T_x\)</span> with
<span class="math display">\[
S_0(x) = e^{-\mu\,x}\quad\text{for all}\quad x\ge 0.
\]</span>
Note that this <em>constant force mortality model</em> does not square with the idea the mortality is increasing over time, which makes it a poor candidate for modeling human mortality – although it may be a suitable candidate of modeling the death of certain populations or failure of non-organisms. For the <em>De Moivre</em> and <em>generalized De Moivre</em> mortality laws, we do observe an increasing force of mortality, although the hyperbolic relationship also does not match typical patterns of human mortality.</p>
</div>
<div id="gompertz-and-makeham-laws" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Gompertz and Makeham Laws</h3>
<p>In contrast, a candidate that is able to better depict human mortality is provided by the <em>Gompertz Mortality Law</em> and is given as follows:
<span class="math display">\[
\mu_x = B\cdot c^x \quad\text{for all}\quad x\ge 0\quad\text{with}\quad B&gt;0,\,c&gt;1.
\]</span>
Its survival function becomes</p>
<p><span class="math display">\[
S_0(x) =\exp\left\{-\int_0^x \mu_t\;dt \right\}=\exp\left\{-\int_0^x B\cdot c^t\;dt \right\}=\exp\left\{-\frac{B \cdot c^t}{\log c}\Big\lvert_{t=0}^{t=x} \right\} =\exp\left\{ - \frac{B}{\log(c)} (c^x - 1)\right\}\quad\text{for all}\quad x\ge 0. 
\]</span>
A three parameter version of the <em>Gompertz Mortality Law</em> was proposed by Makeham, where an age-independent term is added and captures the external causes of death, i.e.</p>
<p><span class="math display">\[
\mu_x = A + B\cdot c^x\quad\text{for all}\quad x\ge 0\quad\text{with}\quad B&gt;0,\,A+B\geq 0,\,c&gt;1,
\]</span>
and is known as the <em>Gompertz-Makeham Mortality Law</em> or <em>Makeham Mortality Law</em>. Then, its survival function could be derived as follows:</p>
<p><span class="math display">\[\begin{eqnarray*}
S_0(x) &amp;=&amp;  \exp\left\{-\int_0^x \mu_t\,dt\right\}\\
&amp;=&amp; \exp\left\{-\int_0^x A\,dt\right\}\,\exp\left\{-\int_0^x B\cdot c^t\,dt\right\}\\
&amp;= &amp; \exp\{-A x\}\,\exp\left\{ - \frac{B}{\log(c)} (c^x - 1)\right\} \\
&amp;=&amp; \exp\left\{ - Ax - \frac{B}{\log(c)} (c^x - 1)\right\}.
\end{eqnarray*}\]</span></p>
</div>
<div id="makeham-law-based-on-life-expectancies-data" class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Makeham Law based on Life Expectancies Data</h3>
<p>The Gompertz-Makeham mortality model is sufficiently rich to represent typical patterns in human mortality. To have workable models for applications for the remainder of the book, we fit the model to our life expectancy data from Section <a href="modeling-lifetimes.html#S:DataLifeExp">2.1.1</a>.</p>
<p>Formally, we interpret the given life expectancies as (generalized) <em>moments</em> of our model, and then rely on the (generalized) <em>methods of moments</em> (GMM) to pin down the model parameters. We omit statistical details behind GMM (see e.g. <a href="https://www.ksh.hu/statszemle_archive/2012/2012_K16/2012_K16_150.pdf">this introduction</a> for more details), but intuitively we determine the model parameters that produce model moments that are closest, in the least-squares sense, to the given data. We can then appraise the model fit by analyzing how close the fitted model moments are to the actual moments.</p>
<p>In doing so, we <code>R</code> define functions that determine the survival functions and the life expectancy at a given age <span class="math inline">\(x\)</span>, where we evaluate the associated integral numerically. We then run a numerical optimization procedure that determines the parameters that best approximate the empirical moments.</p>
<h5 style="text-align: center;">
<a id="displayCode.GompertzEst_code" href="javascript:togglecode('toggleCode.GompertzEst_code','displayCode.GompertzEst_code');"><i><strong>R Code For Estimating the Gompert model</strong></i></a>
</h5>
<div id="toggleCode.GompertzEst_code" style="display: none">
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="modeling-lifetimes.html#cb20-1" aria-hidden="true" tabindex="-1"></a>S_0 <span class="ot">&lt;-</span> <span class="cf">function</span>(x,A,B,c) { <span class="fu">exp</span>(<span class="sc">-</span> A <span class="sc">*</span> x <span class="sc">-</span> B <span class="sc">*</span> (<span class="fu">exp</span>(c<span class="sc">*</span>x) <span class="sc">-</span> <span class="dv">1</span>)<span class="sc">/</span> c) }</span>
<span id="cb20-2"><a href="modeling-lifetimes.html#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="modeling-lifetimes.html#cb20-3" aria-hidden="true" tabindex="-1"></a>le <span class="ot">&lt;-</span> <span class="cf">function</span>(age,A,B,c){</span>
<span id="cb20-4"><a href="modeling-lifetimes.html#cb20-4" aria-hidden="true" tabindex="-1"></a>  Sfixed <span class="ot">&lt;-</span> <span class="cf">function</span>(x){ <span class="fu">S_0</span>(x<span class="sc">+</span>age,A,B,c)<span class="sc">/</span><span class="fu">S_0</span>(age,A,B,c)}</span>
<span id="cb20-5"><a href="modeling-lifetimes.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">integrate</span>(Sfixed,<span class="at">lower =</span> <span class="dv">0</span>, <span class="at">upper =</span> (<span class="dv">120</span><span class="sc">-</span>age))<span class="sc">$</span>value</span>
<span id="cb20-6"><a href="modeling-lifetimes.html#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb20-7"><a href="modeling-lifetimes.html#cb20-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="modeling-lifetimes.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We just use the resulting parameters here and do not carry out the following routine.</span></span>
<span id="cb21-2"><a href="modeling-lifetimes.html#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="modeling-lifetimes.html#cb21-3" aria-hidden="true" tabindex="-1"></a>tomin <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb21-4"><a href="modeling-lifetimes.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb21-5"><a href="modeling-lifetimes.html#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb21-6"><a href="modeling-lifetimes.html#cb21-6" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> res <span class="sc">+</span> (us_les[i,<span class="dv">4</span>] <span class="sc">-</span> <span class="fu">le</span>((i<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">20</span>,<span class="fl">0.0001</span><span class="sc">*</span>(<span class="dv">1</span><span class="sc">+</span>x[<span class="dv">1</span>]<span class="sc">/</span><span class="dv">100</span>),<span class="fl">0.000007</span><span class="sc">*</span>(<span class="dv">1</span><span class="sc">+</span>x[<span class="dv">2</span>]<span class="sc">/</span><span class="dv">100</span>),<span class="fl">0.11</span><span class="sc">*</span>(<span class="dv">1</span><span class="sc">+</span>x[<span class="dv">3</span>]<span class="sc">/</span><span class="dv">100</span>)))<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb21-7"><a href="modeling-lifetimes.html#cb21-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-8"><a href="modeling-lifetimes.html#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb21-9"><a href="modeling-lifetimes.html#cb21-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-10"><a href="modeling-lifetimes.html#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pracma)</span>
<span id="cb21-11"><a href="modeling-lifetimes.html#cb21-11" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">fminsearch</span>(tomin,<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb21-12"><a href="modeling-lifetimes.html#cb21-12" aria-hidden="true" tabindex="-1"></a>A_opt_fem <span class="ot">&lt;-</span> A<span class="sc">*</span>(<span class="dv">1</span><span class="sc">+</span>res<span class="sc">$</span>xmin[<span class="dv">1</span>]<span class="sc">/</span><span class="dv">100</span>)</span>
<span id="cb21-13"><a href="modeling-lifetimes.html#cb21-13" aria-hidden="true" tabindex="-1"></a>B_opt_fem <span class="ot">&lt;-</span> B<span class="sc">*</span>(<span class="dv">1</span><span class="sc">+</span>res<span class="sc">$</span>xmin[<span class="dv">2</span>]<span class="sc">/</span><span class="dv">100</span>)</span>
<span id="cb21-14"><a href="modeling-lifetimes.html#cb21-14" aria-hidden="true" tabindex="-1"></a>c_opt_fem <span class="ot">&lt;-</span> c<span class="sc">*</span>(<span class="dv">1</span><span class="sc">+</span>res<span class="sc">$</span>xmin[<span class="dv">3</span>]<span class="sc">/</span><span class="dv">100</span>)</span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="modeling-lifetimes.html#cb22-1" aria-hidden="true" tabindex="-1"></a>Sex <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Female&quot;</span>,<span class="st">&quot;Male&quot;</span>)</span>
<span id="cb22-2"><a href="modeling-lifetimes.html#cb22-2" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.0005385767</span>,<span class="fl">0.0008564071</span>)</span>
<span id="cb22-3"><a href="modeling-lifetimes.html#cb22-3" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.119213e-05</span>,<span class="fl">3.544491e-05</span>)</span>
<span id="cb22-4"><a href="modeling-lifetimes.html#cb22-4" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.1031558</span>,<span class="fl">0.09276854</span>)</span>
<span id="cb22-5"><a href="modeling-lifetimes.html#cb22-5" aria-hidden="true" tabindex="-1"></a>MakehamUS <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Sex,A,B,c)</span></code></pre></div>
</div>
<p>Here are the resulting parameters (note that, slightly abusing notation, we write <span class="math inline">\(c\)</span> for <span class="math inline">\(\log\{c\}\)</span> from the previous section):</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="modeling-lifetimes.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(MakehamUS, <span class="at">digits =</span> <span class="dv">7</span>, <span class="at">format.args =</span> <span class="fu">list</span>(<span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Sex</th>
<th align="right">A</th>
<th align="right">B</th>
<th align="right">c</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Female</td>
<td align="right">0.0005386</td>
<td align="right">0.0000112</td>
<td align="right">0.1031558</td>
</tr>
<tr class="even">
<td align="left">Male</td>
<td align="right">0.0008564</td>
<td align="right">0.0000354</td>
<td align="right">0.0927685</td>
</tr>
</tbody>
</table>
<p>which match the U.S. life expectancies quite well. For instance, for the female life expectancies we obtain:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="modeling-lifetimes.html#cb24-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> us_les[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>)]</span>
<span id="cb24-2"><a href="modeling-lifetimes.html#cb24-2" aria-hidden="true" tabindex="-1"></a>tmp<span class="sc">$</span>fitted <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">5</span>)</span>
<span id="cb24-3"><a href="modeling-lifetimes.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb24-4"><a href="modeling-lifetimes.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  tmp[i,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">le</span>((i<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">20</span>,MakehamUS<span class="sc">$</span>A[<span class="dv">1</span>],MakehamUS<span class="sc">$</span>B[<span class="dv">1</span>],MakehamUS<span class="sc">$</span>c[<span class="dv">1</span>])</span>
<span id="cb24-5"><a href="modeling-lifetimes.html#cb24-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-6"><a href="modeling-lifetimes.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tmp, <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format.args =</span> <span class="fu">list</span>(<span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Age</th>
<th align="right">Female</th>
<th align="right">fitted</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">81.1</td>
<td align="right">81.05</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="right">61.8</td>
<td align="right">61.87</td>
</tr>
<tr class="odd">
<td align="right">40</td>
<td align="right">42.6</td>
<td align="right">42.72</td>
</tr>
<tr class="even">
<td align="right">60</td>
<td align="right">24.7</td>
<td align="right">24.49</td>
</tr>
<tr class="odd">
<td align="right">80</td>
<td align="right">9.8</td>
<td align="right">9.90</td>
</tr>
</tbody>
</table>
<p>and the following resulting survival function:</p>
<h5 style="text-align: center;">
<a id="displayCode.SurvPlotFemUSDataFigs" href="javascript:togglecode('toggleCode.SurvPlotFemUSDataFigs','displayCode.SurvPlotFemUSDataFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.SurvPlotFemUSDataFigs" style="display: none">
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="modeling-lifetimes.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb25-2"><a href="modeling-lifetimes.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(MakehamUS<span class="sc">$</span>A[<span class="dv">1</span>] <span class="sc">+</span> MakehamUS<span class="sc">$</span>B[<span class="dv">1</span>] <span class="sc">*</span> <span class="fu">exp</span>(MakehamUS<span class="sc">$</span>c[<span class="dv">1</span>]<span class="sc">*</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">120</span>)), <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">3</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">main =</span> <span class="st">&quot;Gompertz-Makeham Force of Mortality&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;mu&quot;</span>)</span>
<span id="cb25-3"><a href="modeling-lifetimes.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">S_0</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">120</span>,MakehamUS<span class="sc">$</span>A[<span class="dv">1</span>],MakehamUS<span class="sc">$</span>B[<span class="dv">1</span>],MakehamUS<span class="sc">$</span>c[<span class="dv">1</span>]), <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">3</span>, <span class="at">col =</span> <span class="st">&quot;green&quot;</span>, <span class="at">main =</span> <span class="st">&quot;Gompertz-Makeham Survival Curve&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;S_0&quot;</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:SurvPlotFemUSDataFigsa"></span>
<img src="LifeCon_files/figure-html/SurvPlotFemUSDataFigsa-1.png" alt="Fitted Force of Mortality and Survival Curve" width="960" />
<p class="caption">
Figure 2.10: <strong>Fitted Force of Mortality and Survival Curve</strong>
</p>
</div>
</div>
</div>
<div id="S:LifeTab" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Life Tables and their Functions</h2>
<p>As we illustrated in the previous section, the Gompertz-Makeham model is able to describe basic mortality patterns quite well – and particularly match life expectancies across ages. However, the resulting force of mortality that is described by three parameters is highly regular. In particular, the likelihood of dying is monotonically increasing over the entire age domain. While this is true across many ages, real-world human mortality often shows a few deviations from these regular patterns. For instance, we often observe a so-called “young adult mortality hump” arising from risky behavior, involvement in wars, etc.</p>
<p>While there exist mortality laws that can account for this and other features, resulting functions quickly become complex and exhibit a low degree of tractability. Hence, a typical approach is to directly specify the survival function <span class="math inline">\(S_0(\cdot)\)</span> of the lifetime random variable of a newborn within the “age-only” model and use it for actuarial calculations. Such an approach is often characterized as <em>non-parametric</em> since the survival function is not given as a function of a few given parameters. We will discuss more advanced approaches to estimating non-parametric survival functions from mortality data in Section <a href="modeling-lifetimes.html#S:NonParamSurv">2.5</a>.</p>
<p>A rather simple approach in this direction is to construct so-called <em>life tables</em>. As we discuss in the first part of this chapter, a life-table is simply an annually-discretized version of the survival function <span class="math inline">\(S_0(\cdot)\)</span>. A substantial advantage is that it is easy to generate such life tables from data in the context of population count data that we encountered in Section <a href="modeling-lifetimes.html#S:HMDData">2.1.2</a>, as we will see and do in the second section <a href="modeling-lifetimes.html#S:LifeTabEst">2.4.2</a>. The following sections <a href="modeling-lifetimes.html#S:LifeTabFrac">2.4.4</a> and <a href="modeling-lifetimes.html#S:LifeTabRec">2.4.3</a> the discuss some in more detail the theoretical underpinnings of life tables based on the so-called <em>curtate</em> lifetime and how to drive quantities for <em>fractional ages</em> based on the annually-discretized representation. Finally, the concluding sections <a href="#S:LifeTabSelect"><strong>??</strong></a> and <a href="modeling-lifetimes.html#S:LifeTabMImpr">2.4.5</a> discuss more advanced life tables that include underwriting (selection) effects and mortality improvements, respectively.</p>
<div id="S:LifeTabBasics" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Life Table Basics</h3>
<p>Consider a (large) population of <span class="math inline">\(l_0\)</span> homogeneous newborns. Then, if survival in the population follows (exactly) the survival function <span class="math inline">\(S_0(\cdot)\)</span>, at age <span class="math inline">\(x\)</span> there are
<span class="math display">\[
l_0 \times S_0(x) = l_0 \times {_xp_0} = l_0 \times P(T_0 \geq x) = l_x
\]</span>
individuals left. Of course, this immediately implies <span class="math inline">\({_xp_0} = \frac{l_x}{l_0}\)</span> and, similarly, we can derive <span class="math inline">\(k\)</span>-year the survival probability for an <span class="math inline">\(x\)</span>-year old as:
<span class="math display">\[
{_kp_x} = \frac{S_0(x+k)}{S_0(x)} = \frac{l_0 \times S_0(x+k)}{l_0 \times S_0(x)} = \frac{l_{x+k}}{l_x},\,x,k=0,1,2,...
\]</span>
In particular, the set of <span class="math inline">\(l_x,\,x=0,1,2,...,\)</span> lets us compute relevant probabilities for integer choices, which is not surprising because they are effectively providing an annually-discredited version of the survival function <span class="math inline">\(S_0(\cdot)\)</span> in the age-only model. Evidently the so-called <em>radix</em> <span class="math inline">\(l_0\)</span> is immaterial, though it is typically chosen as a large number in line with the population interpretation, so that it is not necessary to display digits. A <em>life table</em> provides exactly the set of <span class="math inline">\(l_x,\,x=0,1,2,...,\)</span> typically compiled in a tabular manner starting at some initial age (maybe zero for a population table) up to some <em>termimal age</em> <span class="math inline">\(\omega\)</span> after which all individuals are assumed die, i.e., <span class="math inline">\(l_{\omega + 1} = 0.\)</span></p>
<p>From the above equation, we immediately obtain:
<span class="math display">\[
{_kq_x} = 1 - {_kp_x} = \frac{l_x - l_{x+k}}{l_x} = \frac{_kd_x}{l_x},\,x,k=0,1,2,...
\]</span>
where <span class="math inline">\(_kd_x\)</span> denotes the <em>deaths</em> between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+k\)</span>. In particular, we have:
<span class="math display">\[
q_x = 1 - p_x = \frac{d_x}{l_x} \Leftrightarrow l_x - l_x\times p_x = d_x \Leftrightarrow l_{x+1} = l_x\times p_x = l_x - d_x,\,x=0,1,2,...
\]</span></p>
<p>This suggests one way of creating a life table: We could observe a (large) <em>cohort</em> of <span class="math inline">\(l_0\)</span> individuals initially, count the annual deaths <span class="math inline">\(d_0,\)</span> <span class="math inline">\(d_1,\)</span> etc., and tabulate the resulting survivors. The result would be a so-called <em>cohort life table</em> as it reflects survivorship of the observed cohort over time. However, this approach is rather unpractical: we would have to wait until the last person in the cohort has deceased, and by then compiling a life table for an extinct cohort is likely of limited use.</p>
<p>The more common approach is to compile a so-called <em>period life table</em>. Here instead of following a particular cohort, we consider a given population over a certain period, e.g. a calendar year. We then use observed population mortality rates <span class="math inline">\(q_x\)</span> in the time period to determine <span class="math inline">\(l_x\)</span> for all ages according to relationship above. We explore this idea using the population mortality data we introduced in Section <a href="modeling-lifetimes.html#S:HMDData">2.1.2</a>.</p>
</div>
<div id="S:LifeTabEst" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Life Table based on U.S. Population Data</h3>
<p>In section <a href="modeling-lifetimes.html#S:HMDData">2.1.2</a> we considered exposures and deaths of the U.S. population over time, and in particular in Figure <a href="modeling-lifetimes.html#fig:AllDRChapHMDUSFigsa">2.3</a> we plotted mortality rates—defined as the fraction of deaths and exposures—referencing the similarity to the Gompertz-Makeham law from Figure <a href="modeling-lifetimes.html#fig:SurvPlotFemUSDataFigsa">2.10</a>. It may be tempting to think about this mortality rates as <span class="math inline">\(q_x\)</span> and use it to compile a life table. However, while the two quantities are related, there is a subtle difference: the mortality probability <span class="math inline">\(q_x = d_x/l_x\)</span> considers deaths during age <span class="math inline">\(x\)</span> relative to the population of <span class="math inline">\(x\)</span> year olds.</p>
<p>In contrast, the <em>central death rate</em> is defined as the number of deaths each year that have characteristics <span class="math inline">\(\bf{x}\)</span> at the moment of death in the relevant observation period, divided by the exposures with the same characteristics <span class="math inline">\(\bf{x}\)</span> over the same period, and is denoted as <span class="math inline">\(m_\bf{x}\)</span>—where as usual we write <span class="math inline">\(m_{x}\)</span> in the age-only model. Hence, in particular the denominator corresponds to the average size of the population at risk, not the population at risk at the outset.</p>
<p>To connect <span class="math inline">\(q_x\)</span> and <span class="math inline">\(m_x\)</span>, we need to make an assumption about the exposure. One straightforward approach is to assume that the exposures correspond to the arithmetic average of the population size at age <span class="math inline">\(x\)</span> and the population size at age <span class="math inline">\(x+1\)</span>, though different approaches are possible as we will see in Section <a href="modeling-lifetimes.html#S:LifeTabFrac">2.4.4</a>:
<span class="math display">\[
m_x \approx \frac{d_x}{0.5\,l_x+ 0.5\,l_{x+1}} = \frac{q_x}{1-0.5\,q_x} \Longrightarrow q_x = \frac{2\,m_x}{2+m_x}.
\]</span></p>
<p>Let us use this relationship to construct a mortality life table using the 2010-2014 U.S.Females and Males data:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="modeling-lifetimes.html#cb26-1" aria-hidden="true" tabindex="-1"></a>us_mx <span class="ot">&lt;-</span> us_deaths </span>
<span id="cb26-2"><a href="modeling-lifetimes.html#cb26-2" aria-hidden="true" tabindex="-1"></a>us_mx[,<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>] <span class="ot">&lt;-</span> us_deaths[,<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>] <span class="sc">/</span> us_exp[,<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb26-3"><a href="modeling-lifetimes.html#cb26-3" aria-hidden="true" tabindex="-1"></a>us_mx_fem_2014 <span class="ot">&lt;-</span> us_mx[us_mx<span class="sc">$</span>Year_start <span class="sc">==</span> <span class="dv">2010</span>,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">6</span>)]</span>
<span id="cb26-4"><a href="modeling-lifetimes.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(us_mx_fem_2014)[<span class="fu">colnames</span>(us_mx_fem_2014)<span class="sc">==</span><span class="st">&quot;Female&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;mx US Females&quot;</span></span>
<span id="cb26-5"><a href="modeling-lifetimes.html#cb26-5" aria-hidden="true" tabindex="-1"></a>us_mx_fem_2014<span class="sc">$</span>qx <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> us_mx_fem_2014<span class="sc">$</span>mx <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">+</span> us_mx_fem_2014<span class="sc">$</span>mx)</span>
<span id="cb26-6"><a href="modeling-lifetimes.html#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(us_mx_fem_2014)[<span class="fu">colnames</span>(us_mx_fem_2014)<span class="sc">==</span><span class="st">&quot;qx&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;qx US Females&quot;</span></span>
<span id="cb26-7"><a href="modeling-lifetimes.html#cb26-7" aria-hidden="true" tabindex="-1"></a>tmp_head_us_mx_fem_2014 <span class="ot">&lt;-</span> <span class="fu">head</span>(us_mx_fem_2014); <span class="fu">rownames</span>(tmp_head_us_mx_fem_2014) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb26-8"><a href="modeling-lifetimes.html#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(tmp_head_us_mx_fem_2014), <span class="at">align =</span> <span class="st">&quot;ccr&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="center">Year_start</th>
<th align="center">Age</th>
<th align="right">mx US Females</th>
<th align="center">qx US Females</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">2010</td>
<td align="center">0</td>
<td align="right">0.005461737</td>
<td align="center">0.005446862</td>
</tr>
<tr class="even">
<td align="center">2010</td>
<td align="center">1</td>
<td align="right">0.000379927</td>
<td align="center">0.000379855</td>
</tr>
<tr class="odd">
<td align="center">2010</td>
<td align="center">2</td>
<td align="right">0.000224890</td>
<td align="center">0.000224865</td>
</tr>
<tr class="even">
<td align="center">2010</td>
<td align="center">3</td>
<td align="right">0.000169394</td>
<td align="center">0.000169380</td>
</tr>
<tr class="odd">
<td align="center">2010</td>
<td align="center">4</td>
<td align="right">0.000138322</td>
<td align="center">0.000138313</td>
</tr>
<tr class="even">
<td align="center">2010</td>
<td align="center">5</td>
<td align="right">0.000119244</td>
<td align="center">0.000119237</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="modeling-lifetimes.html#cb27-1" aria-hidden="true" tabindex="-1"></a>us_mx_mal_2014 <span class="ot">&lt;-</span> us_mx[us_mx<span class="sc">$</span>Year_start <span class="sc">==</span> <span class="dv">2010</span>,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>)]</span>
<span id="cb27-2"><a href="modeling-lifetimes.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(us_mx_mal_2014)[<span class="fu">colnames</span>(us_mx_mal_2014)<span class="sc">==</span><span class="st">&quot;Male&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;mx US Males&quot;</span></span>
<span id="cb27-3"><a href="modeling-lifetimes.html#cb27-3" aria-hidden="true" tabindex="-1"></a>us_mx_mal_2014<span class="sc">$</span>qx <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> us_mx_mal_2014<span class="sc">$</span>mx <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">+</span> us_mx_mal_2014<span class="sc">$</span>mx)</span>
<span id="cb27-4"><a href="modeling-lifetimes.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(us_mx_mal_2014)[<span class="fu">colnames</span>(us_mx_mal_2014)<span class="sc">==</span><span class="st">&quot;qx&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;qx US Males&quot;</span></span>
<span id="cb27-5"><a href="modeling-lifetimes.html#cb27-5" aria-hidden="true" tabindex="-1"></a>tmp_head_us_mx_mal_2014 <span class="ot">&lt;-</span> <span class="fu">head</span>(us_mx_mal_2014); <span class="fu">rownames</span>(tmp_head_us_mx_mal_2014) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb27-6"><a href="modeling-lifetimes.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(tmp_head_us_mx_mal_2014), <span class="at">align =</span> <span class="st">&quot;ccr&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="center">Year_start</th>
<th align="center">Age</th>
<th align="right">mx US Males</th>
<th align="center">qx US Males</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">2010</td>
<td align="center">0</td>
<td align="right">0.006554279</td>
<td align="center">0.006532870</td>
</tr>
<tr class="even">
<td align="center">2010</td>
<td align="center">1</td>
<td align="right">0.000441664</td>
<td align="center">0.000441567</td>
</tr>
<tr class="odd">
<td align="center">2010</td>
<td align="center">2</td>
<td align="right">0.000298869</td>
<td align="center">0.000298824</td>
</tr>
<tr class="even">
<td align="center">2010</td>
<td align="center">3</td>
<td align="right">0.000225097</td>
<td align="center">0.000225072</td>
</tr>
<tr class="odd">
<td align="center">2010</td>
<td align="center">4</td>
<td align="right">0.000184733</td>
<td align="center">0.000184715</td>
</tr>
<tr class="even">
<td align="center">2010</td>
<td align="center">5</td>
<td align="right">0.000145992</td>
<td align="center">0.000145981</td>
</tr>
</tbody>
</table>
<p>The death probability curves for the U.S. Females and Males data are depicted in both original and logarithmic scales, and displayed as Figure <a href="#fig:QxUSDataFigsa"><strong>??</strong></a>.</p>
<h5 style="text-align: center;">
<a id="displayCode.QxUSFemDataFigs" href="javascript:togglecode('toggleCode.QxUSFemDataFigs','displayCode.QxUSFemDataFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.QxUSFemDataFigs" style="display: none">
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="modeling-lifetimes.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb28-2"><a href="modeling-lifetimes.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(us_mx_fem_2014<span class="sc">$</span>qx,<span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">main=</span><span class="st">&quot;Original scale Female&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;q_x&quot;</span>,<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">1.0</span>))</span>
<span id="cb28-3"><a href="modeling-lifetimes.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(us_mx_fem_2014<span class="sc">$</span>mx,<span class="at">col=</span><span class="st">&quot;red&quot;</span>)</span>
<span id="cb28-4"><a href="modeling-lifetimes.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">log</span>(us_mx_fem_2014<span class="sc">$</span>qx, <span class="at">base =</span> <span class="dv">10</span>),<span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">main=</span><span class="st">&quot;Log scale Female&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;q_x&quot;</span>)</span>
<span id="cb28-5"><a href="modeling-lifetimes.html#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(us_mx_mal_2014<span class="sc">$</span>qx,<span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">main=</span><span class="st">&quot;Original scale Male&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;q_x&quot;</span>,<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">1.0</span>))</span>
<span id="cb28-6"><a href="modeling-lifetimes.html#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(us_mx_mal_2014<span class="sc">$</span>mx,<span class="at">col=</span><span class="st">&quot;red&quot;</span>)</span>
<span id="cb28-7"><a href="modeling-lifetimes.html#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">log</span>(us_mx_mal_2014<span class="sc">$</span>qx, <span class="at">base =</span> <span class="dv">10</span>),<span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">main=</span><span class="st">&quot;Log scale Male&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;q_x&quot;</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:QxUSFemDataFigsa"></span>
<img src="LifeCon_files/figure-html/QxUSFemDataFigsa-1.png" alt="One year death probability curve (in blue) and central death rate (in red) for the 2010-2014 U.S. data across all ages" width="768" />
<p class="caption">
Figure 2.11: <strong>One year death probability curve (in blue) and central death rate (in red) for the 2010-2014 U.S. data across all ages</strong>
</p>
</div>
<p>As we can see, <span class="math inline">\(q_x\)</span> and <span class="math inline">\(m_x\)</span> are similar with the exception of the later years. As expected, the log scale plots are more informative in the sense that the log scale reveals the marginal changes over various ages, and we now combined the two log scaled curves into Figure <a href="modeling-lifetimes.html#fig:QxUSFemMalDataFigsa">2.12</a>.</p>
<h5 style="text-align: center;">
<a id="displayCode.QxUSFemMalDataFigs" href="javascript:togglecode('toggleCode.QxUSFemMalDataFigs','displayCode.QxUSFemMalDataFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.QxUSFemMalDataFigs" style="display: none">
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="modeling-lifetimes.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb29-2"><a href="modeling-lifetimes.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">log</span>(us_mx_fem_2014<span class="sc">$</span>qx, <span class="at">base =</span> <span class="dv">10</span>), <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">main=</span><span class="st">&quot;Log scale&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;q_x&quot;</span>)</span>
<span id="cb29-3"><a href="modeling-lifetimes.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">log</span>(us_mx_mal_2014<span class="sc">$</span>qx, <span class="at">base =</span> <span class="dv">10</span>), <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:QxUSFemMalDataFigsa"></span>
<img src="LifeCon_files/figure-html/QxUSFemMalDataFigsa-1.png" alt="One year death probability curve for the 2010-2014 U.S. Females (in blue) and Males (in red) data across all ages" width="576" />
<p class="caption">
Figure 2.12: <strong>One year death probability curve for the 2010-2014 U.S. Females (in blue) and Males (in red) data across all ages</strong>
</p>
</div>
<p>Figure <a href="modeling-lifetimes.html#fig:QxUSFemMalDataFigsa">2.12</a> shows the usual higher mortality rates for males than for females, but also extremely pronounced differences at ages 16 to 40 that could be explained by social factors that are specific to U.S. Males at post adolescence ages. As indicated before, these intricacies are not accounted for by the Gompertz-Makeham and other simple parametric models. Moreover, significant differences at ages 50 to 70 are also observed, and are due to health related factors that males around the world tend to be exposed earlier than females.</p>
<p>We are now able to construct a <em>period life table</em> based on the U.S. mortality data. Using the relationships from before:
<span class="math display">\[
l_{x+1}=l_x\cdot p_x=l_x\big(1-q_x\big)\quad\text{for all integers}\quad x.
\]</span>
and fixing <span class="math inline">\(l_0 = 1,000,000\)</span>, we generate <span class="math inline">\(l_x\)</span>, <span class="math inline">\(x=0,1,2,...\)</span>, for the male and female life table:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="modeling-lifetimes.html#cb30-1" aria-hidden="true" tabindex="-1"></a>lf <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">length</span>(us_mx_fem_2014<span class="sc">$</span>mx))</span>
<span id="cb30-2"><a href="modeling-lifetimes.html#cb30-2" aria-hidden="true" tabindex="-1"></a>lf[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1000000</span></span>
<span id="cb30-3"><a href="modeling-lifetimes.html#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">111</span>){</span>
<span id="cb30-4"><a href="modeling-lifetimes.html#cb30-4" aria-hidden="true" tabindex="-1"></a>  lf[i] <span class="ot">=</span> lf[i<span class="dv">-1</span>] <span class="sc">*</span> (<span class="dv">1</span><span class="sc">-</span>us_mx_fem_2014[i<span class="dv">-1</span>,<span class="dv">4</span>]) </span>
<span id="cb30-5"><a href="modeling-lifetimes.html#cb30-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-6"><a href="modeling-lifetimes.html#cb30-6" aria-hidden="true" tabindex="-1"></a>us_mx_fem_2014<span class="sc">$</span>lf <span class="ot">&lt;-</span> lf</span>
<span id="cb30-7"><a href="modeling-lifetimes.html#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="modeling-lifetimes.html#cb30-8" aria-hidden="true" tabindex="-1"></a>lm <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">length</span>(us_mx_mal_2014<span class="sc">$</span>mx))</span>
<span id="cb30-9"><a href="modeling-lifetimes.html#cb30-9" aria-hidden="true" tabindex="-1"></a>lm[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1000000</span></span>
<span id="cb30-10"><a href="modeling-lifetimes.html#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">111</span>){</span>
<span id="cb30-11"><a href="modeling-lifetimes.html#cb30-11" aria-hidden="true" tabindex="-1"></a>  lm[i] <span class="ot">=</span> lm[i<span class="dv">-1</span>] <span class="sc">*</span> (<span class="dv">1</span><span class="sc">-</span>us_mx_mal_2014[i<span class="dv">-1</span>,<span class="dv">4</span>])</span>
<span id="cb30-12"><a href="modeling-lifetimes.html#cb30-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-13"><a href="modeling-lifetimes.html#cb30-13" aria-hidden="true" tabindex="-1"></a>us_mx_mal_2014<span class="sc">$</span>lm <span class="ot">&lt;-</span> lm</span></code></pre></div>
<p>Resulting in, for females:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="modeling-lifetimes.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb31-2"><a href="modeling-lifetimes.html#cb31-2" aria-hidden="true" tabindex="-1"></a>tmp_life_table_us_mx_fem_2014 <span class="ot">&lt;-</span> <span class="fu">round</span>(us_mx_fem_2014, <span class="at">digits =</span> <span class="dv">9</span>); </span>
<span id="cb31-3"><a href="modeling-lifetimes.html#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tmp_life_table_us_mx_fem_2014)[<span class="dv">5</span>]<span class="ot">&lt;-</span> <span class="st">&quot;lx US Females&quot;</span></span>
<span id="cb31-4"><a href="modeling-lifetimes.html#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="modeling-lifetimes.html#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(tmp_life_table_us_mx_fem_2014) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb31-6"><a href="modeling-lifetimes.html#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co">#kable(tmp_life_table_us_mx_fem_2014, digits = 9, format.args = list(big.mark = &quot;,&quot;), align = &quot;ccrrr&quot;)</span></span>
<span id="cb31-7"><a href="modeling-lifetimes.html#cb31-7" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(tmp_life_table_us_mx_fem_2014)</span></code></pre></div>
<div id="htmlwidget-be9a17d0d234edf757e8" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-be9a17d0d234edf757e8">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111"],[2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110],[0.005461737,0.000379927,0.00022489,0.000169394,0.000138322,0.000119244,0.000105818,9.4484e-005,9.9099e-005,9.4716e-005,9.4384e-005,9.7954e-005,0.000110047,0.000125565,0.000151564,0.000179626,0.000230519,0.000269124,0.000321974,0.000362117,0.000387128,0.00042777,0.000446409,0.000461424,0.000487478,0.000508638,0.00054749,0.000549511,0.000595308,0.000634958,0.000668207,0.00070117,0.000747968,0.000787034,0.000846014,0.000916309,0.000964254,0.00102457,0.001107979,0.001189197,0.00128909,0.001402989,0.001549873,0.001683629,0.001849298,0.002011741,0.002248298,0.002442626,0.002676796,0.002956136,0.003215911,0.003507014,0.003785892,0.004022691,0.004360356,0.004669609,0.005022475,0.005389632,0.00572436,0.006102973,0.006578644,0.007094307,0.007691701,0.008375706,0.009132249,0.009926368,0.01081687,0.011807399,0.013002992,0.014262061,0.015712186,0.017165968,0.018739708,0.020420986,0.022628922,0.025042538,0.027750633,0.030759063,0.034071985,0.037903693,0.042329149,0.047007984,0.052498856,0.058315291,0.065539109,0.073797431,0.082574481,0.093398924,0.105567283,0.119743293,0.136610109,0.152626502,0.171825495,0.191587343,0.21591038,0.239354641,0.265723628,0.292275032,0.321674255,0.346587013,0.376656424,0.409128282,0.443580404,0.477090919,0.504199806,0.544747305,0.566723146,0.557618769,0.636754582,0.659418665,0.593688157],[0.005446862,0.000379855,0.000224865,0.00016938,0.000138313,0.000119237,0.000105813,9.4479e-005,9.9094e-005,9.4711e-005,9.4379e-005,9.7949e-005,0.000110041,0.000125557,0.000151552,0.00017961,0.000230492,0.000269087,0.000321922,0.000362051,0.000387053,0.000427678,0.00044631,0.000461317,0.000487359,0.000508508,0.000547341,0.00054936,0.000595131,0.000634756,0.000667984,0.000700924,0.000747689,0.000786725,0.000845656,0.00091589,0.00096379,0.001024046,0.001107366,0.00118849,0.001288259,0.001402006,0.001548673,0.001682213,0.001847589,0.002009719,0.002245774,0.002439647,0.002673218,0.002951773,0.003210748,0.003500875,0.003778739,0.004014617,0.00435087,0.004658732,0.005009894,0.005375147,0.005708023,0.006084407,0.006557075,0.007069231,0.007662233,0.008340776,0.00909074,0.009877345,0.010758682,0.0117381,0.012919,0.014161078,0.015589712,0.017019887,0.01856575,0.020214586,0.022375752,0.024732852,0.027370854,0.030293168,0.033501257,0.037198709,0.041451838,0.045928481,0.051156039,0.056663127,0.063459567,0.071171301,0.079300387,0.089231845,0.100274433,0.112979051,0.127875562,0.141804909,0.158231401,0.174838884,0.194872845,0.21377109,0.234559613,0.255008695,0.277105416,0.295396685,0.316963294,0.339648399,0.363057752,0.38520259,0.402683368,0.428134695,0.441592734,0.436045259,0.482983579,0.495911888,0.457794555],[1000000,994553.137721992,994175.351921101,993951.797163313,993783.442086466,993645.989035795,993527.509345612,993422.381516466,993328.523528537,993230.09091204,993136.02065306,993042.289072877,992945.021786032,992835.757454532,992711.099757167,992560.652355307,992382.378173604,992153.64148308,991886.665476347,991567.355243761,991208.356865401,990824.706237272,990400.952017931,989958.926309052,989502.241067961,989019.998055543,988517.073188536,987976.017595875,987433.262670788,986845.610194791,986219.203822073,985560.425554246,984869.62265526,984133.246661888,983359.004647724,982527.42099084,981627.534070861,980681.451446062,979677.188819942,978592.328049772,977429.280570189,976170.09805865,974801.501931999,973291.85347251,971654.569415811,969859.350769091,967910.205984786,965736.498741981,963380.442742112,960805.117005773,957969.038282682,954893.240706468,951550.278770653,947954.618691059,944148.944306263,940041.07502318,935661.675910616,930974.110128895,925969.987846595,920684.529910155,915082.710578324,909082.444389515,902655.930712544,895739.570864729,888268.40802987,880193.390931594,871499.417239919,862123.232158451,852003.543020642,840996.509574545,829087.092192328,816161.863002145,802270.880662382,787376.120383456,771459.638447006,754197.648854015,735544.190374959,715411.717631774,693739.630145677,670498.480162598,645556.802346831,618797.286248171,590376.866653269,560175.524643001,528434.227637101,494900.020164968,459677.341801069,423224.750786509,385459.625395296,346807.880064876,307625.854921933,268288.025830352,230243.466859623,193811.720622099,159925.895630629,128760.681297057,101235.370091437,77489.640883019,57729.10872028,41732.060032847,29404.547822608,20084.385489346,13262.756106046,8447.609693999,5193.568558182,3102.204878606,1774.043340531,990.638691069,558.675386822,288.844349242,145.603002719]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Year_start<\/th>\n      <th>Age<\/th>\n      <th>mx US Females<\/th>\n      <th>qx US Females<\/th>\n      <th>lx US Females<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>And for males:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="modeling-lifetimes.html#cb32-1" aria-hidden="true" tabindex="-1"></a>tmp_life_table_us_mx_mal_2014 <span class="ot">&lt;-</span><span class="fu">round</span>(us_mx_mal_2014, <span class="at">digits =</span> <span class="dv">9</span>); </span>
<span id="cb32-2"><a href="modeling-lifetimes.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tmp_life_table_us_mx_mal_2014)[<span class="dv">5</span>]<span class="ot">&lt;-</span> <span class="st">&quot;lx US Males&quot;</span></span>
<span id="cb32-3"><a href="modeling-lifetimes.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(tmp_life_table_us_mx_mal_2014) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb32-4"><a href="modeling-lifetimes.html#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co">#kable(tmp_life_table_us_mx_mal_2014, digits = 9, format.args = list(big.mark = &quot;,&quot;), align = &quot;ccrrr&quot;) </span></span>
<span id="cb32-5"><a href="modeling-lifetimes.html#cb32-5" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(tmp_life_table_us_mx_mal_2014) </span></code></pre></div>
<div id="htmlwidget-e9aa6f533d76eb396b5c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e9aa6f533d76eb396b5c">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111"],[2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010,2010],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110],[0.006554279,0.000441664,0.000298869,0.000225097,0.000184733,0.000145992,0.000126793,0.00012798,0.000123273,0.000124356,0.000116706,0.000133848,0.000148599,0.000184404,0.000240389,0.000319099,0.000465938,0.000615237,0.000871256,0.000999072,0.001080058,0.00121595,0.001281995,0.001286581,0.001321845,0.001326952,0.001364851,0.001360392,0.001391404,0.00143017,0.001444791,0.001499587,0.001504144,0.001556924,0.00161007,0.001643431,0.001707233,0.001778278,0.001856692,0.001987367,0.002120296,0.002276293,0.002453793,0.002622969,0.002861236,0.003149078,0.0035035,0.003891369,0.004254833,0.004669722,0.005147895,0.005603548,0.006102454,0.006632106,0.007159169,0.007858095,0.008507177,0.009117862,0.009847971,0.010525185,0.011292433,0.011996725,0.01285681,0.013639883,0.014602391,0.01552635,0.016854455,0.018142745,0.019870291,0.021486903,0.023501129,0.025437143,0.027755992,0.030132777,0.032863702,0.036117794,0.039656656,0.043706037,0.047988173,0.052732396,0.058697753,0.065032209,0.072275784,0.079376535,0.088448729,0.097701102,0.108732324,0.122047382,0.137403406,0.153935031,0.174568097,0.194076325,0.218380074,0.243922318,0.269914989,0.296257342,0.328711367,0.359188363,0.388741074,0.418796227,0.458783614,0.489988026,0.532025385,0.562926242,0.587131351,0.648959567,0.587329097,0.670120241,0.611534481,0.571037316,0.520304886],[0.00653287,0.000441567,0.000298824,0.000225072,0.000184715,0.000145981,0.000126785,0.000127971,0.000123266,0.000124348,0.0001167,0.000133839,0.000148588,0.000184387,0.00024036,0.000319048,0.000465829,0.000615048,0.000870877,0.000998573,0.001079475,0.001215211,0.001281174,0.001285754,0.001320972,0.001326072,0.001363921,0.001359468,0.001390437,0.001429148,0.001443748,0.001498463,0.001503013,0.001555713,0.001608775,0.001642082,0.001705777,0.001776698,0.00185497,0.001985394,0.002118051,0.002273705,0.002450786,0.002619534,0.002857149,0.003144127,0.003497374,0.003883812,0.0042458,0.004658844,0.005134678,0.005587891,0.006083891,0.006610186,0.007133634,0.007827341,0.008471145,0.009076483,0.009799717,0.010470085,0.011229031,0.011925193,0.012774689,0.01354749,0.014496549,0.015406745,0.016713606,0.017979645,0.019674818,0.021258513,0.023228184,0.025117682,0.027376067,0.029685524,0.03233242,0.035477117,0.038885619,0.042771354,0.04686372,0.05137776,0.057024158,0.062984208,0.069754986,0.076346475,0.084702801,0.093150642,0.103125771,0.115027952,0.1285704,0.142933774,0.16055427,0.176909366,0.19688247,0.217407097,0.237819469,0.258034965,0.282311815,0.30450164,0.325477782,0.346284836,0.373179333,0.393566572,0.420237007,0.439283997,0.453886001,0.489973177,0.454004168,0.501940123,0.468333453,0.444207723,0.412890431],[1000000,993467.13008626,993028.448266249,992731.707535227,992508.271473941,992324.939872278,992180.078798153,992054.285231763,991927.330588926,991805.060080055,991681.731260707,991566.002330587,991433.291672625,991285.976673845,991103.196643445,990864.975125061,990548.841352641,990087.414672171,989478.463456021,988616.749304368,987629.543264131,986563.421419192,985364.538548824,984102.114934616,982836.801599968,981538.502040856,980236.911077088,978899.945841691,977569.16293539,976209.914710499,974814.766553337,973407.379241306,971948.763946046,970487.912154584,968978.111443323,967419.243522427,965830.661753735,964183.170058926,962470.10728574,960684.754108845,958777.416276529,956746.676791403,954571.31727773,952231.867490954,949737.463882845,947023.922883695,944046.359199135,940744.676364905,937091.000991015,933112.299857047,928765.074779959,923996.164851262,918832.97453711,913242.894739404,907206.188973019,900734.512475108,893684.156243626,886113.628525385,878070.833287956,869465.987276941,860362.604380858,850701.565851396,840556.785350272,829818.933537988,818576.970026096,806710.429254975,794281.647586203,781006.337374072,766964.120831728,751874.240967389,735890.512314587,718797.111760641,700742.594711435,681559.018751243,661326.582301867,639944.2933114,617240.915057789,593239.119885911,567865.479383648,541253.190312131,513444.81392302,484166.055624301,453671.240089757,422025.409043115,389805.256583832,356787.659444265,323552.660046435,290186.042369597,256806.536285138,223788.817106297,191801.836956829,161007.232990972,132523.54556081,106431.98264242,83292.914288062,63484.237631867,47103.08457049,33805.327255456,23511.5496668,15859.062618694,10367.309726508,6498.443999578,3940.873668885,2284.772713531,1281.1086232,699.631353721,356.830756854,194.828106005,97.036062479,51.590828232,28.673783894]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Year_start<\/th>\n      <th>Age<\/th>\n      <th>mx US Males<\/th>\n      <th>qx US Males<\/th>\n      <th>lx US Males<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>The <span class="math inline">\(l_x\)</span> values are now plotted in Figure <a href="modeling-lifetimes.html#fig:LxMalFemDataFigsa">2.13</a> where once again the female subpopulation shows higher survivorship trend than the male subpopulation.</p>
<h5 style="text-align: center;">
<a id="displayCode.QxUSFemMalDataFigs" href="javascript:togglecode('toggleCode.QxUSFemMalDataFigs','displayCode.QxUSFemMalDataFigs');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.QxUSFemMalDataFigs" style="display: none">
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="modeling-lifetimes.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lf, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;yellow&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;l_x&quot;</span>,<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1000000</span>))</span>
<span id="cb33-2"><a href="modeling-lifetimes.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(lm, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;orange&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;l_x&quot;</span>,<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1000000</span>))</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:LxMalFemDataFigsa"></span>
<img src="LifeCon_files/figure-html/LxMalFemDataFigsa-1.png" alt="Expected number at risk for the 2010-2014 U.S. Females (in yellow) and Males (in orange) data across all ages" width="576" />
<p class="caption">
Figure 2.13: <strong>Expected number at risk for the 2010-2014 U.S. Females (in yellow) and Males (in orange) data across all ages</strong>
</p>
</div>
<p>There are more advanced approaches to fine-tune the life table, e.g. by smoothing approaches to adjust small deviations in the observed mortality data. However, when relying on the sizable U.S. population, the resulting quantities are fairly smooth as illustrated by Figures <a href="modeling-lifetimes.html#fig:QxUSFemMalDataFigsa">2.12</a> and <a href="modeling-lifetimes.html#fig:LxMalFemDataFigsa">2.13</a>. Hence, we will rely on them without adjustments.</p>
<p>We can rely on the life table to determine various actuarial quantities, at integer ages and for integer durations. For instance, we can determine the survival probabilities <span class="math inline">\(_kp_{50}\)</span> for a 50-year-old female for all choices of <span class="math inline">\(k=0,1,2,...\)</span>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="modeling-lifetimes.html#cb34-1" aria-hidden="true" tabindex="-1"></a>kP50 <span class="ot">&lt;-</span> us_mx_fem_2014<span class="sc">$</span>l[<span class="dv">51</span><span class="sc">:</span><span class="dv">111</span>]<span class="sc">/</span>us_mx_fem_2014<span class="sc">$</span>l[<span class="dv">51</span>]</span></code></pre></div>
<h5 style="text-align: center;">
<a id="displayCode.kPx 50-year old female" href="javascript:togglecode('toggleCode.kPx 50-year old female','displayCode.kPx 50-year old female');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.kPx 50-year old female" style="display: none">
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="modeling-lifetimes.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(kP50,<span class="at">xlab=</span><span class="st">&quot;age&quot;</span>, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:kp50FemFiga"></span>
<img src="LifeCon_files/figure-html/kp50FemFiga-1.png" alt="kPx for a 50-year old female" width="576" />
<p class="caption">
Figure 2.14: <strong>kPx for a 50-year old female</strong>
</p>
</div>
<p>Or we can determine <span class="math inline">\(_{10|20}q_{50}\)</span>, the probability that a 50-year old survives for 10 years and then dies within the next 20 years via <span class="math inline">\(\frac{l_{60}-l_{80}}{l_{50}}\)</span>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="modeling-lifetimes.html#cb36-1" aria-hidden="true" tabindex="-1"></a>(us_mx_fem_2014<span class="sc">$</span>l[<span class="dv">61</span>] <span class="sc">-</span> us_mx_fem_2014<span class="sc">$</span>l[<span class="dv">81</span>])<span class="sc">/</span>us_mx_fem_2014<span class="sc">$</span>l[<span class="dv">51</span>]</span></code></pre></div>
<pre><code>[1] 0.281351377</code></pre>
</div>
<div id="S:LifeTabRec" class="section level3" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Curtate Quantities and Recursive Relationships</h3>
<p>Rather than thinking about life tables as an annually-discretized version of the survival function of <span class="math inline">\(T_0\)</span> within the age-only model, it is also possible to interpret a life table as providing probabilities of a discretized version of the lifetime random variable. This is referred to as the <em>curtate future lifetime</em>.</p>
<p>Formally, the curtate future lifetime <span class="math inline">\(K_{\bf{x}}\)</span> is given by the greatest integer of <span class="math inline">\(T_{\bf{x}}\)</span>: <span class="math inline">\(K_{\bf{x}} = \lfloor T_{\bf{x}} \rfloor\)</span>, i.e.<br />
<span class="math display">\[\begin{eqnarray*}
K_{\bf{x}} = 0 &amp; \text{ if } &amp; T_{\bf{x}} &lt; 1\\
K_{\bf{x}} = 1 &amp; \text{ if } &amp; 1\leq  T_{\bf{x}} &lt; 2\\
&amp;...&amp;\\
K_x = {\bf{x}} &amp; \text{ if } &amp; k \leq T_{\bf{x}} &lt; k+1,\, k \in {\mathbb N}.
\end{eqnarray*}\]</span>
Therefore, <span class="math inline">\(K_{\bf{x}}\)</span> describes the number of whole future years lived by an individual with characteristics <span class="math inline">\({\bf{x}}\)</span> prior to death. Therefore, the probability function of the (discrete) distribution of <span class="math inline">\(K_{\bf{x}}\)</span> is:
<span class="math display">\[
Pr(K_{\bf{x}} = k) = Pr(k \leq T_{\bf{x}} &lt; k+1) = {_kp_{\bf{x}}} - {_{k+1}p_{\bf{x}}} = {_{k\mid 1}q_{\bf{x}}} = {_{k\mid}q_{\bf{x}}},\,k=0,1,...
\]</span></p>
Just as for the lifetime, the expected value of <span class="math inline">\(K_x\)</span> corresponds to a life expectancy, though this is a curtate version of life expectancy. It is denoted by <span class="math inline">\(e_{\bf{x}}\)</span>, and its calculation can be obtained by summing up the <span class="math inline">\({_kp_{\bf{x}}}\)</span> in analogy to the derivation of (complete) life expectancy:
<span class="math display">\[
e_{\bf{x}} = E[K_{\bf{x}}]= \sum_{k=1}^{\infty} {_kp_{\bf{x}}}.
\]</span>
<h5 style="text-align: center;">
<a id="displayTheory.DerivationCurtLifeExp" href="javascript:toggleTheory('toggleTheory.DerivationCurtLifeExp','displayCode.DerivationCurtLifeExp');"><i><strong>Derivation of Formula for Curtate Life Expectancy</strong></i></a>
</h5>
<div id="toggleTheory.DerivationCurtLifeExp" style="display: none">
<p><span class="math display">\[\begin{eqnarray*}
e_{\bf{x}} &amp;=&amp; E[K_{\bf{x}}] = \sum_{k=0}^{\infty} k \, Pr(K_{\bf{x}}=k) = \sum_{k=0}^{\infty} k\, ({_kp_{\bf{x}}} - {_{k+1}p_{\bf{x}}}) \\
&amp;=&amp; \sum_{k=0}^{\infty} k\, {_kp_{\bf{x}}}-\sum_{k=0}^{\infty} (k+1)\, {_{k+1}p_{\bf{x}}} + \sum_{k=0}^{\infty}  {_{k+1}p_{\bf{x}}}\\
&amp;=&amp;\sum_{k=1}^{\infty} {_kp_{\bf{x}}}.
\end{eqnarray*}\]</span></p>
</div>
<p>As before, in the age-only model we write <span class="math inline">\({\bf{x}}=x\)</span>, and in this case we can express the curtate expected lifetime of an <span class="math inline">\(x\)</span>-year old by the corresponding value for an <span class="math inline">\(x+1\)</span> year old:
<span class="math display">\[\begin{eqnarray*}
e_x &amp;=&amp; \sum_{k=1}^{\infty} {_kp_x} = p_x \,\sum_{k=1}^{\infty} {_{k-1}p_{x+1}}
= p_x\,{_0p_{x+1}} + p_x\,\sum_{k=2}^{\infty} {_{k-1}p_{x+1}}  \\
&amp;=&amp; p_x + p_x \sum_{i=1}^{\infty} {_{i}p_{x+1}} = p_x + p_x \cdot e_{x+1}
\end{eqnarray*}\]</span>
or
<span class="math display">\[
e_{x} = p_x\left(1+e_{x+1}\right) 
\Leftrightarrow e_{x+1} = \frac{e_x - p_x}{p_x}.
\]</span>
This <em>recursive</em> formula states that the expected future lifetime for an <span class="math inline">\(x\)</span>-year-old in whole years will be non-zero for the survivors until age <span class="math inline">\(x+1\)</span> only, and for those it will be the expected future lifetime in whole years for an <span class="math inline">\(x+1\)</span>-year-old individual plus the one year they already have survived.</p>
<p>Curtate life expectancies are straightforward to calculate from a life table. For instance, using our life table for females, we obtain for curtate life expectancy at birth is:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="modeling-lifetimes.html#cb38-1" aria-hidden="true" tabindex="-1"></a>kP0f <span class="ot">&lt;-</span> us_mx_fem_2014<span class="sc">$</span>l<span class="sc">/</span>us_mx_fem_2014<span class="sc">$</span>l[<span class="dv">1</span>]</span>
<span id="cb38-2"><a href="modeling-lifetimes.html#cb38-2" aria-hidden="true" tabindex="-1"></a>e_0 <span class="ot">&lt;-</span> <span class="fu">sum</span>(kP0f) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb38-3"><a href="modeling-lifetimes.html#cb38-3" aria-hidden="true" tabindex="-1"></a>e_0</span></code></pre></div>
<pre><code>[1] 80.7955575</code></pre>
<p>which is close to the Figure from the U.S. national statistics from Section <a href="modeling-lifetimes.html#S:DataLifeExp">2.1.1</a>, where the female life expectancy for 2017 is recorded as 81.1 years. We are also now in a position to elaborate on the caveat at the end of that section on the interpretation of this number: This is a so-called <em>period life expectancy</em> as it was derived from a <em>period life table</em>. So rather than reflecting the prospective life expectancy of a newborn today, it describes how long a hypothetical newborn that will have the mortality patterns observed in the population within this period will be expected to live. We will attempt to derive a more representative figure for a 50-year old alive today that will experience <em>future</em> mortality rates in Section <a href="modeling-lifetimes.html#S:LifeTabMImpr">2.4.5</a>.</p>
<p>Indeed, an interesting and revealing exercise is to go through past years of data that we have available in our population count data from Section <a href="modeling-lifetimes.html#S:HMDData">2.1.2</a>, and derive life expectancies for past periods. We consider newborn and fifty-year-old females. We obtain this by essentially repeating the same exercise we carried out in the previous section to assemble the life table for every time period.</p>
<h5 style="text-align: center;">
<a id="displayCode.Female life expectancies across time" href="javascript:togglecode('toggleCode.Female life expectancies across time','displayCode.Female life expectancies across time');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.Female life expectancies across time" style="display: none">
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="modeling-lifetimes.html#cb40-1" aria-hidden="true" tabindex="-1"></a>e0 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">16</span>)</span>
<span id="cb40-2"><a href="modeling-lifetimes.html#cb40-2" aria-hidden="true" tabindex="-1"></a>e50 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">16</span>)</span>
<span id="cb40-3"><a href="modeling-lifetimes.html#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="modeling-lifetimes.html#cb40-4" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb40-5"><a href="modeling-lifetimes.html#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="modeling-lifetimes.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (s <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1935</span>,<span class="dv">2010</span>,<span class="dv">5</span>)){</span>
<span id="cb40-7"><a href="modeling-lifetimes.html#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Get central death rates for each start year</span></span>
<span id="cb40-8"><a href="modeling-lifetimes.html#cb40-8" aria-hidden="true" tabindex="-1"></a>  mx <span class="ot">&lt;-</span> us_mx[us_mx<span class="sc">$</span>Year_start <span class="sc">==</span> s,<span class="dv">4</span>]</span>
<span id="cb40-9"><a href="modeling-lifetimes.html#cb40-9" aria-hidden="true" tabindex="-1"></a>  S0 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">111</span>)</span>
<span id="cb40-10"><a href="modeling-lifetimes.html#cb40-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb40-11"><a href="modeling-lifetimes.html#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Calculate the survival function</span></span>
<span id="cb40-12"><a href="modeling-lifetimes.html#cb40-12" aria-hidden="true" tabindex="-1"></a>  S0[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb40-13"><a href="modeling-lifetimes.html#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">111</span>){</span>
<span id="cb40-14"><a href="modeling-lifetimes.html#cb40-14" aria-hidden="true" tabindex="-1"></a>    S0[j] <span class="ot">&lt;-</span> S0[j<span class="dv">-1</span>]<span class="sc">*</span>(<span class="dv">1</span> <span class="sc">-</span> (<span class="dv">2</span><span class="sc">*</span>mx[j<span class="dv">-1</span>])<span class="sc">/</span>(<span class="dv">2</span> <span class="sc">+</span> mx[j<span class="dv">-1</span>]))</span>
<span id="cb40-15"><a href="modeling-lifetimes.html#cb40-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb40-16"><a href="modeling-lifetimes.html#cb40-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-17"><a href="modeling-lifetimes.html#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#And evaluate curtate life expectancies by summing over kPx&#39;s</span></span>
<span id="cb40-18"><a href="modeling-lifetimes.html#cb40-18" aria-hidden="true" tabindex="-1"></a>  e0[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(S0) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb40-19"><a href="modeling-lifetimes.html#cb40-19" aria-hidden="true" tabindex="-1"></a>  e50[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(S0[<span class="dv">51</span><span class="sc">:</span><span class="dv">111</span>]<span class="sc">/</span>S0[<span class="dv">51</span>]) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb40-20"><a href="modeling-lifetimes.html#cb40-20" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb40-21"><a href="modeling-lifetimes.html#cb40-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-22"><a href="modeling-lifetimes.html#cb40-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-23"><a href="modeling-lifetimes.html#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb40-24"><a href="modeling-lifetimes.html#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">seq</span>(<span class="dv">1935</span>,<span class="dv">2010</span>,<span class="dv">5</span>),e0, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">main=</span><span class="st">&quot;life expectancies at birth, across years&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;year&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;life expectancy&quot;</span>)</span>
<span id="cb40-25"><a href="modeling-lifetimes.html#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">seq</span>(<span class="dv">1935</span>,<span class="dv">2010</span>,<span class="dv">5</span>),e50, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">main=</span><span class="st">&quot;life expectancies at 50, across years&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;year&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;life expectancy&quot;</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:exFemFiga"></span>
<img src="LifeCon_files/figure-html/exFemFiga-1.png" alt="Female life expectancies across time for U.S. females" width="960" />
<p class="caption">
Figure 2.15: <strong>Female life expectancies across time for U.S. females</strong>
</p>
</div>
<p>We notice that period life expectancies have consistently increased, and indeed the increase seems close to linear. This is a familiar observation from demography, where it is pointed out that various limits on life expectancy that were previously assumed have been broken.</p>
</div>
<div id="S:LifeTabFrac" class="section level3" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Fractional year assumptions</h3>
<p>Let us consider the <em>complete</em> life expectancy in the age-only model for an <span class="math inline">\(x\)</span>-year old life or, more precisely, the <em>recursive</em> relationship:
<span class="math display">\[\begin{eqnarray*}
\stackrel{\circ}{e}_{x} &amp;=&amp; \int_0^{\infty} {_tp_x}\,dt = \int_0^{1} {_tp_x}\,dt +\int_1^{\infty} {_tp_x}\,dt 
= \int_0^{1} {_tp_x}\,dt +p_x\,\int_1^{\infty} {_{t-1}p_{x+1}}\,dt \\
&amp;=&amp;  \underbrace{\int_0^{1} {_tp_x}\,dt}_{e_{\overline{x:1|}}} +p_x\,\stackrel{\circ}{e}_{x+1}.
\end{eqnarray*}\]</span>
In order to derive the life expectancy from a life table with a terminal age <span class="math inline">\(\omega\)</span>, we could rely on this recursion. Clearly <span class="math inline">\(\stackrel{\circ}{e}_{\omega}=0\)</span>, so to derive <span class="math inline">\(\stackrel{\circ}{e}_{x}\)</span> for <span class="math inline">\(x=\omega-1,\,\omega-2,...,1,0\)</span>, we can employ the <span class="math inline">\(p_x\)</span> as denoted in the life table. However, we also need to compute <span class="math inline">\(\int_0^{1} {_tp_x}\,dt\)</span> and, thus, we need to know how <span class="math inline">\(_tp_x\)</span> evolves within one year or, in other words, for . The common way in actuarial practice to solve this problem, but also to derive quantities like <span class="math inline">\({_{1.5}p_{55}}\)</span> or <span class="math inline">\({_{10}q_{22.5}}\)</span>, is to use interpolation schemes, i.e. to <strong>make an assumption</strong> on the distribution of <span class="math inline">\(S_0(x)\)</span>—or, equivalently, <span class="math inline">\(l_x\)</span>—between integers.</p>
<p>One of the most common assumptions is that of a <em>uniform distribution of deaths within each year of age</em> (UDD). To illustrate, note that the number of deaths within the population of <span class="math inline">\(x\)</span>-year olds is
<span class="math display">\[
d_x = l_x \times q_x.
\]</span>
The UDD assumption is that in, say, half of the year, half of the people die; similarly, say, in a third of the year, a third of the people die, i.e.<br />
<span class="math display">\[\begin{eqnarray*}
{_{0.5}d_x} &amp;=&amp; 0.5\times d_x, \\
{_{0.333}d_x} &amp;=&amp; 0.333 \times d_x 
\end{eqnarray*}\]</span>
or, in general,
<span class="math display">\[
{_{t}d_x} =  t\times d_x, \;0\ \leq t \leq 1,
\]</span>
which implies
<span class="math display">\[
{_tq_x} = \frac{_td_x}{l_x} = t \frac{d_x}{l_x} = t\times q_x, \;0\ \leq t \leq 1.
\]</span>
Of course, we can also express this relationship in terms of the survival function:
<span class="math display">\[\begin{eqnarray*}
 \frac{S_0(x) - S_0(x+t)}{S_(x)} = {_tq_x} &amp;=&amp; t\cdot q_x =  t\;\frac{S_0(x) - S_0(x+1)}{S_0(x)} \\
 \Rightarrow S_0(x+t) &amp;=&amp; S_0(x) + t \left(S_0(x+1) - S_0(x)\right), \;0\ \leq t \leq 1.
\end{eqnarray*}\]</span>
Thus, this assumption is equivalent to assuming a <em>linear interpolation</em> of the survival function bewteen integers.</p>
<p>Based on the survival function and the familiar relationships, we can now derive all other actuarial quantities in terms of the discrete amount of quantities denoted in the life table; for example, for the survival probability we obtain:
<span class="math display">\[
{_tp_x} = 1- {_tq_x} = 1 - t\times q_x, \;0\ \leq t \leq 1;
\]</span>
and for the force of mortality:
<span class="math display">\[\begin{eqnarray*}
\mu_{x+t} &amp;=&amp; \frac{-S_0&#39;(x+t)}{S_0(x+t)} = \frac{-\frac{\partial}{\partial t}{_{x+t}p_0}}{{_{x+t}p_0}} \\
&amp;=&amp; \frac{{_xp_0}\,\left(-\frac{\partial}{\partial t}{_tp_x}\right)}{{_xp_0}\,{_{t}p_x}} = \frac{q_x}{1-t\cdot q_x}, \;0\ \leq t \leq 1.
\end{eqnarray*}\]</span></p>
<p>In order to determine probabilities for fractional starting ages, let us first consider the probability to die within the second part of some given year, i.e. <span class="math inline">\(_{1-t}q_{x+t}\)</span>, <span class="math inline">\(0\ \leq t \leq 1:\)</span> the probability to die before age <span class="math inline">\(x+1\)</span> for some <span class="math inline">\(x+t\)</span> year old life, where <span class="math inline">\(x\)</span> is integer valued. The probability to survive for <span class="math inline">\(t\)</span> periods and to then die within the remaining <span class="math inline">\(1-t\)</span> periods plus the probability to die within the first <span class="math inline">\(t\)</span> periods clearly must equal the probability to die within the whole year, i.e.<br />
<span class="math display">\[
{_tp_x} \times {_{1-t}q_{x+t}} + {_tq_x}
=\frac{S_0(x+t)}{S_0(x)}\frac{S_0(x+t) - S_0(x+1))}{S_0(x+t)} + \frac{S_0(x)-S_0(x+t)}{S_0(x)}
= \frac{S_0(x) - S_0(x+1)}{S_0(x)} = {q_x}
\]</span>
and, therefore:
<span class="math display">\[
{_{1-t}q_{x+t}} = \frac{q_x - t\times q_x}{_tp_x} = \frac{(1-t)\times q_x}{1-t\times q_x}.
\]</span>
For the probability to die before age <span class="math inline">\(x+t+u\)</span> for an <span class="math inline">\((x+t)\)</span>-year old life, where <span class="math inline">\(0 \leq u &lt; 1-t\)</span>, we can rely on the same reasoning as above: In the <span class="math inline">\((1-t)\)</span> time periods between age <span class="math inline">\(x+t\)</span> and <span class="math inline">\(x+1\)</span>, a proportion of <span class="math inline">\(_{1-t}q_{x+t}\)</span> of the entire population die. Thus, in the first <span class="math inline">\(u\)</span> time periods, <span class="math inline">\(\frac{u}{1-t}\)</span> as many people will die, i.e.
<span class="math display">\[
{_{u}q_{x+t}} = \frac{u}{1-t} {_{1-t}q_{x+t}} = \frac{u}{1-t}\frac{(1-t)\,q_x}{1-t\,q_x} =
\frac{u\,q_x}{1-t\,q_x}.
\]</span>
However, we could have also simply relied on the interpolation scheme for <span class="math inline">\(S_0(x)\)</span> and applied the familiar formulas.</p>
<p>Finally, for the integral within the recursion for the life expectation, we have
<span class="math display">\[
\int_0^1 {_tp_x}\,dt = \int_0^1 1 - t\,q_x\,dt = 1 - q_x \left.\frac{1}{2}t^2\right|_{t=0}^1 = \frac{1 + p_x}{2}.
\]</span>
Note that this implies that under the UDD assumption:
<span class="math display">\[
m_x = \frac{d_x}{\int_0^1 l_{x+s}\,ds}=\frac{l_x\,q_x}{l_x\,\int_0^1 {_tp_x}\,dt} = \frac{q_x}{1-0.5\,q_x},
\]</span>
which is exactly the relationship we used in relating <span class="math inline">\(m_x\)</span> and <span class="math inline">\(q_x\)</span> in the previous section to construct our life table. That is, we implictly relied on a UDD assumption. Similarly, connecting to our motivational example, under UDD we obtain:
<span class="math display">\[
\stackrel{\circ}{e}_{x} = \frac{1}{2} + e_x,
\]</span>
so that our observations for the curtate life expectancies will closely resemble those for the complete life expectancies.</p>
<h5 style="text-align: center;">
<a id="displayTheory.DerivationCurtCompLifeExpRel" href="javascript:toggleTheory('toggleTheory.DerivationCurtCompLifeExpRel','displayCode.DerivationCurtCompLifeExpRel');"><i><strong>Derivation of Relationship between Curtate and Complete Life Expectancy under UDD</strong></i></a>
</h5>
<div id="toggleTheory.DerivationCurtCompLifeExpRel" style="display: none">
<p><span class="math display">\[\begin{eqnarray*}
\stackrel{\circ}{e}_{x} &amp;=&amp; \frac{1}{2} + \frac{1}{2}\,p_x + p_x \,\stackrel{\circ}{e}_{x+1} = \frac{1}{2} + p_x\,(\frac{1}{2}+\stackrel{\circ}{e}_{x+1})\\
&amp;=&amp; \frac{1}{2} + p_x\,(\frac{1}{2}+\frac{1}{2} + \frac{1}{2}\,p_{x+1} + p_{x+1} \,\stackrel{\circ}{e}_{x+2}) = 
\frac{1}{2} + p_x + {_2p_x}\,(\frac{1}{2}+\stackrel{\circ}{e}_{x+2})\\
&amp;=&amp; ...\\
&amp;=&amp; \frac{1}{2} + \sum_{k=1}^{\inft} {_kp_x} = \frac{1}{2} + e_x.
\end{eqnarray*}\]</span></p>
</div>
<p>An alternate common assumption is that the force of mortality remains constant over the year (<em>constant force</em> assumption):
<span class="math display">\[
p_x = e^{-\int_0^1 \mu_{x+t}\,dt} = e^{-\mu_x},
\]</span>
where <span class="math inline">\(\mu_{x+t} = \mu_{x},\;0 \leq t &lt; 1\)</span>, which immediately yields
<span class="math display">\[
\mu_{x+t} = \mu_x = -\log\left\{p_x\right\},\;0 \leq t &lt; 1,
\]</span>
and, hence:
<span class="math display">\[
{_tp_x} = e^{-\int_0^t \mu_{x+t}\,dt} = e^{-\mu_x\,t} = p_x^t.
\]</span>
This, on the other hand, implies:
<span class="math display">\[\begin{eqnarray*}
\frac{S_0(x+t)}{S_0(x)} &amp;=&amp; \left(\frac{S_0(x+1)}{S_0(x)}\right)^t \\
\Rightarrow \; S_0(x+t) &amp;=&amp; S_0(x)\left(\frac{S_0(x+1)}{S_0(x)}\right)^t,\;0\leq t &lt; 1,
\end{eqnarray*}\]</span>
so we are looking at an  scheme.</p>
<p>Clearly, all other quantities can now again be derived on the basis of <span class="math inline">\(S_0(x+t)\)</span>. In particular, for the central death rate, we obtain:
<span class="math display">\[
m_{x}=\frac{q_x}{\int_0^1 {_tp_x}\;dt}=\frac{1-e^{-\mu_x}}{\int_0^1 e^{-\mu_x \,t}\;dt}=\frac{1-e^{-\mu_x}}{\big(1-e^{-\mu_x}\big)/\mu_x}=\mu_x,
\]</span>
yielding the relationship:
<span class="math display">\[
q_x = 1-e^{-\mu_{x}} = 1-e^{-m_x}.
\]</span>
This is an alternate, similarly common way of connecting <span class="math inline">\(q_x\)</span> and <span class="math inline">\(m_x\)</span> in constructing life tables. The differences are relatively minor.</p>
</div>
<div id="S:LifeTabMImpr" class="section level3" number="2.4.5">
<h3><span class="header-section-number">2.4.5</span> Cohort Life Tables and Mortality Improvement Modeling</h3>
<p>When compiling a <em>period</em> life table as we did in this chapter, we are relying on a snapshot of mortality experience for a given year or a given period. However, for a life insurance company selling annuities, in order to adequately price and reserve for their future liabilities, it is necessary to take into account future changes in mortality. As we have seen in Figure <a href="modeling-lifetimes.html#fig:exFemFiga">2.15</a>, life expectancies have changed substantially over the last decades. This means that a female born today may not have the same life expectancy <span class="math inline">\(e_{0}\)</span> that we determined from our period life table (81.8, which as close to the U.S. national figure of 81.1 years)</p>
<p>One simple way of describing how mortality changed across years and ages are so-called <em>mortality improvement factors</em>, i.e. the percentage reduction in the mortality rate for each age <span class="math inline">\(x\)</span> over successive years (<span class="math inline">\(t-1\)</span> to <span class="math inline">\(t\)</span>):
<span class="math display">\[
\varphi(x,t) = 1 - \frac{q_{x,t}}{q_{x,t-1}}.
\]</span>
where now <span class="math inline">\(q_{x,t}\)</span> is the mortality probability for an <span class="math inline">\(x\)</span>-year-old at time <span class="math inline">\(t\)</span>. In particular, this is a deviation from the age-only model since we have a bivariate <span class="math inline">\({\bf{x}}=(x,t)\)</span>.</p>
<p>Let us consider mortality improvement factors in our dataset. Since we consider data in five-year intervals, we scale to one year:
<span class="math display">\[
\varphi(x,t) = 1 - \left(\frac{q_{x,t}}{q_{x,t-5}}\right)^{1/5}.
\]</span>
One way of visualizing is a so-called heat map:</p>
<h5 style="text-align: center;">
<a id="displayCode.Heatmap of Mortality Improvements" href="javascript:togglecode('toggleCode.Heatmap of Mortality Improvements','displayCode.Heatmap of Mortality Improvements');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.Heatmap of Mortality Improvements" style="display: none">
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="modeling-lifetimes.html#cb41-1" aria-hidden="true" tabindex="-1"></a>us_mx_fem <span class="ot">&lt;-</span> us_mx[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">6</span>)]</span>
<span id="cb41-2"><a href="modeling-lifetimes.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(us_mx_fem)[<span class="fu">colnames</span>(us_mx_fem)<span class="sc">==</span><span class="st">&quot;Female&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;mx&quot;</span></span>
<span id="cb41-3"><a href="modeling-lifetimes.html#cb41-3" aria-hidden="true" tabindex="-1"></a>us_mx_fem<span class="sc">$</span>qx <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">-</span><span class="fu">exp</span>(<span class="sc">-</span>us_mx_fem<span class="sc">$</span>mx)</span>
<span id="cb41-4"><a href="modeling-lifetimes.html#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="modeling-lifetimes.html#cb41-5" aria-hidden="true" tabindex="-1"></a>phi <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">111</span><span class="sc">*</span><span class="dv">15</span>),<span class="at">nrow=</span><span class="dv">111</span>,<span class="at">ncol=</span><span class="dv">15</span>,<span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb41-6"><a href="modeling-lifetimes.html#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (t <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>){</span>
<span id="cb41-7"><a href="modeling-lifetimes.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (x <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">111</span>){</span>
<span id="cb41-8"><a href="modeling-lifetimes.html#cb41-8" aria-hidden="true" tabindex="-1"></a>    phi[x,t] <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> (us_mx_fem[t<span class="sc">*</span><span class="dv">111</span><span class="sc">+</span>x,<span class="dv">4</span>]<span class="sc">/</span>us_mx_fem[(t<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">111</span><span class="sc">+</span>x,<span class="dv">4</span>])<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">5</span>)</span>
<span id="cb41-9"><a href="modeling-lifetimes.html#cb41-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb41-10"><a href="modeling-lifetimes.html#cb41-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb41-11"><a href="modeling-lifetimes.html#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="fu">heatmap</span>(phi,<span class="at">Colv =</span> <span class="cn">NA</span>,<span class="at">Rowv =</span> <span class="cn">NA</span>,<span class="at">labCol =</span> <span class="fu">seq</span>(<span class="dv">1935</span>,<span class="dv">2010</span>,<span class="dv">5</span>), <span class="at">xlab=</span><span class="st">&quot;Year&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Age&quot;</span>, <span class="at">main=</span><span class="st">&quot;Mortality Improvements&quot;</span>)</span>
<span id="cb41-12"><a href="modeling-lifetimes.html#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">x=</span><span class="st">&quot;right&quot;</span>, <span class="at">legend=</span><span class="fu">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;med&quot;</span>, <span class="st">&quot;high&quot;</span>),<span class="at">fill=</span><span class="fu">heat.colors</span>(<span class="dv">3</span>))</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:MortImpHeatFiga"></span>
<img src="LifeCon_files/figure-html/MortImpHeatFiga-1.png" alt="Heatmap for Mortality Improvements for U.S. Females Across Times and Ages" width="768" />
<p class="caption">
Figure 2.16: <strong>Heatmap for Mortality Improvements for U.S. Females Across Times and Ages</strong>
</p>
</div>
<p>As we can see, mortality improvements vary quiet a bit over time and age, but we do see quite substantial improvements for low to medium ages in the more recent past. One interesting aspect here is that clearly there is a relationship between time and age. For a certain birth cohort, as time passes, the individuals will age. In particular, we identify the diagonals in the heatmap with a certain birth cohort, and we observe some distinct relationships on the diagonals. For instance, the cohort if individuals born around 1950 appears to experience quite substantial improvements across all years of age, which could be due to environmental or socio-economic factors.</p>
<p>One simple way of accounting for improvements and forecasting mortality into the future are so-called <em>single factor mortality improvement models</em>, i.e. models where <span class="math inline">\(\varphi(x,t)\)</span> only depends on <span class="math inline">\(x\)</span> – let’s write <span class="math inline">\(\varphi_x\)</span>. With that, the above equation becomes:
<span class="math display">\[
q_{x,t}= q_{x,t-1}\times (1- \varphi_x),
\]</span>
or, generalizing:
<span class="math display">\[
q_{x,t} = q_{x,0}\times (1-\varphi_x)^t
\]</span></p>
<p>To obtain suitable improvement factors for making projections, for deriving <span class="math inline">\(\phi_x\)</span> let’s average across years under consideration and smooth across ages using a simple local regression smoother:</p>
<h5 style="text-align: center;">
<a id="displayCode.Mortality Improvement Factors for US Females" href="javascript:togglecode('toggleCode.Mortality Improvement Factors for US Females','displayCode.Mortality Improvement Factors for US Females');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.Mortality Improvement Factors for US Females" style="display: none">
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="modeling-lifetimes.html#cb42-1" aria-hidden="true" tabindex="-1"></a>phi_x <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">111</span>)</span>
<span id="cb42-2"><a href="modeling-lifetimes.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">111</span>){</span>
<span id="cb42-3"><a href="modeling-lifetimes.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  phi_x[x] <span class="ot">&lt;-</span> <span class="fu">mean</span>(phi[x,])</span>
<span id="cb42-4"><a href="modeling-lifetimes.html#cb42-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-5"><a href="modeling-lifetimes.html#cb42-5" aria-hidden="true" tabindex="-1"></a>ages <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">111</span></span>
<span id="cb42-6"><a href="modeling-lifetimes.html#cb42-6" aria-hidden="true" tabindex="-1"></a>lo <span class="ot">&lt;-</span> <span class="fu">loess</span>(phi_x <span class="sc">~</span> ages)</span>
<span id="cb42-7"><a href="modeling-lifetimes.html#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(phi_x, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">5</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">main=</span><span class="st">&quot;Mortality Improvement Factors, US Females&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;phi&quot;</span>)</span>
<span id="cb42-8"><a href="modeling-lifetimes.html#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">predict</span>(lo), <span class="at">col=</span><span class="st">&#39;blue&#39;</span>, <span class="at">lwd=</span><span class="dv">2</span>)</span>
<span id="cb42-9"><a href="modeling-lifetimes.html#cb42-9" aria-hidden="true" tabindex="-1"></a>phi_x <span class="ot">&lt;-</span> <span class="fu">predict</span>(lo)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:MortImpFacsa"></span>
<img src="LifeCon_files/figure-html/MortImpFacsa-1.png" alt="Mortality Improvement Factors for U.S. Females" width="768" />
<p class="caption">
Figure 2.17: <strong>Mortality Improvement Factors for U.S. Females</strong>
</p>
</div>
<p>It is important to stress that we are no longer in the age-only model, since now a seventy-year-old today and a seventy-year-old ten years from now. However, as we already indicated in Section <a href="modeling-lifetimes.html#S:ModelOnlyAge">2.2.3</a>, in this case of a bivariate <span class="math inline">\(\bf{x}\)</span> where one of the covariates—year of birth—is immutable for an individual, we can still rely on the same ideas as in the age-only model. Hence, in particular, we can still defined life tables, although life tables will now be two dimensional since we will have different <span class="math inline">\(q_{x,t}\)</span> for every year <span class="math inline">\(t\)</span>.</p>
<p>To illustrate, let us create a <em>cohort life table</em> for fifty year old females <em>now</em>, where for simplicity we denote the current time by <span class="math inline">\(t=0\)</span> (corresponding to the timing of the period life table we created). Then we can obtain prospective mortality probabilities <span class="math inline">\(q_{50+t,t}\)</span> via:
<span class="math display">\[
q_{50+t,t} = q_{50+t,0} \times (1-\varphi_{50+t})^t.
\]</span>
Let us plot these <em>cohort mortality probabilities</em> and compare them to our <em>period mortality probabilities</em>:</p>
<h5 style="text-align: center;">
<a id="displayCode.Cohort vs. Period q_x for 50-year old U.S. females" href="javascript:togglecode('toggleCode.Cohort vs. Period q_x for 50-year old U.S. females','displayCode.Cohort vs. Period q_x for 50-year old U.S. females');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.Cohort vs. Period q_x for 50-year old U.S. females" style="display: none">
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="modeling-lifetimes.html#cb43-1" aria-hidden="true" tabindex="-1"></a>q_50plusx <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">61</span>)</span>
<span id="cb43-2"><a href="modeling-lifetimes.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">61</span>){</span>
<span id="cb43-3"><a href="modeling-lifetimes.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  q_50plusx[i] <span class="ot">&lt;-</span> us_mx_fem_2014[<span class="dv">50</span><span class="sc">+</span>i,<span class="dv">4</span>] <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> phi_x[<span class="dv">50</span><span class="sc">+</span>i])<span class="sc">^</span>(i<span class="dv">-1</span>)</span>
<span id="cb43-4"><a href="modeling-lifetimes.html#cb43-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-5"><a href="modeling-lifetimes.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">50</span><span class="sc">:</span><span class="dv">99</span>,q_50plusx[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>], <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">main=</span><span class="st">&quot;q_x comparison&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>)</span>
<span id="cb43-6"><a href="modeling-lifetimes.html#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="dv">50</span><span class="sc">:</span><span class="dv">99</span>,us_mx_fem_2014[<span class="dv">51</span><span class="sc">:</span><span class="dv">100</span>,<span class="dv">4</span>], <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:CohortvsPeriodqxa"></span>
<img src="LifeCon_files/figure-html/CohortvsPeriodqxa-1.png" alt="Cohort (red) vs. Period (blue) q_x for 50-year old U.S. females" width="768" />
<p class="caption">
Figure 2.18: <strong>Cohort (red) vs. Period (blue) q_x for 50-year old U.S. females</strong>
</p>
</div>
<p>Evidently the cohort mortality probabilities are lower than the period mortality probabilities, as we incorporate mortality improvements. Of course, this comes with the assumption that the future mortality evolution will be similar to that in the past. While critical, it is not possible to make a projections without any assumption, and reliance on a period table is equivalent to assuming there will not be improvements whatsoever. These <span class="math inline">\(q_{50+t,t}\)</span> and now be relied on for determining actuarial quantities just as in the previous section.</p>
<p>If we use all ages <span class="math inline">\(x\)</span> today and determine corresponding <span class="math inline">\(q_{x+t,t}\)</span>, <span class="math inline">\(t=0,1,2,...\)</span>, <span class="math inline">\(x=0,1,2,...\)</span>, just as above, we obtain a two-dimensional <em>cohort</em> or <em>projective life table</em>. In particular, we can consider newborn females and determine their (curtate) life expectancy, resulting in:</p>
<h5 style="text-align: center;">
<a id="displayCode.Cohort Life Expectancy for U.S. females" href="javascript:togglecode('toggleCode.Cohort Life Expectancy for U.S. females','displayCode.Cohort Life Expectancy for U.S. females');"><i><strong>R Code For Cohort Life Expectancy</strong></i></a>
</h5>
<div id="toggleCode.Cohort Life Expectancy for U.S. females" style="display: none">
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="modeling-lifetimes.html#cb44-1" aria-hidden="true" tabindex="-1"></a>q_0plusx <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">110</span>)</span>
<span id="cb44-2"><a href="modeling-lifetimes.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">110</span>){</span>
<span id="cb44-3"><a href="modeling-lifetimes.html#cb44-3" aria-hidden="true" tabindex="-1"></a>q_0plusx[i] <span class="ot">&lt;-</span> us_mx_fem_2014[i,<span class="dv">4</span>] <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> phi_x[i])<span class="sc">^</span>(i<span class="dv">-1</span>)</span>
<span id="cb44-4"><a href="modeling-lifetimes.html#cb44-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-5"><a href="modeling-lifetimes.html#cb44-5" aria-hidden="true" tabindex="-1"></a>kP0_i <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">110</span>)</span>
<span id="cb44-6"><a href="modeling-lifetimes.html#cb44-6" aria-hidden="true" tabindex="-1"></a>kP0_i[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span> </span>
<span id="cb44-7"><a href="modeling-lifetimes.html#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">110</span>){</span>
<span id="cb44-8"><a href="modeling-lifetimes.html#cb44-8" aria-hidden="true" tabindex="-1"></a>  kP0_i[i] <span class="ot">&lt;-</span> kP0_i[i<span class="dv">-1</span>] <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> q_0plusx[i<span class="dv">-1</span>])</span>
<span id="cb44-9"><a href="modeling-lifetimes.html#cb44-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-10"><a href="modeling-lifetimes.html#cb44-10" aria-hidden="true" tabindex="-1"></a>e_0Coh <span class="ot">&lt;-</span> <span class="fu">sum</span>(kP0_i) <span class="sc">-</span> <span class="dv">1</span> </span></code></pre></div>
</div>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="modeling-lifetimes.html#cb45-1" aria-hidden="true" tabindex="-1"></a>e_0Coh</span></code></pre></div>
<pre><code>[1] 88.1249429</code></pre>
<p>Hence, due to mortality improvements, our projected life expectancy is substantially larger than that based on our period table of 80.8 years from Section <a href="modeling-lifetimes.html#S:LifeTabRec">2.4.3</a> or that based U.S. national statistics of 81.1 from Section <a href="modeling-lifetimes.html#S:DataLifeExp">2.1.1</a>.</p>
</div>
</div>
<div id="S:NonParamSurv" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Non-parametric survival estimation</h2>
<p>The previous section introduced life tables as a (discretized) representation of a <em>non-parametric</em> survival function in the age-only model. We also showed how to compile a period life table based on (population) mortality count data, essentially by deriving mortality rates from a given time window.</p>
<p>How can we determine a life table—or, more generally, a survival function—from mortality data at the individual level, which an insurance company has available, such as the dataset we introduced in Section <a href="modeling-lifetimes.html#S:IndivMortData">2.1.3</a>? One approach is to follow a similar path as in the previous section, by translating the individual outcomes into counts and the proceeding similarly. However, the number of deaths within a given year and at a certain age may be rather limited for a single company’s portfolio, especially when constraining the individuals to a certain subgroup determined by sex, smoking status, health, etc. Therefore, in practice life tables are often compiled at the industry level, such as within the so-called <a href="https://www.soa.org/resources/experience-studies/2015/2015-valuation-basic-tables/">Valuation Basic Table</a> by the American Academy of Actuaries.</p>
<p>The current section discusses non-parametric estimation of survival functions based on a individual level mortality dataset that inlcudes truncated and censored data, where we rely on the dataset from Section <a href="modeling-lifetimes.html#S:IndivMortData">2.1.3</a> for illustration. In anaology to the previous section, the setting here is the age-only approach, i.e., we determine one survival curve that reflects mortality as a function of age. However, by constraining the dataset to certain subrgoups, we can generate different survival curves for these different subgroups. We commence by introducing the <em>Kaplan-Meier</em> (product limit) approach for estimating the survival curve and then discuss the <em>Nelson-Aalen</em> estimator for the cumulative hazard.</p>
<div id="kaplan-meier-estimate" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Kaplan-Meier Estimate</h3>
<p>The intuition for the Kaplan-Meier estimate is straightforward. Recall from Section <a href="modeling-lifetimes.html#S:ModelOnlyAge">2.2.3</a> that in the age-only model, for the survival function for <span class="math inline">\(x\)</span>-year-olds we have:
<span class="math display">\[
S_x(0) = 1 \text{ and } S_x(t+1) = S_x(t) \times p_{x+t} 
\]</span>
for integer <span class="math inline">\(x\)</span> and <span class="math inline">\(t\)</span>. Furthermore, from the previous section on life tables, given information on exposures <span class="math inline">\(l_{x+t}\)</span> and deaths <span class="math inline">\(d_{x+t}\)</span> at time <span class="math inline">\(x+t\)</span>, we estimate:
<span class="math display">\[
p_{x+t} = 1 - \frac{d_{x+t}}{l_{x+t}} \Longrightarrow S_x(t+1) = S_x(t) \times \left(1 - \frac{d_{x+t}}{l_{x+t}}\right).
\]</span>
The Kaplan-Meier estimate uses the exact same relationship, although it takes into account that in the context of right-censored individual mortality data, potential exposures at each death time may be different. That is, <span class="math inline">\(l_{x+t}\)</span> in this equation should be interpreted as the total number of individuals at risk of dying at time <span class="math inline">\(x+t\)</span>. This number will change across time because individuals die <em>and</em> because of right-censoring, so indviduals falling outside of the observation window. As a consequence, the survival function is updated whenever there is a death event, and the number of corresponding exposures is recalculated at every point. For additional details as well as a discussion of how to determine the variance of the estimate, we refer to <a href="https://openacttexts.github.io/Loss-Data-Analytics/C-ModelSelection.html#nonparametric-estimation-using-modified-data">Section 4.3.2 in Loss Data Analystics</a>.</p>
<p>An important caveat to the application of the Kaplan-Meier estimate is that all exposures are treated alike in the context of the age-only model. Hence, individuals of the same age at different times are entering the survival curve estimate. In particular, the <em>set</em> of observations that is used for estimating the survival curve determines the population for which the survival curve is relevant.</p>
<p>In <code>R</code>, we can use the library <code>survival</code>. We estimate survival curves based on our insurer dataset from Section <a href="modeling-lifetimes.html#S:IndivMortData">2.1.3</a> for ages 30, 40, and 50, where we compare survival curves for males, females, and the aggregate curves. Let us plot them curves.</p>
<h5 style="text-align: center;">
<a id="displayCode.Kaplan-Meier Estimates of Survival Curves for ages 30, 40, 50" href="javascript:togglecode('toggleCode.Kaplan-Meier Estimates of Survival Curves for ages 30, 40, 50','displayCode.Kaplan-Meier Estimates of Survival Curves for ages 30, 40, 50');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.Kaplan-Meier Estimates of Survival Curves for ages 30, 40, 50" style="display: none">
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="modeling-lifetimes.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb47-2"><a href="modeling-lifetimes.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb47-3"><a href="modeling-lifetimes.html#cb47-3" aria-hidden="true" tabindex="-1"></a>insdatatmp <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;Data/SyntheticInsurerData.csv&quot;</span>,<span class="at">data.table=</span><span class="cn">FALSE</span>)</span>
<span id="cb47-4"><a href="modeling-lifetimes.html#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="modeling-lifetimes.html#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co"># computations for individuals aged 50 </span></span>
<span id="cb47-6"><a href="modeling-lifetimes.html#cb47-6" aria-hidden="true" tabindex="-1"></a>ageX <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb47-7"><a href="modeling-lifetimes.html#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co">#FEMALE</span></span>
<span id="cb47-8"><a href="modeling-lifetimes.html#cb47-8" aria-hidden="true" tabindex="-1"></a>sexX <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co"># 0 for female, 1 for male</span></span>
<span id="cb47-9"><a href="modeling-lifetimes.html#cb47-9" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Sex<span class="sc">==</span>sexX),]</span>
<span id="cb47-10"><a href="modeling-lifetimes.html#cb47-10" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb47-11"><a href="modeling-lifetimes.html#cb47-11" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb47-12"><a href="modeling-lifetimes.html#cb47-12" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb47-13"><a href="modeling-lifetimes.html#cb47-13" aria-hidden="true" tabindex="-1"></a>fit_KM_50_F <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;kaplan-meier&#39;</span>) <span class="co"># Kaplan-Meier estimator</span></span>
<span id="cb47-14"><a href="modeling-lifetimes.html#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="co">#MALE</span></span>
<span id="cb47-15"><a href="modeling-lifetimes.html#cb47-15" aria-hidden="true" tabindex="-1"></a>sexX <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># 0 for female, 1 for male</span></span>
<span id="cb47-16"><a href="modeling-lifetimes.html#cb47-16" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Sex<span class="sc">==</span>sexX),]</span>
<span id="cb47-17"><a href="modeling-lifetimes.html#cb47-17" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb47-18"><a href="modeling-lifetimes.html#cb47-18" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb47-19"><a href="modeling-lifetimes.html#cb47-19" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb47-20"><a href="modeling-lifetimes.html#cb47-20" aria-hidden="true" tabindex="-1"></a>fit_KM_50_M <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;kaplan-meier&#39;</span>)</span>
<span id="cb47-21"><a href="modeling-lifetimes.html#cb47-21" aria-hidden="true" tabindex="-1"></a><span class="co">#AGGREGATE</span></span>
<span id="cb47-22"><a href="modeling-lifetimes.html#cb47-22" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX),]</span>
<span id="cb47-23"><a href="modeling-lifetimes.html#cb47-23" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb47-24"><a href="modeling-lifetimes.html#cb47-24" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb47-25"><a href="modeling-lifetimes.html#cb47-25" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb47-26"><a href="modeling-lifetimes.html#cb47-26" aria-hidden="true" tabindex="-1"></a>fit_KM_50_All <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;kaplan-meier&#39;</span>)</span>
<span id="cb47-27"><a href="modeling-lifetimes.html#cb47-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-28"><a href="modeling-lifetimes.html#cb47-28" aria-hidden="true" tabindex="-1"></a><span class="co"># computations for individuals aged 40 </span></span>
<span id="cb47-29"><a href="modeling-lifetimes.html#cb47-29" aria-hidden="true" tabindex="-1"></a>ageX <span class="ot">&lt;-</span> <span class="dv">40</span></span>
<span id="cb47-30"><a href="modeling-lifetimes.html#cb47-30" aria-hidden="true" tabindex="-1"></a><span class="co">#FEMALE</span></span>
<span id="cb47-31"><a href="modeling-lifetimes.html#cb47-31" aria-hidden="true" tabindex="-1"></a>sexX <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co"># 0 for female, 1 for male</span></span>
<span id="cb47-32"><a href="modeling-lifetimes.html#cb47-32" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Sex<span class="sc">==</span>sexX),]</span>
<span id="cb47-33"><a href="modeling-lifetimes.html#cb47-33" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb47-34"><a href="modeling-lifetimes.html#cb47-34" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb47-35"><a href="modeling-lifetimes.html#cb47-35" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb47-36"><a href="modeling-lifetimes.html#cb47-36" aria-hidden="true" tabindex="-1"></a>fit_KM_40_F <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;kaplan-meier&#39;</span>) <span class="co"># Kaplan-Meier estimator</span></span>
<span id="cb47-37"><a href="modeling-lifetimes.html#cb47-37" aria-hidden="true" tabindex="-1"></a><span class="co">#MALE</span></span>
<span id="cb47-38"><a href="modeling-lifetimes.html#cb47-38" aria-hidden="true" tabindex="-1"></a>sexX <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># 0 for female, 1 for male</span></span>
<span id="cb47-39"><a href="modeling-lifetimes.html#cb47-39" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Sex<span class="sc">==</span>sexX),]</span>
<span id="cb47-40"><a href="modeling-lifetimes.html#cb47-40" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb47-41"><a href="modeling-lifetimes.html#cb47-41" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb47-42"><a href="modeling-lifetimes.html#cb47-42" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb47-43"><a href="modeling-lifetimes.html#cb47-43" aria-hidden="true" tabindex="-1"></a>fit_KM_40_M <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;kaplan-meier&#39;</span>)</span>
<span id="cb47-44"><a href="modeling-lifetimes.html#cb47-44" aria-hidden="true" tabindex="-1"></a><span class="co">#AGGREGATE</span></span>
<span id="cb47-45"><a href="modeling-lifetimes.html#cb47-45" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX),]</span>
<span id="cb47-46"><a href="modeling-lifetimes.html#cb47-46" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb47-47"><a href="modeling-lifetimes.html#cb47-47" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb47-48"><a href="modeling-lifetimes.html#cb47-48" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb47-49"><a href="modeling-lifetimes.html#cb47-49" aria-hidden="true" tabindex="-1"></a>fit_KM_40_All <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;kaplan-meier&#39;</span>)</span>
<span id="cb47-50"><a href="modeling-lifetimes.html#cb47-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-51"><a href="modeling-lifetimes.html#cb47-51" aria-hidden="true" tabindex="-1"></a><span class="co"># computations for individuals aged 30 </span></span>
<span id="cb47-52"><a href="modeling-lifetimes.html#cb47-52" aria-hidden="true" tabindex="-1"></a>ageX <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb47-53"><a href="modeling-lifetimes.html#cb47-53" aria-hidden="true" tabindex="-1"></a><span class="co">#FEMALE</span></span>
<span id="cb47-54"><a href="modeling-lifetimes.html#cb47-54" aria-hidden="true" tabindex="-1"></a>sexX <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co"># 0 for female, 1 for male</span></span>
<span id="cb47-55"><a href="modeling-lifetimes.html#cb47-55" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Sex<span class="sc">==</span>sexX),]</span>
<span id="cb47-56"><a href="modeling-lifetimes.html#cb47-56" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb47-57"><a href="modeling-lifetimes.html#cb47-57" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb47-58"><a href="modeling-lifetimes.html#cb47-58" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb47-59"><a href="modeling-lifetimes.html#cb47-59" aria-hidden="true" tabindex="-1"></a>fit_KM_30_F <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;kaplan-meier&#39;</span>) <span class="co"># Kaplan-Meier estimator</span></span>
<span id="cb47-60"><a href="modeling-lifetimes.html#cb47-60" aria-hidden="true" tabindex="-1"></a><span class="co">#MALE</span></span>
<span id="cb47-61"><a href="modeling-lifetimes.html#cb47-61" aria-hidden="true" tabindex="-1"></a>sexX <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># 0 for female, 1 for male</span></span>
<span id="cb47-62"><a href="modeling-lifetimes.html#cb47-62" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Sex<span class="sc">==</span>sexX),]</span>
<span id="cb47-63"><a href="modeling-lifetimes.html#cb47-63" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb47-64"><a href="modeling-lifetimes.html#cb47-64" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb47-65"><a href="modeling-lifetimes.html#cb47-65" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb47-66"><a href="modeling-lifetimes.html#cb47-66" aria-hidden="true" tabindex="-1"></a>fit_KM_30_M <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;kaplan-meier&#39;</span>)</span>
<span id="cb47-67"><a href="modeling-lifetimes.html#cb47-67" aria-hidden="true" tabindex="-1"></a><span class="co">#AGGREGATE</span></span>
<span id="cb47-68"><a href="modeling-lifetimes.html#cb47-68" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX),]</span>
<span id="cb47-69"><a href="modeling-lifetimes.html#cb47-69" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb47-70"><a href="modeling-lifetimes.html#cb47-70" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb47-71"><a href="modeling-lifetimes.html#cb47-71" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb47-72"><a href="modeling-lifetimes.html#cb47-72" aria-hidden="true" tabindex="-1"></a>fit_KM_30_All <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;kaplan-meier&#39;</span>)</span>
<span id="cb47-73"><a href="modeling-lifetimes.html#cb47-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-74"><a href="modeling-lifetimes.html#cb47-74" aria-hidden="true" tabindex="-1"></a><span class="co"># survival function plots</span></span>
<span id="cb47-75"><a href="modeling-lifetimes.html#cb47-75" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb47-76"><a href="modeling-lifetimes.html#cb47-76" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fit_KM_30_F<span class="sc">$</span>surv<span class="sc">~</span>fit_KM_30_F<span class="sc">$</span>time,<span class="at">type=</span><span class="st">&quot;l&quot;</span>, <span class="at">main=</span><span class="st">&quot;Kaplan–Meier Estimates at age 30&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Time&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Survival Function&quot;</span>,<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb47-77"><a href="modeling-lifetimes.html#cb47-77" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(fit_KM_30_M<span class="sc">$</span>surv<span class="sc">~</span>fit_KM_30_M<span class="sc">$</span>time,<span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb47-78"><a href="modeling-lifetimes.html#cb47-78" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(fit_KM_30_All<span class="sc">$</span>surv<span class="sc">~</span>fit_KM_30_All<span class="sc">$</span>time,<span class="at">col =</span> <span class="st">&quot;green&quot;</span>)</span>
<span id="cb47-79"><a href="modeling-lifetimes.html#cb47-79" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fit_KM_40_F<span class="sc">$</span>surv<span class="sc">~</span>fit_KM_40_F<span class="sc">$</span>time,<span class="at">type=</span><span class="st">&quot;l&quot;</span>, <span class="at">main=</span><span class="st">&quot;Kaplan–Meier Estimates at age 40&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Time&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Survival Function&quot;</span>,<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb47-80"><a href="modeling-lifetimes.html#cb47-80" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(fit_KM_40_M<span class="sc">$</span>surv<span class="sc">~</span>fit_KM_40_M<span class="sc">$</span>time,<span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb47-81"><a href="modeling-lifetimes.html#cb47-81" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(fit_KM_40_All<span class="sc">$</span>surv<span class="sc">~</span>fit_KM_40_All<span class="sc">$</span>time,<span class="at">col =</span> <span class="st">&quot;green&quot;</span>)</span>
<span id="cb47-82"><a href="modeling-lifetimes.html#cb47-82" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fit_KM_50_F<span class="sc">$</span>surv<span class="sc">~</span>fit_KM_50_F<span class="sc">$</span>time,<span class="at">type=</span><span class="st">&quot;l&quot;</span>, <span class="at">main=</span><span class="st">&quot;Kaplan–Meier Estimates at age 50&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Time&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Survival Function&quot;</span>,<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb47-83"><a href="modeling-lifetimes.html#cb47-83" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(fit_KM_50_M<span class="sc">$</span>surv<span class="sc">~</span>fit_KM_50_M<span class="sc">$</span>time,<span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb47-84"><a href="modeling-lifetimes.html#cb47-84" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(fit_KM_50_All<span class="sc">$</span>surv<span class="sc">~</span>fit_KM_50_All<span class="sc">$</span>time,<span class="at">col =</span> <span class="st">&quot;green&quot;</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:KaplanMeierPlotsa"></span>
<img src="LifeCon_files/figure-html/KaplanMeierPlotsa-1.png" alt="Kaplan-Meier survival function estimates for an individual of age 30 (left), 40 (middle) and 50 (right) based on the insurer dataset – curves are in blue (female), red (male) and green (all genders)" width="864" />
<p class="caption">
Figure 2.19: <strong>Kaplan-Meier survival function estimates for an individual of age 30 (left), 40 (middle) and 50 (right) based on the insurer dataset – curves are in blue (female), red (male) and green (all genders)</strong>
</p>
</div>
<p>In line with results from the aggregate mortality data, Figure <a href="#fig:KMFigs"><strong>??</strong></a> tells us that females are more likely to survive over the same period than males. The curves for all genders are closer to the equivalent curves based on the male data, since the synthetic dataset has <span class="math inline">\(70\%\)</span> male policyholders, as explained in the data summary given in Section <a href="modeling-lifetimes.html#S:IndivMortData">2.1.3</a>.</p>
</div>
<div id="nelson-aalen" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Nelson-Aalen</h3>
<p>The Nelson-Aalen estimator provides a non-parametric estimat of the cumulative hazard rate function
<span class="math display">\[
A_x(t) =\int_0^t \mu_x(s)\,ds.
\]</span>
We have for the cumulative hazard rate:
<span class="math display">\[
S_x(t+1) = \exp\{-A_x(t+1)\}=S_x(t)\,\exp\{-(A_x(t+1)-A_x(t))\}=S_x(t)\,\frac{l_{x+t+1}}{l_{x+t}}.
\]</span></p>
<p>To provide intuition for the Nelson-Aalen estimator, recall that for `small’ arguments, the exponential function <span class="math inline">\(e^y \approx 1 + y\)</span>. Therefore, we have:
<span class="math display">\[
1 - (A_x(t+1)-A_x(t)) \approx \frac{l_{x+t+1}}{l_{x+t}} \Longrightarrow A_x(t+1) \approx A_x(t) + \frac{d_{x+t}}{l_{x+t}}.
\]</span>
However, in analogy to the derivation of the Kaplan-Meier estimat, the Nelson-Aalen estimator takes into account that in the context of right-censored individual mortality data, potential exposures at each death time may be different. That is, <span class="math inline">\(l_{x+t}\)</span> in this equation should be interpreted as the total number of individuals at risk of dying at time <span class="math inline">\(x+t\)</span>. This number will change across time because individuals die <em>and</em> because of right-censoring, so indviduals falling outside of the observation window. And, again, the estimator updates whenever there is a death event. The esimator thus amounts to nothing else than the sum of deaths over exposures. Again we refer to <a href="https://openacttexts.github.io/Loss-Data-Analytics/C-ModelSelection.html#nonparametric-estimation-using-modified-data">Section 4.3.2 in Loss Data Analystics</a> for more information.</p>
<p>Using the library <code>survival</code>, we can also obtain Nelson-Aalen estimates of the survival curve. We estimate survival curves based on our insurer dataset from Section <a href="modeling-lifetimes.html#S:IndivMortData">2.1.3</a> for females and ages 30, 40, and 50.</p>
<h5 style="text-align: center;">
<a id="displayCode.Nelson-Aalen Estimates of Survival Curves for ages 30, 40, 50" href="javascript:togglecode('toggleCode.Nelson-Aalen Estimates of Survival Curves for ages 30, 40, 50','displayCode.Nelson-Aalen Estimates of Survival Curves for ages 30, 40, 50');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.Nelson-Aalen Estimates of Survival Curves for ages 30, 40, 50" style="display: none">
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="modeling-lifetimes.html#cb48-1" aria-hidden="true" tabindex="-1"></a>sexX <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co"># 0 for female, 1 for male</span></span>
<span id="cb48-2"><a href="modeling-lifetimes.html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co"># computations for individuals aged 50 </span></span>
<span id="cb48-3"><a href="modeling-lifetimes.html#cb48-3" aria-hidden="true" tabindex="-1"></a>ageX <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb48-4"><a href="modeling-lifetimes.html#cb48-4" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Sex<span class="sc">==</span>sexX),]</span>
<span id="cb48-5"><a href="modeling-lifetimes.html#cb48-5" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb48-6"><a href="modeling-lifetimes.html#cb48-6" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb48-7"><a href="modeling-lifetimes.html#cb48-7" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb48-8"><a href="modeling-lifetimes.html#cb48-8" aria-hidden="true" tabindex="-1"></a>fit_NA_50_F <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;fleming-harrington&#39;</span>) <span class="co"># Nelson–Aalen estimator</span></span>
<span id="cb48-9"><a href="modeling-lifetimes.html#cb48-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-10"><a href="modeling-lifetimes.html#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="co"># computations for individuals aged 40</span></span>
<span id="cb48-11"><a href="modeling-lifetimes.html#cb48-11" aria-hidden="true" tabindex="-1"></a>ageX <span class="ot">&lt;-</span> <span class="dv">40</span></span>
<span id="cb48-12"><a href="modeling-lifetimes.html#cb48-12" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Sex<span class="sc">==</span>sexX),]</span>
<span id="cb48-13"><a href="modeling-lifetimes.html#cb48-13" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb48-14"><a href="modeling-lifetimes.html#cb48-14" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb48-15"><a href="modeling-lifetimes.html#cb48-15" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb48-16"><a href="modeling-lifetimes.html#cb48-16" aria-hidden="true" tabindex="-1"></a>fit_NA_40_F <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;fleming-harrington&#39;</span>) <span class="co"># Nelson–Aalen estimator</span></span>
<span id="cb48-17"><a href="modeling-lifetimes.html#cb48-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-18"><a href="modeling-lifetimes.html#cb48-18" aria-hidden="true" tabindex="-1"></a><span class="co"># computations for individuals aged 30</span></span>
<span id="cb48-19"><a href="modeling-lifetimes.html#cb48-19" aria-hidden="true" tabindex="-1"></a>ageX <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb48-20"><a href="modeling-lifetimes.html#cb48-20" aria-hidden="true" tabindex="-1"></a>setdata <span class="ot">&lt;-</span> insdatatmp[<span class="fu">which</span>(insdatatmp<span class="sc">$</span>Age<span class="sc">+</span><span class="fu">floor</span>(insdatatmp<span class="sc">$</span>Time_of_death) <span class="sc">&gt;=</span>ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Age <span class="sc">&lt;=</span> ageX <span class="sc">&amp;</span> insdatatmp<span class="sc">$</span>Sex<span class="sc">==</span>sexX),]</span>
<span id="cb48-21"><a href="modeling-lifetimes.html#cb48-21" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(setdata))</span>
<span id="cb48-22"><a href="modeling-lifetimes.html#cb48-22" aria-hidden="true" tabindex="-1"></a>status<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">*</span>(setdata<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>) <span class="co"># 0 for Censored data observations (i.e. with no claims and Claim==&quot;No&quot;), 1 for non-Censored observations -- setting for Survfit function</span></span>
<span id="cb48-23"><a href="modeling-lifetimes.html#cb48-23" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> setdata<span class="sc">$</span>Time_of_death <span class="sc">-</span> (<span class="fu">rep</span>(ageX,<span class="fu">nrow</span>(setdata))<span class="sc">-</span>setdata<span class="sc">$</span>Age)</span>
<span id="cb48-24"><a href="modeling-lifetimes.html#cb48-24" aria-hidden="true" tabindex="-1"></a>fit_NA_30_F <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">type=</span><span class="st">&#39;fleming-harrington&#39;</span>) <span class="co"># Nelson–Aalen estimator</span></span>
<span id="cb48-25"><a href="modeling-lifetimes.html#cb48-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-26"><a href="modeling-lifetimes.html#cb48-26" aria-hidden="true" tabindex="-1"></a><span class="co"># survival function plots</span></span>
<span id="cb48-27"><a href="modeling-lifetimes.html#cb48-27" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb48-28"><a href="modeling-lifetimes.html#cb48-28" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fit_NA_30_F<span class="sc">$</span>surv<span class="sc">~</span>fit_NA_30_F<span class="sc">$</span>time,<span class="at">type=</span><span class="st">&quot;l&quot;</span>, <span class="at">main=</span><span class="st">&quot;Nelson-Aalen Estimates at age 30&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Time&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Survival Function&quot;</span>,<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb48-29"><a href="modeling-lifetimes.html#cb48-29" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fit_NA_40_F<span class="sc">$</span>surv<span class="sc">~</span>fit_NA_40_F<span class="sc">$</span>time,<span class="at">type=</span><span class="st">&quot;l&quot;</span>, <span class="at">main=</span><span class="st">&quot;Nelson-Aalen Estimates at age 40&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Time&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Survival Function&quot;</span>,<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb48-30"><a href="modeling-lifetimes.html#cb48-30" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fit_NA_50_F<span class="sc">$</span>surv<span class="sc">~</span>fit_NA_50_F<span class="sc">$</span>time,<span class="at">type=</span><span class="st">&quot;l&quot;</span>, <span class="at">main=</span><span class="st">&quot;Nelson-Aalen Estimates at age 50&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Time&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Survival Function&quot;</span>,<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:NelsonAalenPlotsa"></span>
<img src="LifeCon_files/figure-html/NelsonAalenPlotsa-1.png" alt="Nelson-Aalen survival function estimates for females of age 30 (left), 40 (middle) and 50 (right) based on the insurer dataset" width="864" />
<p class="caption">
Figure 2.20: <strong>Nelson-Aalen survival function estimates for females of age 30 (left), 40 (middle) and 50 (right) based on the insurer dataset</strong>
</p>
</div>
<p>Given that the dataset has a large sample size, the differences between the <em>Kaplan-Meier</em> and <em>Nelson-Aalen</em> estimates are insignificant; this is not surprising, since the two estimators are asymptotically equivalent – for large samples, the estimators are supposed to provide the same results.</p>
<p>Since the <em>Kaplan-Meier</em> and <em>Nelson-Aalen</em> estimators provide a full non-parametric estimate of the survival curve, we can directly use it for evaluating quantities depending on the distribution of the lifetime random variable. In principle, there is no need to discretize it to compile a life table – although that’s certainly possible. To reiterate, the approach in the application is to assemble a suitable set of lives and determine a survival function viewing these lives as a (sufficiently) homogeneous population. In the next section, we consider survival analysis models that explicitly account for the heterogeneity of individuals’ exposures by accounting for their characteristics.</p>
</div>
</div>
<div id="S:SurvReg" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Conditional models: Survival regression</h2>
<p>All models introduced in the foregoing sections <a href="modeling-lifetimes.html#S:AnalMortLaws">2.3</a> (analytic mortality laws), <a href="modeling-lifetimes.html#S:LifeTab">2.4</a> (life tables based on mortality count data), and <a href="modeling-lifetimes.html#S:NonParamSurv">2.5</a> (non-parametric estimates of the survival curve based on a homogeneous population) are based on the age-only model that – with some qualifications (see, e.g., Section <a href="modeling-lifetimes.html#S:LifeTabMImpr">2.4.5</a>). However, as introduced in Section <a href="modeling-lifetimes.html#S:IndivMortData">2.1.3</a>, individual <em>survival</em> or <em>event</em> data that an insurance company has available consists of <em>features</em> or <em>covariates</em> <span class="math inline">\({\bf{x}}_i\)</span> for each individual <span class="math inline">\(i\)</span>, plus the death time <span class="math inline">\(T_i\)</span> if the individual had died or – if that’s not the case – the information that the individual is still alive. Hence, a proximate approach is to directly model the individual lifetime distribution <span class="math inline">\(T_{{\bf{x}}_i}\)</span>, i.e., to explicitly account for the heterogeneity in the individuals’ exposures. This can be accomplished via so-called <em>survival regression</em> models that predict the distribution of <span class="math inline">\(T_{{\bf{x}}}\)</span> based on a set of features <span class="math inline">\({\bf{x}}_i\)</span> and death times <span class="math inline">\(T_i\)</span>, <span class="math inline">\(i=1,2,\cdots,N\)</span>.</p>
<p>Our objective is to introduce some key ideas and to derive workable models. Therefore, we primarily focus on the most popular model – namely the proportional hazard (Cox) model – and consider linear models in the features. A detailed introduction of this rich set of models is beyond the scope of this text, although we note that in principle more sophisticated models can be used. We refer to the Notes and Comments section at the end of this chapter for references that go beyond our introduction.</p>
<p>We start by introducing the Cox proportional hazard model in the first part. We apply it to our individual level mortality dataset from Section <a href="modeling-lifetimes.html#S:IndivMortData">2.1.3</a> in the second part. And, finally, we show how to produce different models and life tables on the basis of the regression model.</p>
<div id="the-cox-proportional-hazard-model" class="section level3" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> The Cox Proportional Hazard Model</h3>
<p>The task at hand is to formulate a model for the <em>individual</em> survival function <span class="math inline">\(S_{\bf{x}}(\cdot)\)</span> given a feature vector <span class="math inline">\(\bf{x}\)</span>. Concretely, this may mean specifying a parametric model, i.e., to posit that <span class="math inline">\(S_{\bf{x}}(t)\)</span> takes a certain functional form of time <span class="math inline">\(t\)</span>, the features <span class="math inline">\(\bf{x}\)</span>, and certain parameters, say <span class="math inline">\(\beta\)</span>. We can then try to estimate the parameters based on our data <span class="math inline">\(({\bf{x}}_i,T_i)_{1\leq i \leq N}\)</span>. However, a key challenge are the boundedness and monotonicity constraints for the survival function <span class="math inline">\(S_{\bf{x}}(\cdot)\)</span>.</p>
<p>Therefore, it is common in survival analysis to model the <em>individual</em> force of mortality (or hazard function) <span class="math inline">\(\mu_{\bf{x}}(\cdot)\)</span>. In principle, <span class="math inline">\(\mu_{\bf{x}}(t)\)</span> can take any positive number, although as we had discussed in Section @ref{S:AnalMortLaws} a human’s force of mortality typically increases in age. Hence, a common approach in survival analysis is to posit that <span class="math inline">\(\mu_{\bf{x}}(t)\)</span> takes a certain functional form of time <span class="math inline">\(t\)</span>, the features <span class="math inline">\(\bf{x}\)</span>, and parameters <span class="math inline">\(\beta\)</span>, and then try to estimate the parameters based on our data <span class="math inline">\(({\bf{x}}_i,T_i)_{1\leq i \leq N}\)</span>.</p>
<p>Different functional forms are possible. For example, additive survvial regression models specify <span class="math inline">\(\mu_{\bf{x}}(t)\)</span> as a linear combination of the features, similarly to linear regression models. However, the most popular approach – due to its tractability and fit in many situations – is the so-called <em>Cox proportional hazard model</em>. In its simplest form, it assumes the force of mortality takes the form:
<span class="math display">\[
\mu_{\bf{x}}(t)=\beta_0(t) \times \exp\left\{ \beta&#39; \,{\bf{x}}\right\},
\]</span>
in which <span class="math inline">\(\beta\)</span> is the vector of regression parameters. The non-parametric term <span class="math inline">\(\beta_0(t)\)</span> is also referred to as the  parameter when the emphasis is on the estimation of the regression coefficients. It is also possible to allow for time-varying covariates:
<span class="math display">\[
\mu_{\bf{x}}(t) = \beta_0(t)\times\exp\left\{\beta&#39;\, {\bf{x}}(t)\right\},
\]</span>
where <span class="math inline">\({\bf{x}}(t)\)</span> are (possibly) time-varying covariates. Since the covariates are given, we in order to obtain (an estimate for) <span class="math inline">\(\mu_{\bf{x}}(t)\)</span>, we need to estimate the parameter vector <span class="math inline">\(\beta\)</span>. We outline the estimation process below, although the details are not crucial for the material that follows.</p>
<h5 style="text-align: center;">
<a id="displayTheory.EstimationCoxModel" href="javascript:toggleTheory('toggleTheory.EstimationCoxModel','displayCode.EstimationCoxModel');"><i><strong>Estimation of the Regression Parameters in the Proportional Hazards Model</strong></i></a>
</h5>
<div id="toggleTheory.EstimationCoxModel" style="display: none">
<p>For a set of <span class="math inline">\(N\)</span> independent subjects, define the observation time <span class="math inline">\(X_i = \min\{T_i, C_i\}\)</span>, <span class="math inline">\(i\in\{1,\ldots,n\}\)</span>, where <span class="math inline">\(T_i\)</span> is time until death and <span class="math inline">\(C_i\)</span> is the censoring time (time until end of observation period) for subject <span class="math inline">\(i\)</span>. The indicator for observed death of subject <span class="math inline">\(i\)</span> is defined as <span class="math inline">\(\Delta_i = 1_{\{T_i &lt; C_i\}}\)</span>. We further define the <span class="math inline">\(i\)</span>-th at-risk and observed-death counting processes as <span class="math inline">\(Y_i(t)=1_{\{X_i\ge t\}}\)</span> and <span class="math inline">\(N_i(t)=1_{\{T_i\le t,\Delta_i=1\}}\)</span>, respectively.</p>
<p>The likelihood-based estimation relies on a similar idea as the Nelson-Aalen estimator from Section <a href="modeling-lifetimes.html#S:NonParamSurv">2.5</a>: We determine parameters such that the observed death of individual <span class="math inline">\(i\)</span> at time <span class="math inline">\(T_i\)</span> is most likely amount all possible death. More precisely, the likelihood for individual <span class="math inline">\(i\)</span> is
<span class="math display">\[
L_i(\beta) = \frac{\mu_{\bf{x_i}}(T_i)}{\sum_{j=1}^N Y_j(T_i)\,\mu_{\bf{x_j}}(T_i)}=\frac{\exp\left\{\beta&#39;\, {\bf{x}_i}(T_i)\right\}}{\sum_{j=1}^N Y_j(T_i)\,\exp\left\{\beta&#39;\, {\bf{x}}_j(T_i)\right\}},
\]</span>
and the total likelihood <span class="math inline">\(L(\beta) = \prod_i L_i(\beta)\)</span>. The partial log-likelihood function can then be expressed as:
<span class="math display">\[
l(\beta) = \sum_{i=1}^N \Delta_i\left\{\beta&#39;\, {\bf{x}}_i(T_i) - \ln\left(\sum_{j=1}^n Y_j(T_i)\exp\left\{\beta&#39;\, {\bf{x}}_j(T_i)\right\} \right)  \right\}.
\]</span>
Differentiating yields the (partial-likelihood) score function:
<span class="math display">\[\begin{eqnarray*}
U(\beta) = \frac{\partial l(\beta)}{\partial \beta} &amp; = &amp; \sum_{i=1}^N \Delta_i\Bigg\{ {\bf{x}}_i(T_i) - \underbrace{\frac{\sum_{j=1}^N Y_j(T_i)\,{\bf{x}}_j(T_i)\exp\{\beta&#39;\, {\bf{x}}_j(T_i)\}}{\sum_{j=1}^n Y_j(T_i)\exp\{\beta&#39;\, {\bf{x}}_j(T_i)\}}}_{\bar{Z}(T_i)}  \Bigg\} \\
&amp; = &amp; \sum_{i=1}^n \int_0^{\infty} \left[ {\bf{x}}_i(t) - \bar{Z}(t) \right] dN_i(t).
\end{eqnarray*}\]</span>
The parameter vector is then estimated as the solution to the score equation <span class="math inline">\(U(\beta)=0\)</span>, without estimating the nuisance parameter <span class="math inline">\(\beta_0(t)\)</span>.</p>
</div>
</div>
<div id="cox-models-based-on-life-insurer-data" class="section level3" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Cox Models Based on Life Insurer Data</h3>
<p>We estimate proportional hazard models based on our dataset from Section <a href="modeling-lifetimes.html#S:IndivMortData">2.1.3</a>. We start with a simple model that only includes age and sex:
<span class="math display">\[
\mu_{(x_0,s)}(t) = \beta_0(t)\,\exp\{\beta_{\text{age}}(x_0+t)+\beta_{\text{male}}\,1_{\{s=\text{male}\}}\}=\underbrace{\beta_0(t)\,e^{\beta_{\text{age}}\,t}}_{\tilde{\beta}_0(t)}\,\exp\{\beta_{\text{age}}\,x_0+\beta_{\text{male}}\,1_{\{s=\text{male}\}}\}.
\]</span>
In particular, since age enters the equation linearly, although age varies with time, the time variation will be absorbed in the nuisance parameter <span class="math inline">\(\tilde{\beta}_0(t)\)</span> so we don’t have to account for the time-varying nature of age.</p>
<p>Running the model is straightforward relying on the library <code>survival</code>, where we only have to assure that we label the censored vs. non-censored event times appropriately:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="modeling-lifetimes.html#cb49-1" aria-hidden="true" tabindex="-1"></a>ins_data <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;Data/SyntheticInsurerData.csv&quot;</span>,<span class="at">data.table=</span><span class="cn">FALSE</span>)</span>
<span id="cb49-2"><a href="modeling-lifetimes.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb49-3"><a href="modeling-lifetimes.html#cb49-3" aria-hidden="true" tabindex="-1"></a>CensorTime <span class="ot">&lt;-</span> (<span class="dv">781</span><span class="sc">-</span>ins_data<span class="sc">$</span>Month_of_Sale)<span class="sc">/</span><span class="dv">12</span></span>
<span id="cb49-4"><a href="modeling-lifetimes.html#cb49-4" aria-hidden="true" tabindex="-1"></a>ins_data<span class="sc">$</span>EventTime <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">160781</span>)</span>
<span id="cb49-5"><a href="modeling-lifetimes.html#cb49-5" aria-hidden="true" tabindex="-1"></a>ins_data<span class="sc">$</span>EventTime[<span class="fu">is.na</span>(ins_data<span class="sc">$</span>Time_of_death)] <span class="ot">&lt;-</span> CensorTime[<span class="fu">is.na</span>(ins_data<span class="sc">$</span>Time_of_death)]</span>
<span id="cb49-6"><a href="modeling-lifetimes.html#cb49-6" aria-hidden="true" tabindex="-1"></a>ins_data<span class="sc">$</span>EventTime[<span class="sc">!</span><span class="fu">is.na</span>(ins_data<span class="sc">$</span>Time_of_death)] <span class="ot">&lt;-</span> ins_data<span class="sc">$</span>Time_of_death[<span class="sc">!</span><span class="fu">is.na</span>(ins_data<span class="sc">$</span>Time_of_death)]</span>
<span id="cb49-7"><a href="modeling-lifetimes.html#cb49-7" aria-hidden="true" tabindex="-1"></a>ins_data<span class="sc">$</span>Claim <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">*</span>(ins_data<span class="sc">$</span>Claim <span class="sc">==</span> <span class="st">&quot;YES&quot;</span>)</span>
<span id="cb49-8"><a href="modeling-lifetimes.html#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="modeling-lifetimes.html#cb49-9" aria-hidden="true" tabindex="-1"></a>Cox_ph_1 <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(EventTime, Claim) <span class="sc">~</span> Age <span class="sc">+</span> Sex, <span class="at">data=</span>ins_data)</span>
<span id="cb49-10"><a href="modeling-lifetimes.html#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Cox_ph_1)</span></code></pre></div>
<pre><code>Call:
coxph(formula = Surv(EventTime, Claim) ~ Age + Sex, data = ins_data)

  n= 160781, number of events= 59382 

           coef   exp(coef)    se(coef)       z   Pr(&gt;|z|)    
Age 0.117981709 1.125223530 0.000469934 251.060 &lt; 2.22e-16 ***
Sex 0.390607312 1.477878055 0.009256317  42.199 &lt; 2.22e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

    exp(coef) exp(-coef) lower .95 upper .95
Age   1.12522   0.888712   1.12419   1.12626
Sex   1.47788   0.676646   1.45131   1.50493

Concordance= 0.812  (se = 0.001 )
Likelihood ratio test= 71813.2  on 2 df,   p=&lt;2e-16
Wald test            = 63529.2  on 2 df,   p=&lt;2e-16
Score (logrank) test = 72775.3  on 2 df,   p=&lt;2e-16</code></pre>
<p>We obtain positive coefficients for age and sex. Indeed, the coefficient is similar – though slightly larger – than the Gompertz coefficients <span class="math inline">\(c\)</span> in Section <a href="modeling-lifetimes.html#S:AnalMortLaws">2.3</a>. Note that this does not mean that mortality rates for this insured poulation, it just means that the increase in age is steeper. Indeed, a steeper, “hockey-stick” shaped mortality curve associated with a compression of mortality – sometimes referred to as <em>rectangularization</em> – for certain populations with higher life expectancies is not uncommon. We also observe a positive sign for the <em>Male</em> coefficient implying higher mortality for males, compared to females of the same age.</p>
<p>The key advantage of the proportional hazard model is that we can take into account all features. A model building process may contemplate the (statistical) significance of the different covariates. We may also probe whether a linear model is appropriate for the different features, or whether their influence is better captured via non-linear relationships. Furthermore, we may analyze whether interactions of the features are relevant. Different models can be compared based on the <em>Akaike information criterion</em> (AIC), where the objective is to determine a model with a low AIC:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="modeling-lifetimes.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">extractAIC</span>(Cox_ph_1)</span></code></pre></div>
<pre><code>[1]       2.00 1220422.68</code></pre>
<p>We leave the exploration of different models to the interested reader, and cut immediately to the model that performs best. This model includes all features, but no interaction or non-linear terms. In analogy to the simple model above, age and potential time (<span class="math inline">\(t\)</span>) effects are absorbed in the nuisance term, so that we do not have to explicitly account for time-varying covariates.</p>
<p>Again, we run the model relying on the library <code>survival</code>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="modeling-lifetimes.html#cb53-1" aria-hidden="true" tabindex="-1"></a>Cox_ph_2 <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(EventTime, Claim) <span class="sc">~</span> Month_of_Sale <span class="sc">+</span> Age <span class="sc">+</span> Sex  <span class="sc">+</span> BloodPressure <span class="sc">+</span></span>
<span id="cb53-2"><a href="modeling-lifetimes.html#cb53-2" aria-hidden="true" tabindex="-1"></a>                  Smoking <span class="sc">+</span> (BMI<span class="sc">&gt;</span><span class="dv">30</span>) , <span class="at">data=</span>ins_data)</span>
<span id="cb53-3"><a href="modeling-lifetimes.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Cox_ph_2)</span></code></pre></div>
<pre><code>Call:
coxph(formula = Surv(EventTime, Claim) ~ Month_of_Sale + Age + 
    Sex + BloodPressure + Smoking + (BMI &gt; 30), data = ins_data)

  n= 160781, number of events= 59382 

                       coef     exp(coef)      se(coef)        z   Pr(&gt;|z|)    
Month_of_Sale -0.0010889204  0.9989116723  0.0000327369 -33.2628 &lt; 2.22e-16 ***
Age            0.1178051484  1.1250248771  0.0005214675 225.9108 &lt; 2.22e-16 ***
Sex            0.3991615411  1.4905743882  0.0092796785  43.0146 &lt; 2.22e-16 ***
BloodPressure  0.0162349216  1.0163674240  0.0003058399  53.0831 &lt; 2.22e-16 ***
Smoking        0.7832951724  2.1886724491  0.0085781538  91.3128 &lt; 2.22e-16 ***
BMI &gt; 30TRUE   0.2736998514  1.3148201015  0.0149480591  18.3101 &lt; 2.22e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

              exp(coef) exp(-coef) lower .95 upper .95
Month_of_Sale  0.998912   1.001090  0.998848  0.998976
Age            1.125025   0.888869  1.123876  1.126175
Sex            1.490574   0.670882  1.463709  1.517933
BloodPressure  1.016367   0.983896  1.015758  1.016977
Smoking        2.188672   0.456898  2.152182  2.225781
BMI &gt; 30TRUE   1.314820   0.760560  1.276858  1.353911

Concordance= 0.828  (se = 0.001 )
Likelihood ratio test= 84426.5  on 6 df,   p=&lt;2e-16
Wald test            = 71241.8  on 6 df,   p=&lt;2e-16
Score (logrank) test = 82479.9  on 6 df,   p=&lt;2e-16</code></pre>
<p>We observe that all variables are highly significant. The coefficients for age and sex are similar as in the simpler model above. Similarly, high blood pressure, smoking, and a higher blood pressure lead to a higher mortality, whereas later sales are associated with a lower mortality. The latter amounts to a negative trend in mortality, or in other words increasing longevity over time.</p>
<p>As a key application, we can now produce survival curves for a given set of covariates. We consider survival curves for age 75 and different genders and smoking status, and survival curves for for 60-year old feamess with different BMI and blood pressure levels. We consider all of these at the last month of sales in our dataset.</p>
<h5 style="text-align: center;">
<a id="displayCode.Survival Curves based on the Cox Model" href="javascript:togglecode('toggleCode.Survival Curves based on the Cox Model','displayCode.Survival Curves based on the Cox Model');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.Survival Curves based on the Cox Model" style="display: none">
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="modeling-lifetimes.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb55-2"><a href="modeling-lifetimes.html#cb55-2" aria-hidden="true" tabindex="-1"></a>Survfunction <span class="ot">&lt;-</span> <span class="cf">function</span>(Month_of_Sale, Age, <span class="at">Sex=</span><span class="dv">0</span>, <span class="at">Smoking=</span><span class="dv">0</span>, <span class="at">BMI=</span><span class="dv">25</span>, <span class="at">BloodPressure=</span><span class="dv">120</span>){</span>
<span id="cb55-3"><a href="modeling-lifetimes.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  Claim <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb55-4"><a href="modeling-lifetimes.html#cb55-4" aria-hidden="true" tabindex="-1"></a>  EventTime <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb55-5"><a href="modeling-lifetimes.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  sfun <span class="ot">&lt;-</span> <span class="fu">survfit</span>(Cox_ph_2,<span class="at">newdata =</span> <span class="fu">data.frame</span>(Month_of_Sale,Age,Sex,Smoking,BMI,BloodPressure,Claim,EventTime))</span>
<span id="cb55-6"><a href="modeling-lifetimes.html#cb55-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-7"><a href="modeling-lifetimes.html#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="modeling-lifetimes.html#cb55-8" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">Survfunction</span>(<span class="dv">780</span>,<span class="dv">75</span>)</span>
<span id="cb55-9"><a href="modeling-lifetimes.html#cb55-9" aria-hidden="true" tabindex="-1"></a>s2 <span class="ot">&lt;-</span> <span class="fu">Survfunction</span>(<span class="dv">780</span>,<span class="dv">75</span>, <span class="at">Smoking=</span><span class="dv">1</span>)</span>
<span id="cb55-10"><a href="modeling-lifetimes.html#cb55-10" aria-hidden="true" tabindex="-1"></a>s3 <span class="ot">&lt;-</span> <span class="fu">Survfunction</span>(<span class="dv">780</span>,<span class="dv">75</span>, <span class="at">Sex =</span> <span class="dv">1</span>)</span>
<span id="cb55-11"><a href="modeling-lifetimes.html#cb55-11" aria-hidden="true" tabindex="-1"></a>s4 <span class="ot">&lt;-</span> <span class="fu">Survfunction</span>(<span class="dv">780</span>,<span class="dv">75</span>, <span class="at">Sex =</span> <span class="dv">1</span>, <span class="at">Smoking=</span><span class="dv">1</span>)</span>
<span id="cb55-12"><a href="modeling-lifetimes.html#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(s,<span class="at">col=</span><span class="st">&quot;orange&quot;</span>,<span class="at">main=</span><span class="st">&quot;Suvival functions for 75-year olds&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Time&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Survival Function&quot;</span>)</span>
<span id="cb55-13"><a href="modeling-lifetimes.html#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(s2,<span class="at">col=</span><span class="st">&quot;red&quot;</span>)</span>
<span id="cb55-14"><a href="modeling-lifetimes.html#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(s3, <span class="at">col =</span> <span class="st">&quot;green&quot;</span>)</span>
<span id="cb55-15"><a href="modeling-lifetimes.html#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(s4, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb55-16"><a href="modeling-lifetimes.html#cb55-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-17"><a href="modeling-lifetimes.html#cb55-17" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">Survfunction</span>(<span class="dv">780</span>,<span class="dv">60</span>)</span>
<span id="cb55-18"><a href="modeling-lifetimes.html#cb55-18" aria-hidden="true" tabindex="-1"></a>s2 <span class="ot">&lt;-</span> <span class="fu">Survfunction</span>(<span class="dv">780</span>,<span class="dv">60</span>, <span class="at">BMI =</span> <span class="dv">30</span>, <span class="at">BloodPressure =</span> <span class="dv">140</span>)</span>
<span id="cb55-19"><a href="modeling-lifetimes.html#cb55-19" aria-hidden="true" tabindex="-1"></a>s3 <span class="ot">&lt;-</span> <span class="fu">Survfunction</span>(<span class="dv">780</span>,<span class="dv">60</span>, <span class="at">BMI =</span> <span class="dv">35</span>, <span class="at">BloodPressure =</span> <span class="dv">160</span>)</span>
<span id="cb55-20"><a href="modeling-lifetimes.html#cb55-20" aria-hidden="true" tabindex="-1"></a>s4 <span class="ot">&lt;-</span> <span class="fu">Survfunction</span>(<span class="dv">780</span>,<span class="dv">60</span>, <span class="at">BMI =</span> <span class="dv">40</span>, <span class="at">BloodPressure =</span> <span class="dv">180</span>)</span>
<span id="cb55-21"><a href="modeling-lifetimes.html#cb55-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(s,<span class="at">col=</span><span class="st">&quot;orange&quot;</span>,<span class="at">main=</span><span class="st">&quot;Suvival functions for 60-year olds&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Time&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Survival Function&quot;</span>)</span>
<span id="cb55-22"><a href="modeling-lifetimes.html#cb55-22" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(s2,<span class="at">col=</span><span class="st">&quot;red&quot;</span>)</span>
<span id="cb55-23"><a href="modeling-lifetimes.html#cb55-23" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(s3, <span class="at">col =</span> <span class="st">&quot;green&quot;</span>)</span>
<span id="cb55-24"><a href="modeling-lifetimes.html#cb55-24" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(s4, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:CoxPHPlotsa"></span>
<img src="LifeCon_files/figure-html/CoxPHPlotsa-1.png" alt="Survival functions for age 75 and different genders and smoking status (left), and survival curves for for 60-year old feamess with different BMI and blood pressure levels (right)" width="768" />
<p class="caption">
Figure 2.21: <strong>Survival functions for age 75 and different genders and smoking status (left), and survival curves for for 60-year old feamess with different BMI and blood pressure levels (right)</strong>
</p>
</div>
<p>The survival functions are shown including 95% confidence intervals. As is evident, the covariates substantially affect the survival functions. Indeed, while 75-year old females have better survival prospects than males (orange vs. green curve on the left-hand side), female smokers are worse off than male non-smokers (green vs. red curve on the left-hand side) – while male smokers have the bleakest survival prospects (blue curve on the left-hand side). Similarly, for the 60-year old females, individuals with the low BMI and low blood pressure with a median future lifetime of more than 30 years (orange curve on the right-hand side), whereas for the highest levels of BMI (40) and systolic blood pressure (180), the median future lifetime is less than 20 years (blue curve on the right-hand side). We notice the inframarginal decrease in the survival probabilities as the BMI exceeds 30.</p>
</div>
<div id="conditional-life-tables" class="section level3" number="2.6.3">
<h3><span class="header-section-number">2.6.3</span> Conditional Life Tables</h3>
<p>Recall that a life table is a discretized version of the survival function. Therefore, we can rely on the estimated survival function to generate a life table. We consider the example of a newly underwritten life in the month after the end of our dataset, for a 42-year-old non-smoking male with a BMI of 28 and a blood pressure of 127. We consider the discretized version of the survival function and determine annualized mortality probabilities <span class="math inline">\(q_{x+t}\)</span>, according to the formulas provides in Section <a href="modeling-lifetimes.html#Sec:ModelingDeaths">2.2</a>.</p>
<h5 style="text-align: center;">
<a id="displayCode.Mortality Probabilities for a 42-year-old male" href="javascript:togglecode('toggleCode.Mortality Probabilities for a 42-year-old male','displayCode.Mortality Probabilities for a 42-year-old male');"><i><strong>R Code For Figure</strong></i></a>
</h5>
<div id="toggleCode.Mortality Probabilities for a 42-year-old male" style="display: none">
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="modeling-lifetimes.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb56-2"><a href="modeling-lifetimes.html#cb56-2" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">Survfunction</span>(<span class="dv">781</span>,<span class="dv">42</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">28</span>,<span class="dv">127</span>)</span>
<span id="cb56-3"><a href="modeling-lifetimes.html#cb56-3" aria-hidden="true" tabindex="-1"></a>S_x_t <span class="ot">&lt;-</span> <span class="fu">summary</span>(s,<span class="at">times =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">68</span>)<span class="sc">$</span>surv</span>
<span id="cb56-4"><a href="modeling-lifetimes.html#cb56-4" aria-hidden="true" tabindex="-1"></a>q_x_t <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">64</span>)</span>
<span id="cb56-5"><a href="modeling-lifetimes.html#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">64</span>){</span>
<span id="cb56-6"><a href="modeling-lifetimes.html#cb56-6" aria-hidden="true" tabindex="-1"></a>  q_x_t[i] <span class="ot">&lt;-</span> (S_x_t[i] <span class="sc">-</span> S_x_t[i<span class="sc">+</span><span class="dv">1</span>])<span class="sc">/</span>S_x_t[i] </span>
<span id="cb56-7"><a href="modeling-lifetimes.html#cb56-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb56-8"><a href="modeling-lifetimes.html#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(q_x_t,<span class="at">main=</span><span class="st">&quot;Mortality probabilities for 42 + t&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;t&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;q_x+t&quot;</span>)</span>
<span id="cb56-9"><a href="modeling-lifetimes.html#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(q_x_t, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb56-10"><a href="modeling-lifetimes.html#cb56-10" aria-hidden="true" tabindex="-1"></a>xs <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">64</span></span>
<span id="cb56-11"><a href="modeling-lifetimes.html#cb56-11" aria-hidden="true" tabindex="-1"></a>q_x_t_smoothed <span class="ot">&lt;-</span> <span class="fu">predict</span>(<span class="fu">loess</span>(q_x_t<span class="sc">~</span>xs))</span>
<span id="cb56-12"><a href="modeling-lifetimes.html#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(q_x_t_smoothed, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
</div>

<div class="figure" style="text-align: center"><span id="fig:NewlyUnderwrittenLifeQxa"></span>
<img src="LifeCon_files/figure-html/NewlyUnderwrittenLifeQxa-1.png" alt="Mortality probabilities for a 42-year-old non-smoking male with a BMI of 28 and a blood pressure of 127." width="576" />
<p class="caption">
Figure 2.22: <strong>Mortality probabilities for a 42-year-old non-smoking male with a BMI of 28 and a blood pressure of 127.</strong>
</p>
</div>
<p>We notice that the raw mortality probabilities (dots and blue curve) show some irregularities, so we also prvovide a smoothed version based on a local regression fit (via <code>loess</code>). The survival function and the mortality probabilities can be used for actuarial calculations.</p>
<p>Life insurance policies have a complex benefit structure that requires knowledge upon the probability of paying the benefits besides many other risk modeling parameters. Policy pricing, meeting the regulatory requirements, and understanding the life portfolio risk performance are all actuarial evaluations that rely on these risk modeling parameters. Mortality risk plays an important role for all of these. In the coming chapters, we discuss how – given (an estimate of) the distribution of the future lifetime random variable <span class="math inline">\(T_{\bf{x}}\)</span> – we can perform these evaluations. In principle, any model discussed in this chapter can be used.</p>
<p>As we have seen, models of different degrees of sophistication are possible. What approach is adequate depends on the application in view. For instance, for statutory calculations governed by insurance regulation, often certain life tables are mandated that only account for a limited set of factors (sex, smoking status, etc.). In contrast, when pricing term life insurance policies, the underwriting process can be intricate and resulting information can be leveraged to quote a premium that closely reflects the adopted risk.</p>
</div>
</div>
<div id="notes-and-comments" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Notes and Comments</h2>
<p>Reference to Survival analysis textbooks</p>

<p><span class="math inline">\(\require{enclose}\)</span> <!-- Later equations only properly knit if this is beforehand once in the code --></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="C-SimpleBenefit.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
