<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Exercises | Life Contingencies: The Mathematics, Statistics, and Economics of Life Insurance</title>
  <meta name="description" content="This is an interactive, online, freely available text. - The online version will contain many interactive objects (quizzes, computer demonstrations, interactive graphs, video, and the like) to promote deeper learning. - A subset of the book will be available in pdf format for low-cost printing. - The online text will be available in multiple languages to promote access to a worldwide audience." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Exercises | Life Contingencies: The Mathematics, Statistics, and Economics of Life Insurance" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an interactive, online, freely available text. - The online version will contain many interactive objects (quizzes, computer demonstrations, interactive graphs, video, and the like) to promote deeper learning. - A subset of the book will be available in pdf format for low-cost printing. - The online text will be available in multiple languages to promote access to a worldwide audience." />
  <meta name="github-repo" content="https://github.com/OpenActTextDev" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Exercises | Life Contingencies: The Mathematics, Statistics, and Economics of Life Insurance" />
  
  <meta name="twitter:description" content="This is an interactive, online, freely available text. - The online version will contain many interactive objects (quizzes, computer demonstrations, interactive graphs, video, and the like) to promote deeper learning. - A subset of the book will be available in pdf format for low-cost printing. - The online text will be available in multiple languages to promote access to a worldwide audience." />
  

<meta name="author" content="An open text authored by the Actuarial Community" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="method-exercises.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script language="javascript">
function openTab(evt, tabName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
</script>

<script language="javascript">
function toggle(id1,id2) {
	var ele = document.getElementById(id1); var text = document.getElementById(id2);
	if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Solution";}
		else {ele.style.display = "block"; text.innerHTML = "Hide Solution";}}
</script>

<script language="javascript">
function togglecode(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show R Code";}
      else {ele.style.display = "block"; text.innerHTML = "Hide R Code";}}
</script>
<script language="javascript">
function toggleEX(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Example";}
      else {ele.style.display = "block"; text.innerHTML = "Hide Example";}}
</script>
<script language="javascript">
function toggleTheory(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Theory";}
      else {ele.style.display = "block"; text.innerHTML = "Hide Theory";}}
</script>

<script language="javascript">
function toggleDet(id1,id2) {
   var ele = document.getElementById(id1); var text = document.getElementById(id2);
   if (ele.style.display == "block") {ele.style.display = "none"; text.innerHTML = "Show Details";}
      else {ele.style.display = "block"; text.innerHTML = "Hide  Details";}}
</script>

<script language="javascript">
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
});
</script>

<script src=https://cdn.datacamp.com/datacamp-light-latest.min.js></script>

<script src="https://bossanova.uk/jspreadsheet/v4/jexcel.js"></script>
<link rel="stylesheet" href="https://bossanova.uk/jspreadsheet/v4/jexcel.css" type="text/css" />
<script src="https://jsuites.net/v4/jsuites.js"></script>
<link rel="stylesheet" href="https://jsuites.net/v4/jsuites.css" type="text/css" />


<script>
$(document).ready(function(){
    $('[data-toggle="popover"]').popover(); 
});
</script>

<style>
/* Rearrange console label */
.datacamp-exercise ol li, .datacamp-exercise ul li {
  margin-bottom: 0em !important;
}

/* Remove bullet marker */
.datacamp-exercise ol li::before, .datacamp-exercise ul li::before {
  content: '' !important;
}
</style>


<script language="javascript">
var submitAnswer = function() {

  var radios = document.getElementsByName('choice');
  var val= "";
  for (var i = 0, length = radios.length; i < length; i++) {
      if (radios[i].checked) {
         val = radios[i].value; 
         break;
       }
  }
  
  if (val == "" ) {
    alert('please select choice answer');
  } else if ( val == "Correct" ) {
    alert('Answer is correct !');
  } else {
    alert('Answer is wrong');
  }
};
</script>





<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HR3RQ92M9M"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HR3RQ92M9M');
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Life Contingencies</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#for-our-readers"><i class="fa fa-check"></i>For our Readers</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>1</b> Exercises</a><ul>
<li class="chapter" data-level="1.1" data-path="exercises.html"><a href="exercises.html#chapter-2-exercises"><i class="fa fa-check"></i><b>1.1</b> Chapter 2 Exercises</a></li>
<li class="chapter" data-level="1.2" data-path="exercises.html"><a href="exercises.html#chapter-3-exercises"><i class="fa fa-check"></i><b>1.2</b> Chapter 3 Exercises</a><ul>
<li class="chapter" data-level="1.2.1" data-path="exercises.html"><a href="exercises.html#on-your-own"><i class="fa fa-check"></i><b>1.2.1</b> On your Own</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="exercises.html"><a href="exercises.html#chapter-4-exercises"><i class="fa fa-check"></i><b>1.3</b> Chapter 4 Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="method-exercises.html"><a href="method-exercises.html"><i class="fa fa-check"></i><b>2</b> Method Exercises</a><ul>
<li class="chapter" data-level="2.1" data-path="method-exercises.html"><a href="method-exercises.html#chapter-2-method-exercises"><i class="fa fa-check"></i><b>2.1</b> Chapter 2 Method Exercises</a></li>
<li class="chapter" data-level="2.2" data-path="method-exercises.html"><a href="method-exercises.html#chapter-3-method-exercises"><i class="fa fa-check"></i><b>2.2</b> Chapter 3 Method Exercises</a></li>
<li class="chapter" data-level="2.3" data-path="method-exercises.html"><a href="method-exercises.html#chapter-5-method-exercises"><i class="fa fa-check"></i><b>2.3</b> Chapter 5 Method Exercises</a></li>
<li class="chapter" data-level="2.4" data-path="method-exercises.html"><a href="method-exercises.html#chapter-6-method-exercises"><i class="fa fa-check"></i><b>2.4</b> Chapter 6 Method Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html"><i class="fa fa-check"></i><b>3</b> Appendix: Data Dictionary</a><ul>
<li class="chapter" data-level="3.1" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#Sec:DataUSPoPCounts"><i class="fa fa-check"></i><b>3.1</b> United States Population Mortality Counts</a></li>
<li class="chapter" data-level="3.2" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#Sec:SyntheticInsData"><i class="fa fa-check"></i><b>3.2</b> Synthetic Insurer Data</a></li>
<li class="chapter" data-level="3.3" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#Sec:CanineMortality"><i class="fa fa-check"></i><b>3.3</b> Canine Mortality</a></li>
<li class="chapter" data-level="3.4" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#Sec:CanadianSelect"><i class="fa fa-check"></i><b>3.4</b> Canadian Female Select and Ultimate Mortality Table</a></li>
<li class="chapter" data-level="3.5" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#Sec:KoreanMortality"><i class="fa fa-check"></i><b>3.5</b> Korean Mortality by Insured Status</a><ul>
<li class="chapter" data-level="" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#korean-mortality---insured-lives"><i class="fa fa-check"></i>Korean Mortality - Insured Lives</a></li>
<li class="chapter" data-level="" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#korean-mortality---annuitants"><i class="fa fa-check"></i>Korean Mortality - Annuitants</a></li>
<li class="chapter" data-level="" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#korean-mortality---population"><i class="fa fa-check"></i>Korean Mortality - Population</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#Sec:MortalityCountry"><i class="fa fa-check"></i><b>3.6</b> Mortality by Country</a><ul>
<li class="chapter" data-level="" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#population-mortality---japan"><i class="fa fa-check"></i>Population Mortality - Japan</a></li>
<li class="chapter" data-level="" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#population-mortality---poland"><i class="fa fa-check"></i>Population Mortality - Poland</a></li>
<li class="chapter" data-level="" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#population-mortality---united-states"><i class="fa fa-check"></i>Population Mortality - United States</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#Sec:DataDisIncome"><i class="fa fa-check"></i><b>3.7</b> Disability Income</a><ul>
<li class="chapter" data-level="" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#disability-recovery-rates---male"><i class="fa fa-check"></i>Disability Recovery Rates - Male</a></li>
<li class="chapter" data-level="" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#disability-recovery-rates---female"><i class="fa fa-check"></i>Disability Recovery Rates - FeMale</a></li>
<li class="chapter" data-level="" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#death-and-disability-recovery-rates---male"><i class="fa fa-check"></i>Death and Disability Recovery Rates - Male</a></li>
<li class="chapter" data-level="" data-path="appendix-data-dictionary.html"><a href="appendix-data-dictionary.html#death-and-disability-recovery-rates---female"><i class="fa fa-check"></i>Death and Disability Recovery Rates - Female</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i>Bibliography</a></li>
<li class="divider"></li>
<li><a href="https://github.com/OpenActTextDev/LifeCon" target="blank">Life Contingencies on GitHub</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Life Contingencies: The Mathematics, Statistics, and Economics of Life Insurance</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exercises" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Exercises</h1>
<p><span class="math inline">\(\require{enclose}\)</span>
<!-- Later equations only properly knit if this is beforehand once in the code $\require{enclose}$ --></p>
<div id="chapter-2-exercises" class="section level2">
<h2><span class="header-section-number">1.1</span> Chapter 2 Exercises</h2>
<p><strong>Exercise 2.3.1. Gompertz-Makeham and Survival Probabilities.</strong> Recall the U.S. Life Expectancies introduced in Section 2.1:</p>
<table>
<caption><span id="tab:unnamed-chunk-5">Table 1.1: </span>Life Expectancies From 2017 U.S. National Vital Statistics</caption>
<thead>
<tr class="header">
<th align="right">Age</th>
<th align="right">Total</th>
<th align="right">Male</th>
<th align="right">Female</th>
<th align="right">Hispanic..Total</th>
<th align="right">Hispanic..Male</th>
<th align="right">Hispanic..Female</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">78.6</td>
<td align="right">76.1</td>
<td align="right">81.1</td>
<td align="right">81.8</td>
<td align="right">79.1</td>
<td align="right">84.3</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="right">59.4</td>
<td align="right">57.0</td>
<td align="right">61.8</td>
<td align="right">62.5</td>
<td align="right">59.9</td>
<td align="right">64.9</td>
</tr>
<tr class="odd">
<td align="right">40</td>
<td align="right">40.7</td>
<td align="right">38.7</td>
<td align="right">42.6</td>
<td align="right">43.5</td>
<td align="right">41.2</td>
<td align="right">45.5</td>
</tr>
<tr class="even">
<td align="right">60</td>
<td align="right">23.3</td>
<td align="right">21.7</td>
<td align="right">24.7</td>
<td align="right">25.5</td>
<td align="right">23.6</td>
<td align="right">27.0</td>
</tr>
<tr class="odd">
<td align="right">80</td>
<td align="right">9.2</td>
<td align="right">8.4</td>
<td align="right">9.8</td>
<td align="right">10.5</td>
<td align="right">9.4</td>
<td align="right">11.1</td>
</tr>
</tbody>
</table>
<p>Section 2.3 used these data to fit a Gompertz-Makeham distribution for female lives; in this exercise, we repeat this analysis but for male lives. To this end,</p>
<ol style="list-style-type: lower-alpha">
<li>Fit a Gompertz-Makeham model to the provided US Male life expectancies.</li>
<li>Plot the resulting force of mortality and the survival function, compare to the one for U.S. Females from Section 2.3.</li>
<li>Determine the resulting model to determine the probabilities that a 20 year old survives to age 60, 70, and 80: <span class="math inline">\(~_{40}p_{20}\)</span>, <span class="math inline">\(~_{50}p_{20}\)</span>, and <span class="math inline">\(~_{60}p_{20}\)</span>.</li>
</ol>
<h5 style="text-align: center;">
<a id="displayCode.Exer2.3.1A" href="javascript:togglecode('toggleCode.Exer2.3.1A','displayCode.Exer2.3.1A');"><i><strong>Exercise 2.3.1 Solution</strong></i></a>
</h5>
<div id="toggleCode.Exer2.3.1A" style="display: none">
<p><strong>Part (a)</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="exercises.html#cb1-1"></a>S_<span class="dv">0</span> &lt;-<span class="st"> </span><span class="cf">function</span>(t,A,B,c) { <span class="kw">exp</span>(<span class="op">-</span><span class="st"> </span>A <span class="op">*</span><span class="st"> </span>t <span class="op">-</span><span class="st"> </span>B <span class="op">*</span><span class="st"> </span>(<span class="kw">exp</span>(<span class="kw">log</span>(c)<span class="op">*</span>t) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)<span class="op">/</span><span class="st"> </span><span class="kw">log</span>(c) )}</span>
<span id="cb1-2"><a href="exercises.html#cb1-2"></a>le &lt;-<span class="st"> </span><span class="cf">function</span>(age,A,B,c){</span>
<span id="cb1-3"><a href="exercises.html#cb1-3"></a>  S_x &lt;-<span class="st"> </span><span class="cf">function</span>(t){ <span class="kw">S_0</span>(age<span class="op">+</span>t,A,B,c)<span class="op">/</span><span class="kw">S_0</span>(age,A,B,c)}</span>
<span id="cb1-4"><a href="exercises.html#cb1-4"></a>  res &lt;-<span class="st"> </span><span class="kw">integrate</span>(S_x,<span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> (<span class="dv">120</span><span class="op">-</span>age))<span class="op">$</span>value</span>
<span id="cb1-5"><a href="exercises.html#cb1-5"></a>  <span class="kw">return</span>(res)</span>
<span id="cb1-6"><a href="exercises.html#cb1-6"></a>}</span>
<span id="cb1-7"><a href="exercises.html#cb1-7"></a></span>
<span id="cb1-8"><a href="exercises.html#cb1-8"></a><span class="kw">le</span>(<span class="dv">20</span>,<span class="fl">0.001</span>,<span class="fl">0.0001</span>,<span class="fl">1.1</span>)</span>
<span id="cb1-9"><a href="exercises.html#cb1-9"></a></span>
<span id="cb1-10"><a href="exercises.html#cb1-10"></a>tomin &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb1-11"><a href="exercises.html#cb1-11"></a>  res &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb1-12"><a href="exercises.html#cb1-12"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</span>
<span id="cb1-13"><a href="exercises.html#cb1-13"></a>    res &lt;-<span class="st"> </span>res <span class="op">+</span><span class="st"> </span>(us_les[i,<span class="dv">3</span>] <span class="op">-</span><span class="st"> </span><span class="kw">le</span>((i<span class="dv">-1</span>)<span class="op">*</span><span class="dv">20</span>,<span class="fl">0.0001</span><span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>x[<span class="dv">1</span>]<span class="op">/</span><span class="dv">100</span>),<span class="fl">0.000007</span><span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>x[<span class="dv">2</span>]<span class="op">/</span><span class="dv">100</span>),<span class="fl">1.10</span><span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>x[<span class="dv">3</span>]<span class="op">/</span><span class="dv">100</span>)))<span class="op">^</span><span class="dv">2</span></span>
<span id="cb1-14"><a href="exercises.html#cb1-14"></a>  }</span>
<span id="cb1-15"><a href="exercises.html#cb1-15"></a>  <span class="kw">return</span>(res)</span>
<span id="cb1-16"><a href="exercises.html#cb1-16"></a>}</span>
<span id="cb1-17"><a href="exercises.html#cb1-17"></a></span>
<span id="cb1-18"><a href="exercises.html#cb1-18"></a><span class="kw">library</span>(pracma)</span>
<span id="cb1-19"><a href="exercises.html#cb1-19"></a>res &lt;-<span class="st"> </span><span class="kw">fminsearch</span>(tomin,<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb1-20"><a href="exercises.html#cb1-20"></a></span>
<span id="cb1-21"><a href="exercises.html#cb1-21"></a>A_opt_mal &lt;-<span class="st"> </span><span class="fl">0.0001</span><span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>res<span class="op">$</span>xmin[<span class="dv">1</span>]<span class="op">/</span><span class="dv">100</span>)</span>
<span id="cb1-22"><a href="exercises.html#cb1-22"></a>B_opt_mal &lt;-<span class="st"> </span><span class="fl">0.000007</span><span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>res<span class="op">$</span>xmin[<span class="dv">2</span>]<span class="op">/</span><span class="dv">100</span>)</span>
<span id="cb1-23"><a href="exercises.html#cb1-23"></a>c_opt_mal &lt;-<span class="st"> </span><span class="fl">1.10</span><span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>res<span class="op">$</span>xmin[<span class="dv">3</span>]<span class="op">/</span><span class="dv">100</span>)</span>
<span id="cb1-24"><a href="exercises.html#cb1-24"></a><span class="kw">le</span>(<span class="dv">0</span>,A_opt_mal,B_opt_mal,c_opt_mal)</span>
<span id="cb1-25"><a href="exercises.html#cb1-25"></a><span class="kw">le</span>(<span class="dv">20</span>,A_opt_mal,B_opt_mal,c_opt_mal)</span>
<span id="cb1-26"><a href="exercises.html#cb1-26"></a><span class="kw">le</span>(<span class="dv">40</span>,A_opt_mal,B_opt_mal,c_opt_mal)</span>
<span id="cb1-27"><a href="exercises.html#cb1-27"></a><span class="kw">le</span>(<span class="dv">60</span>,A_opt_mal,B_opt_mal,c_opt_mal)</span>
<span id="cb1-28"><a href="exercises.html#cb1-28"></a><span class="kw">le</span>(<span class="dv">80</span>,A_opt_mal,B_opt_mal,c_opt_mal)</span></code></pre></div>
<pre><code>[1] 45.18381
[1] 75.97995
[1] 57.25279
[1] 38.66912
[1] 21.48557
[1] 8.545391</code></pre>
<p><strong>Part (b)</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="exercises.html#cb3-1"></a>ages &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">110</span></span>
<span id="cb3-2"><a href="exercises.html#cb3-2"></a>mus &lt;-<span class="st"> </span>A_opt_mal <span class="op">+</span><span class="st"> </span>B_opt_mal <span class="op">*</span><span class="st"> </span><span class="kw">exp</span>(<span class="kw">log</span>(c_opt_mal) <span class="op">*</span><span class="st"> </span>ages)</span>
<span id="cb3-3"><a href="exercises.html#cb3-3"></a><span class="kw">plot</span>(mus,<span class="dt">type =</span> <span class="st">&quot;l&quot;</span>, <span class="dt">main =</span> <span class="st">&quot;Force of Mortality&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;Age&quot;</span>)</span></code></pre></div>
<p><img src="LifeCon_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><strong>Part (c)</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="exercises.html#cb4-1"></a><span class="kw">S_0</span>(<span class="dv">60</span>,A_opt_mal,B_opt_mal,c_opt_mal) <span class="op">/</span><span class="st"> </span><span class="kw">S_0</span>(<span class="dv">20</span>,A_opt_mal,B_opt_mal,c_opt_mal)</span>
<span id="cb4-2"><a href="exercises.html#cb4-2"></a><span class="kw">S_0</span>(<span class="dv">70</span>,A_opt_mal,B_opt_mal,c_opt_mal) <span class="op">/</span><span class="st"> </span><span class="kw">S_0</span>(<span class="dv">20</span>,A_opt_mal,B_opt_mal,c_opt_mal)</span>
<span id="cb4-3"><a href="exercises.html#cb4-3"></a><span class="kw">S_0</span>(<span class="dv">80</span>,A_opt_mal,B_opt_mal,c_opt_mal) <span class="op">/</span><span class="st"> </span><span class="kw">S_0</span>(<span class="dv">20</span>,A_opt_mal,B_opt_mal,c_opt_mal)</span></code></pre></div>
<pre><code>[1] 0.8766083
[1] 0.7460645
[1] 0.5027857</code></pre>
</div>
<p><strong>Exercise 2.4.1. Creating a Life Table from One-Year Central Decrements.</strong> In this exercise, we will create a life table based on one-year central decrements using data from the <a href="https://www.mortality.org">Human Mortality Database</a>.</p>
<ol style="list-style-type: lower-alpha">
<li>Download the data from Appendix Section <a href="appendix-data-dictionary.html#Sec:DataUSPoPCounts">3.1</a>. Create a subset of the data for year 2015 using female rates.</li>
<li>From these central death rates, create one-year mortality rates.</li>
<li>Starting with 100,000 lives at age 0, create a life table. Use <span class="math inline">\(\omega=111\)</span> as the limiting age. List the first six rows of your table.</li>
</ol>
<h5 style="text-align: center;">
<a id="displayCode.Exer2.4.1" href="javascript:togglecode('toggleCode.Exer2.4.1','displayCode.Exer2.4.1');"><i><strong>Exercise 2.4.1 Solution</strong></i></a>
</h5>
<div id="toggleCode.Exer2.4.1" style="display: none">
<p><strong>Part (a)</strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="exercises.html#cb6-1"></a>dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/HMD_mx.csv&quot;</span>)</span>
<span id="cb6-2"><a href="exercises.html#cb6-2"></a><span class="co">#dat &lt;- read.csv(&quot;../Data/HMD_mx.csv&quot;)</span></span>
<span id="cb6-3"><a href="exercises.html#cb6-3"></a>dat_<span class="dv">2015</span>_fem &lt;-<span class="st"> </span>dat[dat<span class="op">$</span>Year_start <span class="op">==</span><span class="st"> </span><span class="dv">2015</span>,<span class="op">-</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">6</span>)]</span>
<span id="cb6-4"><a href="exercises.html#cb6-4"></a><span class="kw">colnames</span>(dat_<span class="dv">2015</span>_fem)[<span class="kw">colnames</span>(dat_<span class="dv">2015</span>_fem)<span class="op">==</span><span class="st">&quot;Female&quot;</span>] &lt;-<span class="st"> &quot;mx&quot;</span></span></code></pre></div>
<p><strong>Part (b)</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="exercises.html#cb7-1"></a>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">-</span><span class="kw">exp</span>(<span class="op">-</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>mx)</span></code></pre></div>
<p><strong>Part (c)</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="exercises.html#cb8-1"></a>l &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>,<span class="kw">length</span>(dat_<span class="dv">2015</span>_fem<span class="op">$</span>mx))</span>
<span id="cb8-2"><a href="exercises.html#cb8-2"></a>l[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">1000000</span></span>
<span id="cb8-3"><a href="exercises.html#cb8-3"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="dv">111</span>){</span>
<span id="cb8-4"><a href="exercises.html#cb8-4"></a>  l[i] =<span class="st"> </span>l[i<span class="dv">-1</span>] <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span>dat_<span class="dv">2015</span>_fem[i<span class="dv">-1</span>,<span class="dv">4</span>])</span>
<span id="cb8-5"><a href="exercises.html#cb8-5"></a>}</span>
<span id="cb8-6"><a href="exercises.html#cb8-6"></a>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l &lt;-<span class="st"> </span>l</span>
<span id="cb8-7"><a href="exercises.html#cb8-7"></a></span>
<span id="cb8-8"><a href="exercises.html#cb8-8"></a>knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(dat_<span class="dv">2015</span>_fem), <span class="dt">align =</span> <span class="st">&quot;r&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Female Life Table&quot;</span>)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-11">Table 1.2: </span>Female Life Table</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">Year_start</th>
<th align="right">Age</th>
<th align="right">mx</th>
<th align="right">qx</th>
<th align="right">l</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1777</td>
<td align="right">2015</td>
<td align="right">0</td>
<td align="right">0.005298</td>
<td align="right">0.0052840</td>
<td align="right">1000000.0</td>
</tr>
<tr class="even">
<td align="left">1778</td>
<td align="right">2015</td>
<td align="right">1</td>
<td align="right">0.000348</td>
<td align="right">0.0003479</td>
<td align="right">994716.0</td>
</tr>
<tr class="odd">
<td align="left">1779</td>
<td align="right">2015</td>
<td align="right">2</td>
<td align="right">0.000226</td>
<td align="right">0.0002260</td>
<td align="right">994369.9</td>
</tr>
<tr class="even">
<td align="left">1780</td>
<td align="right">2015</td>
<td align="right">3</td>
<td align="right">0.000163</td>
<td align="right">0.0001630</td>
<td align="right">994145.2</td>
</tr>
<tr class="odd">
<td align="left">1781</td>
<td align="right">2015</td>
<td align="right">4</td>
<td align="right">0.000140</td>
<td align="right">0.0001400</td>
<td align="right">993983.2</td>
</tr>
<tr class="even">
<td align="left">1782</td>
<td align="right">2015</td>
<td align="right">5</td>
<td align="right">0.000117</td>
<td align="right">0.0001170</td>
<td align="right">993844.0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="chapter-3-exercises" class="section level2">
<h2><span class="header-section-number">1.2</span> Chapter 3 Exercises</h2>
<p><strong>Exercise 3.2.1. Whole Life Actuarial Present Values.</strong>
In Exercise 2.4.1, we learned how to create a life table based on one-year central decrements using data from the <a href="https://www.mortality.org">Human Mortality Database</a>. In this exercise, we use this life table to explore life insurance calculations in <code>R</code>. We first include columns for <span class="math inline">\(A_x\)</span> – the actuarial present values for whole life insurance – and the corresponding second moment. We then use this information to determine term and endowment insurances. Finally, we calculate the expected value and variance for an increasing whole life insurance.</p>
<p><strong>Adding Columns for <span class="math inline">\(A_x\)</span> and <span class="math inline">\(^2A_x\)</span></strong></p>
<p>We continue by adding columns for <span class="math inline">\(A_x\)</span> and <span class="math inline">\(^2A_x\)</span>. For that, we need to fix the interest rate. Given currently low rates, we choose <span class="math inline">\(i=2\%\)</span>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="exercises.html#cb9-1"></a>i &lt;-<span class="st"> </span><span class="fl">0.02</span></span>
<span id="cb9-2"><a href="exercises.html#cb9-2"></a>v &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span><span class="op">+</span>i)</span></code></pre></div>
<p>We then determine <span class="math inline">\(A_x\)</span> and <span class="math inline">\(^2A_x\)</span> via their recursion relationships, where we start with <span class="math inline">\(\omega = 111\)</span> for which <span class="math inline">\(A_{\omega}=v\)</span> and <span class="math inline">\(^2A_{\omega}=v^2\)</span>:</p>
<h5 style="text-align: center;">
<a id="displayCode.Exer4.2.1B" href="javascript:togglecode('toggleCode.Exer4.2.1B','displayCode.Exer4.2.1B');"><i><strong>R Code to Determine Whole Life Actuarial Present Values</strong></i></a>
</h5>
<div id="toggleCode.Exer4.2.1B" style="display: none">
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="exercises.html#cb10-1"></a>Ax &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>,<span class="kw">length</span>(dat_<span class="dv">2015</span>_fem<span class="op">$</span>mx) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb10-2"><a href="exercises.html#cb10-2"></a>TwoAx &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>,<span class="kw">length</span>(dat_<span class="dv">2015</span>_fem<span class="op">$</span>mx) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb10-3"><a href="exercises.html#cb10-3"></a>Ax[<span class="dv">112</span>] &lt;-<span class="st"> </span>v</span>
<span id="cb10-4"><a href="exercises.html#cb10-4"></a>TwoAx[<span class="dv">112</span>] &lt;-<span class="st"> </span>v<span class="op">*</span>v</span>
<span id="cb10-5"><a href="exercises.html#cb10-5"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">111</span>){</span>
<span id="cb10-6"><a href="exercises.html#cb10-6"></a>  Ax[<span class="dv">112</span><span class="op">-</span>i]    =<span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx[<span class="dv">112</span><span class="op">-</span>i] <span class="op">*</span><span class="st"> </span>v <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx[<span class="dv">112</span><span class="op">-</span>i]) <span class="op">*</span><span class="st"> </span>v <span class="op">*</span><span class="st"> </span>Ax[<span class="dv">113</span><span class="op">-</span>i]</span>
<span id="cb10-7"><a href="exercises.html#cb10-7"></a>  TwoAx[<span class="dv">112</span><span class="op">-</span>i] =<span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx[<span class="dv">112</span><span class="op">-</span>i] <span class="op">*</span><span class="st"> </span>v <span class="op">*</span><span class="st"> </span>v <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx[<span class="dv">112</span><span class="op">-</span>i]) <span class="op">*</span><span class="st"> </span>v <span class="op">*</span><span class="st"> </span>v <span class="op">*</span><span class="st"> </span>TwoAx[<span class="dv">113</span><span class="op">-</span>i]</span>
<span id="cb10-8"><a href="exercises.html#cb10-8"></a>}</span>
<span id="cb10-9"><a href="exercises.html#cb10-9"></a>dat_<span class="dv">2015</span>_fem<span class="op">$</span>Ax &lt;-<span class="st"> </span>Ax[<span class="dv">1</span><span class="op">:</span><span class="dv">111</span>]</span>
<span id="cb10-10"><a href="exercises.html#cb10-10"></a>dat_<span class="dv">2015</span>_fem<span class="op">$</span>TwoAx &lt;-<span class="st"> </span>TwoAx[<span class="dv">1</span><span class="op">:</span><span class="dv">111</span>]</span></code></pre></div>
</div>
<p>Here is an excerpt of our now more complete life table:</p>
<pre><code>     Year_start Age       mx          qx        l        Ax     TwoAx
1817       2015  40 0.001388 0.001387037 975424.0 0.4382283 0.2072597
1818       2015  41 0.001470 0.001468920 974071.1 0.4462248 0.2145435
1819       2015  42 0.001621 0.001619687 972640.2 0.4543477 0.2220684
1820       2015  43 0.001736 0.001734494 971064.9 0.4625642 0.2297924
1821       2015  44 0.001861 0.001859269 969380.6 0.4708978 0.2377539
1822       2015  45 0.002044 0.002041912 967578.2 0.4793477 0.2459572</code></pre>
<p><strong>Term and Endowment Insurance</strong></p>
<p>Let’s use it for pricing life insurance contracts. Let’s set <span class="math inline">\(x=40\)</span> and <span class="math inline">\(n=20\)</span>, and evaluate pure endowment, term life, and endowment insurance:</p>
<h5 style="text-align: center;">
<a id="displayCode.Exer4.2.1C" href="javascript:togglecode('toggleCode.Exer4.2.1C','displayCode.Exer4.2.1C');"><i><strong>R Code to Determine Whole Life Actuarial Present Values</strong></i></a>
</h5>
<div id="toggleCode.Exer4.2.1C" style="display: none">
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="exercises.html#cb12-1"></a>A40_<span class="dv">20</span>_<span class="dv">1</span> &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">61</span>]<span class="op">/</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">20</span>)</span>
<span id="cb12-2"><a href="exercises.html#cb12-2"></a>A40_<span class="dv">20</span>_<span class="dv">1</span></span>
<span id="cb12-3"><a href="exercises.html#cb12-3"></a>A40_<span class="dv">1</span>_<span class="dv">20</span> &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>Ax[<span class="dv">41</span>] <span class="op">-</span><span class="st"> </span>A40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>Ax[<span class="dv">61</span>]</span>
<span id="cb12-4"><a href="exercises.html#cb12-4"></a>A40_<span class="dv">1</span>_<span class="dv">20</span></span>
<span id="cb12-5"><a href="exercises.html#cb12-5"></a>A40_<span class="dv">20</span> &lt;-<span class="st"> </span>A40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>A40_<span class="dv">1</span>_<span class="dv">20</span></span>
<span id="cb12-6"><a href="exercises.html#cb12-6"></a>A40_<span class="dv">20</span></span></code></pre></div>
<pre><code>[1] 0.6290884
[1] 0.05065998
[1] 0.6797484</code></pre>
</div>
<p>Let’s also calculate corresponding standard deviations (square roots of variances):</p>
<h5 style="text-align: center;">
<a id="displayCode.Exer4.2.1D" href="javascript:togglecode('toggleCode.Exer4.2.1D','displayCode.Exer4.2.1D');"><i><strong>R Code to Determine Standard Deviations</strong></i></a>
</h5>
<div id="toggleCode.Exer4.2.1D" style="display: none">
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="exercises.html#cb14-1"></a>TwoA40_<span class="dv">20</span>_<span class="dv">1</span> &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">61</span>]<span class="op">/</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">20</span><span class="op">*</span><span class="dv">2</span>)</span>
<span id="cb14-2"><a href="exercises.html#cb14-2"></a><span class="kw">sqrt</span>(TwoA40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>A40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">*</span><span class="st"> </span>A40_<span class="dv">20</span>_<span class="dv">1</span>)</span>
<span id="cb14-3"><a href="exercises.html#cb14-3"></a>TwoA40_<span class="dv">1</span>_<span class="dv">20</span> &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>TwoAx[<span class="dv">41</span>] <span class="op">-</span>TwoA40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>TwoAx[<span class="dv">61</span>]</span>
<span id="cb14-4"><a href="exercises.html#cb14-4"></a><span class="kw">sqrt</span>(TwoA40_<span class="dv">1</span>_<span class="dv">20</span> <span class="op">-</span><span class="st"> </span>A40_<span class="dv">1</span>_<span class="dv">20</span> <span class="op">*</span><span class="st"> </span>A40_<span class="dv">1</span>_<span class="dv">20</span>)</span>
<span id="cb14-5"><a href="exercises.html#cb14-5"></a>TwoA40_<span class="dv">20</span> &lt;-<span class="st"> </span>TwoA40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>TwoA40_<span class="dv">1</span>_<span class="dv">20</span></span>
<span id="cb14-6"><a href="exercises.html#cb14-6"></a><span class="kw">sqrt</span>(TwoA40_<span class="dv">20</span> <span class="op">-</span><span class="st"> </span>A40_<span class="dv">20</span> <span class="op">*</span><span class="st"> </span>A40_<span class="dv">20</span>)</span></code></pre></div>
<pre><code>[1] 0.1661513
[1] 0.1930456
[1] 0.03366966</code></pre>
</div>
<p><strong>Increasing Insurance</strong></p>
<p>Let’s determine the present value of an increasing insurance policy, using the basic summation,
<span class="math display">\[
(IA)_x = \sum_{k=0}^{\omega} {_kp_x}\,q_{x+k}\,v^{k+1}\,(k+1).
\]</span>
Here it is:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="exercises.html#cb16-1"></a>IA40 &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb16-2"><a href="exercises.html#cb16-2"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">70</span>){</span>
<span id="cb16-3"><a href="exercises.html#cb16-3"></a>  IA40 &lt;-<span class="st"> </span>IA40 <span class="op">+</span><span class="st"> </span>j <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">40</span><span class="op">+</span>j]<span class="op">/</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx[<span class="dv">40</span><span class="op">+</span>j] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>j</span>
<span id="cb16-4"><a href="exercises.html#cb16-4"></a>}</span>
<span id="cb16-5"><a href="exercises.html#cb16-5"></a>IA40 &lt;-<span class="st"> </span>IA40 <span class="op">+</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">111</span>]<span class="op">/</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>(<span class="dv">71</span> <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx[<span class="dv">111</span>] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">71</span>) <span class="op">+</span><span class="st"> </span><span class="dv">72</span> <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx[<span class="dv">111</span>]) <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">72</span>))  </span>
<span id="cb16-6"><a href="exercises.html#cb16-6"></a>IA40</span></code></pre></div>
<pre><code>[1] 17.46758</code></pre>
<p>Alternatively, we can evaluate the increasing insurance present value as the sum of deferred insurance contracts:</p>
<p><span class="math display">\[
(IA)_x = \sum_{k=0}^{\omega} {_{k|}A_x}.
\]</span></p>
<p>Carrying it out…</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="exercises.html#cb18-1"></a>BarjA40 &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>,<span class="dv">72</span>)</span>
<span id="cb18-2"><a href="exercises.html#cb18-2"></a>IA40_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb18-3"><a href="exercises.html#cb18-3"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">71</span>){</span>
<span id="cb18-4"><a href="exercises.html#cb18-4"></a>  BarjA40[j] &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">40</span><span class="op">+</span>j]<span class="op">/</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(j<span class="dv">-1</span>) <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>Ax[<span class="dv">40</span><span class="op">+</span>j]</span>
<span id="cb18-5"><a href="exercises.html#cb18-5"></a>  IA40_<span class="dv">2</span> &lt;-<span class="st"> </span>IA40_<span class="dv">2</span> <span class="op">+</span><span class="st"> </span>BarjA40[j]</span>
<span id="cb18-6"><a href="exercises.html#cb18-6"></a>}</span>
<span id="cb18-7"><a href="exercises.html#cb18-7"></a>BarjA40[<span class="dv">72</span>] &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">111</span>]<span class="op">/</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx[<span class="dv">111</span>]) <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">72</span>) </span>
<span id="cb18-8"><a href="exercises.html#cb18-8"></a>IA40_<span class="dv">2</span> &lt;-<span class="st"> </span>IA40_<span class="dv">2</span> <span class="op">+</span><span class="st"> </span>BarjA40[<span class="dv">72</span>]</span></code></pre></div>
<p>…we get the same result:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="exercises.html#cb19-1"></a>IA40_<span class="dv">2</span></span></code></pre></div>
<pre><code>[1] 17.46758</code></pre>
<p>We can also plot the deferred insurance actuarial present values:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="exercises.html#cb21-1"></a><span class="kw">plot</span>(BarjA40)</span></code></pre></div>
<p><img src="LifeCon_files/figure-html/unnamed-chunk-20-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Let’s also evaluate the second moment, which we obtain by squaring the payoff and the discount factors:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="exercises.html#cb22-1"></a>SecondMomIA &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb22-2"><a href="exercises.html#cb22-2"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">70</span>){</span>
<span id="cb22-3"><a href="exercises.html#cb22-3"></a>  SecondMomIA  &lt;-<span class="st"> </span>SecondMomIA  <span class="op">+</span><span class="st"> </span>j <span class="op">*</span><span class="st"> </span>j <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">40</span><span class="op">+</span>j]<span class="op">/</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx[<span class="dv">40</span><span class="op">+</span>j] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(j<span class="op">*</span><span class="dv">2</span>)</span>
<span id="cb22-4"><a href="exercises.html#cb22-4"></a>}</span>
<span id="cb22-5"><a href="exercises.html#cb22-5"></a>SecondMomIA &lt;-<span class="st"> </span>SecondMomIA <span class="op">+</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">111</span>]<span class="op">/</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>(<span class="dv">71</span> <span class="op">*</span><span class="st"> </span><span class="dv">71</span> <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx[<span class="dv">111</span>] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">71</span><span class="op">*</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span><span class="dv">72</span> <span class="op">*</span><span class="st"> </span><span class="dv">72</span> <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span>dat_<span class="dv">2015</span>_fem<span class="op">$</span>qx[<span class="dv">111</span>]) <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">72</span><span class="op">*</span><span class="dv">2</span>))  </span></code></pre></div>
<p>We can use it to determine the standard deviation:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="exercises.html#cb23-1"></a><span class="kw">sqrt</span>(SecondMomIA <span class="op">-</span><span class="st"> </span>IA40 <span class="op">*</span><span class="st"> </span>IA40)</span></code></pre></div>
<pre><code>[1] 2.410041</code></pre>
<div id="on-your-own" class="section level3">
<h3><span class="header-section-number">1.2.1</span> On your Own</h3>
<p>Repeat the above calculations above for the US male population. To this end, you should:</p>
<ul>
<li><ol style="list-style-type: lower-roman">
<li>complete the male life table with columns for <span class="math inline">\(A_x\)</span> and <span class="math inline">\(^2A_x\)</span>;</li>
</ol></li>
<li><ol start="2" style="list-style-type: lower-roman">
<li>determine pure endowment, term life, and endowment insurance values and standard deviations for a forty year old male and a 20 year term; and</li>
</ol></li>
<li><ol start="3" style="list-style-type: lower-roman">
<li>determine the value and the standard deviation for an increasing whole life insurance on a 40-year old male insured.</li>
</ol></li>
</ul>
<h5 style="text-align: center;">
<a id="displayCode.Exer4.2.1E" href="javascript:togglecode('toggleCode.Exer4.2.1E','displayCode.Exer4.2.1E');"><i><strong>R Code to Determine Whole Life Actuarial Present Values</strong></i></a>
</h5>
<div id="toggleCode.Exer4.2.1E" style="display: none">
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="exercises.html#cb25-1"></a>dat_<span class="dv">2015</span>_ma &lt;-<span class="st"> </span>dat[dat<span class="op">$</span>Year_start <span class="op">==</span><span class="st"> </span><span class="dv">2015</span>,<span class="op">-</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>)]</span>
<span id="cb25-2"><a href="exercises.html#cb25-2"></a><span class="kw">colnames</span>(dat_<span class="dv">2015</span>_ma)[<span class="kw">colnames</span>(dat_<span class="dv">2015</span>_ma)<span class="op">==</span><span class="st">&quot;Male&quot;</span>] &lt;-<span class="st"> &quot;mx&quot;</span></span>
<span id="cb25-3"><a href="exercises.html#cb25-3"></a>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">-</span><span class="kw">exp</span>(<span class="op">-</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>mx)</span>
<span id="cb25-4"><a href="exercises.html#cb25-4"></a></span>
<span id="cb25-5"><a href="exercises.html#cb25-5"></a>l &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>,<span class="kw">length</span>(dat_<span class="dv">2015</span>_ma<span class="op">$</span>mx))</span>
<span id="cb25-6"><a href="exercises.html#cb25-6"></a>l[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">1000000</span></span>
<span id="cb25-7"><a href="exercises.html#cb25-7"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="dv">111</span>){</span>
<span id="cb25-8"><a href="exercises.html#cb25-8"></a>  l[i] =<span class="st"> </span>l[i<span class="dv">-1</span>] <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span>dat_<span class="dv">2015</span>_ma[i<span class="dv">-1</span>,<span class="dv">4</span>])</span>
<span id="cb25-9"><a href="exercises.html#cb25-9"></a>}</span>
<span id="cb25-10"><a href="exercises.html#cb25-10"></a>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l &lt;-<span class="st"> </span>l</span>
<span id="cb25-11"><a href="exercises.html#cb25-11"></a></span>
<span id="cb25-12"><a href="exercises.html#cb25-12"></a>Ax &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>,<span class="kw">length</span>(dat_<span class="dv">2015</span>_ma<span class="op">$</span>mx) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb25-13"><a href="exercises.html#cb25-13"></a>TwoAx &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>,<span class="kw">length</span>(dat_<span class="dv">2015</span>_ma<span class="op">$</span>mx) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb25-14"><a href="exercises.html#cb25-14"></a>Ax[<span class="dv">112</span>] &lt;-<span class="st"> </span>v</span>
<span id="cb25-15"><a href="exercises.html#cb25-15"></a>TwoAx[<span class="dv">112</span>] &lt;-<span class="st"> </span>v<span class="op">*</span>v</span>
<span id="cb25-16"><a href="exercises.html#cb25-16"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">111</span>){</span>
<span id="cb25-17"><a href="exercises.html#cb25-17"></a>  Ax[<span class="dv">112</span><span class="op">-</span>i]    =<span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx[<span class="dv">112</span><span class="op">-</span>i] <span class="op">*</span><span class="st"> </span>v <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx[<span class="dv">112</span><span class="op">-</span>i]) <span class="op">*</span><span class="st"> </span>v <span class="op">*</span><span class="st"> </span>Ax[<span class="dv">113</span><span class="op">-</span>i]</span>
<span id="cb25-18"><a href="exercises.html#cb25-18"></a>  TwoAx[<span class="dv">112</span><span class="op">-</span>i] =<span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx[<span class="dv">112</span><span class="op">-</span>i] <span class="op">*</span><span class="st"> </span>v <span class="op">*</span><span class="st"> </span>v <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx[<span class="dv">112</span><span class="op">-</span>i]) <span class="op">*</span><span class="st"> </span>v <span class="op">*</span><span class="st"> </span>v <span class="op">*</span><span class="st"> </span>TwoAx[<span class="dv">113</span><span class="op">-</span>i]</span>
<span id="cb25-19"><a href="exercises.html#cb25-19"></a>}</span>
<span id="cb25-20"><a href="exercises.html#cb25-20"></a>dat_<span class="dv">2015</span>_ma<span class="op">$</span>Ax &lt;-<span class="st"> </span>Ax[<span class="dv">1</span><span class="op">:</span><span class="dv">111</span>]</span>
<span id="cb25-21"><a href="exercises.html#cb25-21"></a>dat_<span class="dv">2015</span>_ma<span class="op">$</span>TwoAx &lt;-<span class="st"> </span>TwoAx[<span class="dv">1</span><span class="op">:</span><span class="dv">111</span>]</span>
<span id="cb25-22"><a href="exercises.html#cb25-22"></a></span>
<span id="cb25-23"><a href="exercises.html#cb25-23"></a>dat_<span class="dv">2015</span>_ma[<span class="dv">41</span><span class="op">:</span><span class="dv">61</span>,]</span>
<span id="cb25-24"><a href="exercises.html#cb25-24"></a></span>
<span id="cb25-25"><a href="exercises.html#cb25-25"></a>A40_<span class="dv">20</span>_<span class="dv">1</span> &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">61</span>]<span class="op">/</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">20</span>)</span>
<span id="cb25-26"><a href="exercises.html#cb25-26"></a>A40_<span class="dv">20</span>_<span class="dv">1</span></span>
<span id="cb25-27"><a href="exercises.html#cb25-27"></a>A40_<span class="dv">1</span>_<span class="dv">20</span> &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>Ax[<span class="dv">41</span>] <span class="op">-</span><span class="st"> </span>A40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>Ax[<span class="dv">61</span>]</span>
<span id="cb25-28"><a href="exercises.html#cb25-28"></a>A40_<span class="dv">1</span>_<span class="dv">20</span></span>
<span id="cb25-29"><a href="exercises.html#cb25-29"></a>A40_<span class="dv">20</span> &lt;-<span class="st"> </span>A40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>A40_<span class="dv">1</span>_<span class="dv">20</span></span>
<span id="cb25-30"><a href="exercises.html#cb25-30"></a>A40_<span class="dv">20</span></span>
<span id="cb25-31"><a href="exercises.html#cb25-31"></a></span>
<span id="cb25-32"><a href="exercises.html#cb25-32"></a>TwoA40_<span class="dv">20</span>_<span class="dv">1</span> &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">61</span>]<span class="op">/</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">20</span><span class="op">*</span><span class="dv">2</span>)</span>
<span id="cb25-33"><a href="exercises.html#cb25-33"></a><span class="kw">sqrt</span>(TwoA40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>A40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">*</span><span class="st"> </span>A40_<span class="dv">20</span>_<span class="dv">1</span>)</span>
<span id="cb25-34"><a href="exercises.html#cb25-34"></a>TwoA40_<span class="dv">1</span>_<span class="dv">20</span> &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>TwoAx[<span class="dv">41</span>] <span class="op">-</span>TwoA40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>TwoAx[<span class="dv">61</span>]</span>
<span id="cb25-35"><a href="exercises.html#cb25-35"></a><span class="kw">sqrt</span>(TwoA40_<span class="dv">1</span>_<span class="dv">20</span> <span class="op">-</span><span class="st"> </span>A40_<span class="dv">1</span>_<span class="dv">20</span> <span class="op">*</span><span class="st"> </span>A40_<span class="dv">1</span>_<span class="dv">20</span>)</span>
<span id="cb25-36"><a href="exercises.html#cb25-36"></a>TwoA40_<span class="dv">20</span> &lt;-<span class="st"> </span>TwoA40_<span class="dv">20</span>_<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>TwoA40_<span class="dv">1</span>_<span class="dv">20</span></span>
<span id="cb25-37"><a href="exercises.html#cb25-37"></a><span class="kw">sqrt</span>(TwoA40_<span class="dv">20</span> <span class="op">-</span><span class="st"> </span>A40_<span class="dv">20</span> <span class="op">*</span><span class="st"> </span>A40_<span class="dv">20</span>)</span>
<span id="cb25-38"><a href="exercises.html#cb25-38"></a></span>
<span id="cb25-39"><a href="exercises.html#cb25-39"></a>IA40 &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb25-40"><a href="exercises.html#cb25-40"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">70</span>){</span>
<span id="cb25-41"><a href="exercises.html#cb25-41"></a>  IA40 &lt;-<span class="st"> </span>IA40 <span class="op">+</span><span class="st"> </span>j <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">40</span><span class="op">+</span>j]<span class="op">/</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx[<span class="dv">40</span><span class="op">+</span>j] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>j</span>
<span id="cb25-42"><a href="exercises.html#cb25-42"></a>}</span>
<span id="cb25-43"><a href="exercises.html#cb25-43"></a>IA40 &lt;-<span class="st"> </span>IA40 <span class="op">+</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">111</span>]<span class="op">/</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>(<span class="dv">71</span> <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx[<span class="dv">111</span>] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">71</span>) <span class="op">+</span><span class="st"> </span><span class="dv">72</span> <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx[<span class="dv">111</span>]) <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">72</span>))  </span>
<span id="cb25-44"><a href="exercises.html#cb25-44"></a>IA40</span>
<span id="cb25-45"><a href="exercises.html#cb25-45"></a></span>
<span id="cb25-46"><a href="exercises.html#cb25-46"></a>BarjA40 &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>,<span class="dv">72</span>)</span>
<span id="cb25-47"><a href="exercises.html#cb25-47"></a>IA40_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb25-48"><a href="exercises.html#cb25-48"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">71</span>){</span>
<span id="cb25-49"><a href="exercises.html#cb25-49"></a>  BarjA40[j] &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">40</span><span class="op">+</span>j]<span class="op">/</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(j<span class="dv">-1</span>) <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>Ax[<span class="dv">40</span><span class="op">+</span>j]</span>
<span id="cb25-50"><a href="exercises.html#cb25-50"></a>  IA40_<span class="dv">2</span> &lt;-<span class="st"> </span>IA40_<span class="dv">2</span> <span class="op">+</span><span class="st"> </span>BarjA40[j]</span>
<span id="cb25-51"><a href="exercises.html#cb25-51"></a>}</span>
<span id="cb25-52"><a href="exercises.html#cb25-52"></a>BarjA40[<span class="dv">72</span>] &lt;-<span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">111</span>]<span class="op">/</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx[<span class="dv">111</span>]) <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">72</span>) </span>
<span id="cb25-53"><a href="exercises.html#cb25-53"></a>IA40_<span class="dv">2</span> &lt;-<span class="st"> </span>IA40_<span class="dv">2</span> <span class="op">+</span><span class="st"> </span>BarjA40[<span class="dv">72</span>]</span>
<span id="cb25-54"><a href="exercises.html#cb25-54"></a>IA40_<span class="dv">2</span></span>
<span id="cb25-55"><a href="exercises.html#cb25-55"></a></span>
<span id="cb25-56"><a href="exercises.html#cb25-56"></a><span class="kw">plot</span>(BarjA40)</span></code></pre></div>
<p><img src="LifeCon_files/figure-html/unnamed-chunk-23-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="exercises.html#cb26-1"></a>SecondMomIA &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb26-2"><a href="exercises.html#cb26-2"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">70</span>){</span>
<span id="cb26-3"><a href="exercises.html#cb26-3"></a>  SecondMomIA  &lt;-<span class="st"> </span>SecondMomIA  <span class="op">+</span><span class="st"> </span>j <span class="op">*</span><span class="st"> </span>j <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">40</span><span class="op">+</span>j]<span class="op">/</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx[<span class="dv">40</span><span class="op">+</span>j] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(j<span class="op">*</span><span class="dv">2</span>)</span>
<span id="cb26-4"><a href="exercises.html#cb26-4"></a>}</span>
<span id="cb26-5"><a href="exercises.html#cb26-5"></a>SecondMomIA &lt;-<span class="st"> </span>SecondMomIA <span class="op">+</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">111</span>]<span class="op">/</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>l[<span class="dv">41</span>] <span class="op">*</span><span class="st"> </span>(<span class="dv">71</span> <span class="op">*</span><span class="st"> </span><span class="dv">71</span> <span class="op">*</span><span class="st"> </span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx[<span class="dv">111</span>] <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">71</span><span class="op">*</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span><span class="dv">72</span> <span class="op">*</span><span class="st"> </span><span class="dv">72</span> <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span>dat_<span class="dv">2015</span>_ma<span class="op">$</span>qx[<span class="dv">111</span>]) <span class="op">*</span><span class="st"> </span>v<span class="op">^</span>(<span class="dv">72</span><span class="op">*</span><span class="dv">2</span>))  </span>
<span id="cb26-6"><a href="exercises.html#cb26-6"></a><span class="kw">sqrt</span>(SecondMomIA <span class="op">-</span><span class="st"> </span>IA40 <span class="op">*</span><span class="st"> </span>IA40)</span></code></pre></div>
<pre><code>     Year_start Age       mx          qx        l        Ax     TwoAx
1817       2015  40 0.002373 0.002370187 953558.0 0.4749621 0.2440201
1818       2015  41 0.002494 0.002490893 951297.9 0.4832365 0.2521059
1819       2015  42 0.002593 0.002589641 948928.3 0.4916350 0.2604488
1820       2015  43 0.002811 0.002807053 946471.0 0.5001733 0.2690781
1821       2015  44 0.003009 0.003004477 943814.2 0.5087979 0.2779220
1822       2015  45 0.003250 0.003244724 940978.5 0.5175243 0.2870078
1823       2015  46 0.003517 0.003510823 937925.3 0.5263379 0.2963197
1824       2015  47 0.003787 0.003779838 934632.4 0.5352329 0.3058540
1825       2015  48 0.004108 0.004099574 931099.6 0.5442148 0.3156237
1826       2015  49 0.004534 0.004523737 927282.5 0.5532677 0.3256101
1827       2015  50 0.004993 0.004980556 923087.7 0.5623532 0.3357599
1828       2015  51 0.005503 0.005487886 918490.2 0.5714660 0.3460677
1829       2015  52 0.006015 0.005996946 913449.7 0.5805936 0.3565175
1830       2015  53 0.006617 0.006595156 907971.8 0.5897452 0.3671255
1831       2015  54 0.007245 0.007218818 901983.5 0.5988948 0.3778542
1832       2015  55 0.007873 0.007842089 895472.3 0.6080432 0.3887067
1833       2015  56 0.008436 0.008400517 888449.9 0.6172021 0.3997029
1834       2015  57 0.009255 0.009212304 880986.5 0.6264078 0.4109021
1835       2015  58 0.009908 0.009859077 872870.6 0.6355788 0.4221795
1836       2015  59 0.010782 0.010724083 864264.9 0.6447883 0.4336519
1837       2015  60 0.011527 0.011460819 854996.4 0.6539733 0.4452219
[1] 0.6034117
[1] 0.08034698
[1] 0.6837587
[1] 0.2048734
[1] 0.2382631
[1] 0.04216352
[1] 16.95431
[1] 16.95431
[1] 2.911442</code></pre>
</div>
</div>
</div>
<div id="chapter-4-exercises" class="section level2">
<h2><span class="header-section-number">1.3</span> Chapter 4 Exercises</h2>
<div id="section-4.3-exercises" class="section level4 unnumbered">
<h4>Section 4.3 Exercises</h4>
<p><strong>Exercise 4.3.1. Actuarial Present Values for Select and Ultimate Tables</strong>. The select and ultimate tables introduced in Section <a href="#Sec:SelectionAdverse"><strong>??</strong></a> are complicated – is such complexity is warranted in practice? To get insights into this question, in this exercise you will compare actuarial present values derived from select and ultimate mortality to those from only ultimate mortality. To be specific, we focus consider whole life insurance for using the female Canadian experience introduced in Section <a href="#Sec:SelectionAdverse"><strong>??</strong></a>; the data are available in Appendix Section <a href="appendix-data-dictionary.html#Sec:CanadianSelect">3.4</a>.</p>
<p>For these data,</p>
<ol style="list-style-type: lower-alpha">
<li>produce <span class="math inline">\(A_x\)</span> for <span class="math inline">\(x=50, \ldots, 65\)</span> using an interest rate of <span class="math inline">\(i=0.04\)</span> based on
<ol style="list-style-type: lower-roman">
<li>select and ultimate mortality</li>
<li>ultimate mortality</li>
</ol></li>
<li>compare these two sequences of actuarial present values by calculating their ratio.</li>
<li>repeat parts (a) and (b) using an interest rate <span class="math inline">\(i=0.02\)</span>.</li>
</ol>
<p>To give you a feel for the results, Figure <a href="exercises.html#fig:SelUlt1">1.1</a> summarizes the results.</p>

<div class="figure" style="text-align: center"><span id="fig:SelUlt1"></span>
<img src="LifeCon_files/figure-html/SelUlt1-1.png" alt="Life Insurance APV by Age, Interest, and Mortality Type. A plot of life insurance actuarial present value \(A_x\) by age \(x\). The top two lines are based on \(i=0.02\), the bottom two based on \(i=0.04\). For each pair, the top line uses ultimate mortality, the bottom line is based on select and ultimate mortality" width="60%" />
<p class="caption">
Figure 1.1: <strong>Life Insurance APV by Age, Interest, and Mortality Type</strong>. A plot of life insurance actuarial present value <span class="math inline">\(A_x\)</span> by age <span class="math inline">\(x\)</span>. The top two lines are based on <span class="math inline">\(i=0.02\)</span>, the bottom two based on <span class="math inline">\(i=0.04\)</span>. For each pair, the top line uses ultimate mortality, the bottom line is based on select and ultimate mortality
</p>
</div>
<h5 style="text-align: center;">
<a id="displayTheory.Exer4.3.1" href="javascript:toggleTheory('toggleTheory.Exer4.3.1','displayCode.Exer4.3.1');"><i><strong>Exercise 4.3.1 Answer</strong></i></a>
</h5>
<div id="toggleTheory.Exer4.3.1" style="display: none">
<table>
<caption><span id="tab:unnamed-chunk-24">Table 1.3: </span>Comparison of Life Insurance APVs, Interest is 4%</caption>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="right">50</td>
<td align="right">51</td>
<td align="right">52</td>
<td align="right">53</td>
<td align="right">54</td>
<td align="right">55</td>
<td align="right">56</td>
<td align="right">57</td>
</tr>
<tr class="even">
<td align="left">Select2 and Ultimate, i=4%</td>
<td align="right">0.2729</td>
<td align="right">0.282</td>
<td align="right">0.2913</td>
<td align="right">0.3007</td>
<td align="right">0.3104</td>
<td align="right">0.3201</td>
<td align="right">0.33</td>
<td align="right">0.3401</td>
</tr>
<tr class="odd">
<td align="left">Ultimate, i=4%</td>
<td align="right">0.2808</td>
<td align="right">0.2908</td>
<td align="right">0.3011</td>
<td align="right">0.3117</td>
<td align="right">0.3225</td>
<td align="right">0.3336</td>
<td align="right">0.3449</td>
<td align="right">0.3564</td>
</tr>
<tr class="even">
<td align="left">Ratio</td>
<td align="right">0.9716</td>
<td align="right">0.9695</td>
<td align="right">0.9673</td>
<td align="right">0.9649</td>
<td align="right">0.9624</td>
<td align="right">0.9598</td>
<td align="right">0.957</td>
<td align="right">0.9542</td>
</tr>
<tr class="odd">
<td align="left">Age</td>
<td align="right">58</td>
<td align="right">59</td>
<td align="right">60</td>
<td align="right">61</td>
<td align="right">62</td>
<td align="right">63</td>
<td align="right">64</td>
<td align="right">65</td>
</tr>
<tr class="even">
<td align="left">Select and Ultimate, i=4%</td>
<td align="right">0.3502</td>
<td align="right">0.3605</td>
<td align="right">0.3709</td>
<td align="right">0.3814</td>
<td align="right">0.3919</td>
<td align="right">0.4025</td>
<td align="right">0.4132</td>
<td align="right">0.424</td>
</tr>
<tr class="odd">
<td align="left">Ultimate, i=4%</td>
<td align="right">0.3682</td>
<td align="right">0.3801</td>
<td align="right">0.3923</td>
<td align="right">0.4046</td>
<td align="right">0.417</td>
<td align="right">0.4294</td>
<td align="right">0.4417</td>
<td align="right">0.454</td>
</tr>
<tr class="even">
<td align="left">Ratio</td>
<td align="right">0.9513</td>
<td align="right">0.9484</td>
<td align="right">0.9455</td>
<td align="right">0.9425</td>
<td align="right">0.9398</td>
<td align="right">0.9375</td>
<td align="right">0.9355</td>
<td align="right">0.934</td>
</tr>
</tbody>
</table>
<table style="width:100%;">
<caption><span id="tab:unnamed-chunk-25">Table 1.4: </span>Comparison of Life Insurance APVs, Interest is 2%</caption>
<colgroup>
<col width="31%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="right">50</td>
<td align="right">51</td>
<td align="right">52</td>
<td align="right">53</td>
<td align="right">54</td>
<td align="right">55</td>
<td align="right">56</td>
<td align="right">57</td>
</tr>
<tr class="even">
<td align="left">Select and Ultimate, i=2%</td>
<td align="right">0.5063</td>
<td align="right">0.5151</td>
<td align="right">0.524</td>
<td align="right">0.5329</td>
<td align="right">0.5418</td>
<td align="right">0.5507</td>
<td align="right">0.5596</td>
<td align="right">0.5686</td>
</tr>
<tr class="odd">
<td align="left">Ultimate, i=2%</td>
<td align="right">0.5122</td>
<td align="right">0.5217</td>
<td align="right">0.5312</td>
<td align="right">0.5408</td>
<td align="right">0.5506</td>
<td align="right">0.5604</td>
<td align="right">0.5702</td>
<td align="right">0.5802</td>
</tr>
<tr class="even">
<td align="left">Ratio</td>
<td align="right">0.9885</td>
<td align="right">0.9875</td>
<td align="right">0.9864</td>
<td align="right">0.9853</td>
<td align="right">0.9841</td>
<td align="right">0.9828</td>
<td align="right">0.9814</td>
<td align="right">0.98</td>
</tr>
<tr class="odd">
<td align="left">Age</td>
<td align="right">58</td>
<td align="right">59</td>
<td align="right">60</td>
<td align="right">61</td>
<td align="right">62</td>
<td align="right">63</td>
<td align="right">64</td>
<td align="right">65</td>
</tr>
<tr class="even">
<td align="left">Select and Ultimate, i=2%</td>
<td align="right">0.5775</td>
<td align="right">0.5864</td>
<td align="right">0.5953</td>
<td align="right">0.6042</td>
<td align="right">0.6131</td>
<td align="right">0.6219</td>
<td align="right">0.6307</td>
<td align="right">0.6394</td>
</tr>
<tr class="odd">
<td align="left">Ultimate, i=2%</td>
<td align="right">0.5901</td>
<td align="right">0.6002</td>
<td align="right">0.6102</td>
<td align="right">0.6203</td>
<td align="right">0.6303</td>
<td align="right">0.6402</td>
<td align="right">0.6499</td>
<td align="right">0.6595</td>
</tr>
<tr class="even">
<td align="left">Ratio</td>
<td align="right">0.9786</td>
<td align="right">0.9771</td>
<td align="right">0.9756</td>
<td align="right">0.9741</td>
<td align="right">0.9727</td>
<td align="right">0.9715</td>
<td align="right">0.9704</td>
<td align="right">0.9695</td>
</tr>
</tbody>
</table>
<h5 style="text-align: center;">
<a id="displayCode.Exer4.3.1A" href="javascript:togglecode('toggleCode.Exer4.3.1A','displayCode.Exer4.3.1A');"><i><strong>Exercise 4.3.1 Solution using R Code</strong></i></a>
</h5>
<div id="toggleCode.Exer4.3.1A" style="display: none">
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="exercises.html#cb28-1"></a>CanadianSelUlt &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/CanadianFemaleSelectRead.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</span>
<span id="cb28-2"><a href="exercises.html#cb28-2"></a></span>
<span id="cb28-3"><a href="exercises.html#cb28-3"></a>temp &lt;-<span class="st"> </span>CanadianSelUlt[<span class="dv">131</span><span class="op">:</span><span class="dv">201</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</span>
<span id="cb28-4"><a href="exercises.html#cb28-4"></a>temp1 &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(temp)</span>
<span id="cb28-5"><a href="exercises.html#cb28-5"></a>CanadianUlt50 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">as.numeric</span>(temp1), <span class="dt">ncol=</span><span class="dv">2</span>)</span>
<span id="cb28-6"><a href="exercises.html#cb28-6"></a><span class="kw">colnames</span>(CanadianUlt50) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Age&quot;</span>, <span class="st">&quot;qx_Ult&quot;</span>)</span>
<span id="cb28-7"><a href="exercises.html#cb28-7"></a><span class="kw">rownames</span>(CanadianUlt50) &lt;-<span class="st"> </span><span class="ot">NULL</span></span>
<span id="cb28-8"><a href="exercises.html#cb28-8"></a></span>
<span id="cb28-9"><a href="exercises.html#cb28-9"></a>tempSel &lt;-<span class="st"> </span>CanadianSelUlt[<span class="dv">51</span><span class="op">:</span><span class="dv">81</span>,]</span>
<span id="cb28-10"><a href="exercises.html#cb28-10"></a>tempSel1 &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(tempSel)</span>
<span id="cb28-11"><a href="exercises.html#cb28-11"></a></span>
<span id="cb28-12"><a href="exercises.html#cb28-12"></a>CanadianSel50 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">as.numeric</span>(tempSel1), <span class="dt">ncol=</span><span class="kw">ncol</span>(tempSel))</span>
<span id="cb28-13"><a href="exercises.html#cb28-13"></a><span class="kw">rownames</span>(CanadianSel50) &lt;-<span class="st"> </span><span class="ot">NULL</span></span>
<span id="cb28-14"><a href="exercises.html#cb28-14"></a></span>
<span id="cb28-15"><a href="exercises.html#cb28-15"></a>CanadianSel50.toUlt &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span>, <span class="dt">nrow =</span> <span class="kw">nrow</span>(CanadianSel50), <span class="dt">ncol =</span> <span class="dv">120-50</span><span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb28-16"><a href="exercises.html#cb28-16"></a>CanadianSel50.toUlt[<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(CanadianSel50),<span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(CanadianSel50)] &lt;-<span class="st"> </span>CanadianSel50</span>
<span id="cb28-17"><a href="exercises.html#cb28-17"></a></span>
<span id="cb28-18"><a href="exercises.html#cb28-18"></a><span class="cf">for</span> (irow <span class="cf">in</span> (<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(CanadianSel50)) ){</span>
<span id="cb28-19"><a href="exercises.html#cb28-19"></a><span class="cf">for</span> (icol <span class="cf">in</span> (<span class="dv">1</span><span class="op">:</span><span class="st"> </span>(<span class="dv">120-50-15</span><span class="op">-</span>irow)) ){</span>
<span id="cb28-20"><a href="exercises.html#cb28-20"></a>  CanadianSel50.toUlt[irow,<span class="dv">1</span><span class="op">+</span><span class="dv">15</span><span class="op">+</span>icol ] &lt;-<span class="st"> </span>CanadianUlt50[irow<span class="op">+</span><span class="dv">14</span><span class="op">+</span>icol,<span class="dv">2</span>]</span>
<span id="cb28-21"><a href="exercises.html#cb28-21"></a>   }</span>
<span id="cb28-22"><a href="exercises.html#cb28-22"></a>}</span>
<span id="cb28-23"><a href="exercises.html#cb28-23"></a></span>
<span id="cb28-24"><a href="exercises.html#cb28-24"></a><span class="co">#  Actuarial Present Value Calculations</span></span>
<span id="cb28-25"><a href="exercises.html#cb28-25"></a>APV.Ult &lt;-<span class="st"> </span><span class="cf">function</span>(xage, q.x, <span class="dt">int=</span><span class="fl">0.00</span>){</span>
<span id="cb28-26"><a href="exercises.html#cb28-26"></a>  v =<span class="st"> </span><span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span><span class="op">+</span>int)</span>
<span id="cb28-27"><a href="exercises.html#cb28-27"></a>  num =<span class="st"> </span><span class="kw">length</span>(xage)</span>
<span id="cb28-28"><a href="exercises.html#cb28-28"></a>  A.x &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">*</span>xage -&gt;<span class="st"> </span>add.x -&gt;<span class="st"> </span>e.x</span>
<span id="cb28-29"><a href="exercises.html#cb28-29"></a>  A.x[num] =<span class="st"> </span>v<span class="op">*</span>q.x[num]</span>
<span id="cb28-30"><a href="exercises.html#cb28-30"></a>  add.x[num] =<span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span>q.x[num])<span class="op">/</span>(int <span class="op">+</span><span class="st"> </span><span class="fl">1e-12</span>)</span>
<span id="cb28-31"><a href="exercises.html#cb28-31"></a>  e.x[num] =<span class="st"> </span><span class="dv">1</span><span class="op">-</span>q.x[num]</span>
<span id="cb28-32"><a href="exercises.html#cb28-32"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>(num<span class="dv">-1</span>)){</span>
<span id="cb28-33"><a href="exercises.html#cb28-33"></a>    A.x[num<span class="op">-</span>i] =<span class="st"> </span>v<span class="op">*</span>q.x[num<span class="op">-</span>i] <span class="op">+</span><span class="st"> </span>v<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>q.x[num<span class="op">-</span>i])<span class="op">*</span>A.x[num<span class="op">-</span>i<span class="op">+</span><span class="dv">1</span>]</span>
<span id="cb28-34"><a href="exercises.html#cb28-34"></a>    add.x[num<span class="op">-</span>i] =<span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>v<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>q.x[num<span class="op">-</span>i])<span class="op">*</span>add.x[num<span class="op">-</span>i<span class="op">+</span><span class="dv">1</span>] </span>
<span id="cb28-35"><a href="exercises.html#cb28-35"></a>    e.x[num<span class="op">-</span>i] =<span class="st">  </span>(<span class="dv">1</span><span class="op">-</span>q.x[num<span class="op">-</span>i])<span class="op">*</span>(<span class="dv">1</span><span class="op">+</span>e.x[num<span class="op">-</span>i<span class="op">+</span><span class="dv">1</span>])</span>
<span id="cb28-36"><a href="exercises.html#cb28-36"></a>    }</span>
<span id="cb28-37"><a href="exercises.html#cb28-37"></a>  tablelife &lt;-<span class="st"> </span><span class="kw">cbind</span>(xage,q.x,A.x,add.x,e.x)</span>
<span id="cb28-38"><a href="exercises.html#cb28-38"></a>  <span class="kw">return</span>(tablelife)</span>
<span id="cb28-39"><a href="exercises.html#cb28-39"></a>}</span>
<span id="cb28-40"><a href="exercises.html#cb28-40"></a>AxUlt04 &lt;-<span class="st"> </span><span class="kw">APV.Ult</span>(<span class="dt">xage=</span> CanadianUlt50[,<span class="dv">1</span>], <span class="dt">q.x=</span>CanadianUlt50[,<span class="dv">2</span>], <span class="dt">int=</span><span class="fl">0.04</span>)[,<span class="dv">3</span>]</span>
<span id="cb28-41"><a href="exercises.html#cb28-41"></a>AxUlt04<span class="fl">.5065</span> &lt;-<span class="st"> </span>AxUlt04[<span class="dv">1</span><span class="op">:</span><span class="dv">16</span>]</span>
<span id="cb28-42"><a href="exercises.html#cb28-42"></a>AxUlt02 &lt;-<span class="st"> </span><span class="kw">APV.Ult</span>(<span class="dt">xage=</span> CanadianUlt50[,<span class="dv">1</span>], <span class="dt">q.x=</span>CanadianUlt50[,<span class="dv">2</span>], <span class="dt">int=</span><span class="fl">0.02</span>)[,<span class="dv">3</span>]</span>
<span id="cb28-43"><a href="exercises.html#cb28-43"></a>AxUlt02<span class="fl">.5065</span> &lt;-<span class="st"> </span>AxUlt02[<span class="dv">1</span><span class="op">:</span><span class="dv">16</span>]</span>
<span id="cb28-44"><a href="exercises.html#cb28-44"></a></span>
<span id="cb28-45"><a href="exercises.html#cb28-45"></a><span class="co">#  Actuarial Present Value Calculations</span></span>
<span id="cb28-46"><a href="exercises.html#cb28-46"></a></span>
<span id="cb28-47"><a href="exercises.html#cb28-47"></a>APV.Sel &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">int=</span><span class="fl">0.00</span>){</span>
<span id="cb28-48"><a href="exercises.html#cb28-48"></a>AxSel04 &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>, <span class="dv">16</span>)</span>
<span id="cb28-49"><a href="exercises.html#cb28-49"></a>  v =<span class="st"> </span><span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span><span class="op">+</span>int)</span>
<span id="cb28-50"><a href="exercises.html#cb28-50"></a><span class="cf">for</span> (iage <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">16</span>){</span>
<span id="cb28-51"><a href="exercises.html#cb28-51"></a><span class="co">#iage =2</span></span>
<span id="cb28-52"><a href="exercises.html#cb28-52"></a>  AxSel04[iage] =<span class="st">  </span>v<span class="op">*</span>CanadianSel50.toUlt[iage, <span class="dv">2</span>]</span>
<span id="cb28-53"><a href="exercises.html#cb28-53"></a>kpx =<span class="st"> </span><span class="dv">1</span></span>
<span id="cb28-54"><a href="exercises.html#cb28-54"></a>  <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>(<span class="kw">ncol</span>(CanadianSel50.toUlt)<span class="op">-</span><span class="dv">2</span>)) {</span>
<span id="cb28-55"><a href="exercises.html#cb28-55"></a>    kpx =<span class="st"> </span>kpx<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>CanadianSel50.toUlt[iage, k<span class="op">+</span><span class="dv">1</span>])</span>
<span id="cb28-56"><a href="exercises.html#cb28-56"></a>   AxSel04[iage] =<span class="st">  </span>AxSel04[iage] <span class="op">+</span><span class="st"> </span>v<span class="op">**</span>(k<span class="op">+</span><span class="dv">1</span>)<span class="op">*</span>kpx<span class="op">*</span>CanadianSel50.toUlt[iage, k<span class="op">+</span><span class="dv">2</span>]</span>
<span id="cb28-57"><a href="exercises.html#cb28-57"></a>  }</span>
<span id="cb28-58"><a href="exercises.html#cb28-58"></a>}</span>
<span id="cb28-59"><a href="exercises.html#cb28-59"></a><span class="kw">return</span>(AxSel04)</span>
<span id="cb28-60"><a href="exercises.html#cb28-60"></a>}</span>
<span id="cb28-61"><a href="exercises.html#cb28-61"></a>AxSel04 &lt;-<span class="st"> </span><span class="kw">APV.Sel</span>(<span class="dt">int=</span><span class="fl">0.04</span>)</span>
<span id="cb28-62"><a href="exercises.html#cb28-62"></a>AxSel02 &lt;-<span class="st"> </span><span class="kw">APV.Sel</span>(<span class="dt">int=</span><span class="fl">0.02</span>)</span>
<span id="cb28-63"><a href="exercises.html#cb28-63"></a></span>
<span id="cb28-64"><a href="exercises.html#cb28-64"></a>Age1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;50&quot;</span>, <span class="st">&quot;51&quot;</span>, <span class="st">&quot;52&quot;</span>, <span class="st">&quot;53&quot;</span>, <span class="st">&quot;54&quot;</span>, <span class="st">&quot;55&quot;</span>, <span class="st">&quot;56&quot;</span>, <span class="st">&quot;57&quot;</span>)</span>
<span id="cb28-65"><a href="exercises.html#cb28-65"></a>Age2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;58&quot;</span>, <span class="st">&quot;59&quot;</span>, <span class="st">&quot;60&quot;</span>, <span class="st">&quot;61&quot;</span>, <span class="st">&quot;62&quot;</span>, <span class="st">&quot;63&quot;</span>, <span class="st">&quot;64&quot;</span>, <span class="st">&quot;65&quot;</span>)</span>
<span id="cb28-66"><a href="exercises.html#cb28-66"></a></span>
<span id="cb28-67"><a href="exercises.html#cb28-67"></a>Ratio04Sel.Ult &lt;-<span class="st"> </span>AxSel04<span class="op">/</span>AxUlt04<span class="fl">.5065</span></span>
<span id="cb28-68"><a href="exercises.html#cb28-68"></a>OutPartA &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="dv">50</span><span class="op">:</span><span class="dv">57</span>, AxSel04[<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>],  AxUlt04<span class="fl">.5065</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>],  Ratio04Sel.Ult[<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>], </span>
<span id="cb28-69"><a href="exercises.html#cb28-69"></a>                  <span class="dv">58</span><span class="op">:</span><span class="dv">65</span>, AxSel04[<span class="dv">9</span><span class="op">:</span><span class="dv">16</span>], AxUlt04<span class="fl">.5065</span>[<span class="dv">9</span><span class="op">:</span><span class="dv">16</span>], Ratio04Sel.Ult[<span class="dv">9</span><span class="op">:</span><span class="dv">16</span>] )</span>
<span id="cb28-70"><a href="exercises.html#cb28-70"></a>OutPartA1 &lt;-<span class="st"> </span><span class="kw">round</span>(OutPartA, <span class="dt">digits =</span> <span class="dv">4</span>)</span>
<span id="cb28-71"><a href="exercises.html#cb28-71"></a>OutPartA1[<span class="dv">1</span>,] &lt;-<span class="st"> </span>Age1</span>
<span id="cb28-72"><a href="exercises.html#cb28-72"></a>OutPartA1[<span class="dv">5</span>,] &lt;-<span class="st"> </span>Age2</span>
<span id="cb28-73"><a href="exercises.html#cb28-73"></a><span class="kw">rownames</span>(OutPartA1) &lt;-<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb28-74"><a href="exercises.html#cb28-74"></a>  <span class="st">&quot;Age&quot;</span>,  <span class="st">&quot;Select2 and Ultimate, i=4%&quot;</span>, <span class="st">&quot;Ultimate, i=4%&quot;</span>,<span class="st">&quot;Ratio&quot;</span>, </span>
<span id="cb28-75"><a href="exercises.html#cb28-75"></a>  <span class="st">&quot;Age&quot;</span>,  <span class="st">&quot;Select and Ultimate, i=4%&quot;</span>, <span class="st">&quot;Ultimate, i=4%&quot;</span>, <span class="st">&quot;Ratio&quot;</span>)</span>
<span id="cb28-76"><a href="exercises.html#cb28-76"></a><span class="co">#knitr::kable(OutPartA1, align = &quot;r&quot;, caption=&quot;Select and Ultimate Female Canadian APVs&quot;)</span></span>
<span id="cb28-77"><a href="exercises.html#cb28-77"></a></span>
<span id="cb28-78"><a href="exercises.html#cb28-78"></a>Ratio02Sel.Ult &lt;-<span class="st"> </span>AxSel02<span class="op">/</span>AxUlt02<span class="fl">.5065</span></span>
<span id="cb28-79"><a href="exercises.html#cb28-79"></a>OutPartB &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="dv">50</span><span class="op">:</span><span class="dv">57</span>, AxSel02[<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>],  AxUlt02<span class="fl">.5065</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>],  Ratio02Sel.Ult[<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>], </span>
<span id="cb28-80"><a href="exercises.html#cb28-80"></a>                  <span class="dv">58</span><span class="op">:</span><span class="dv">65</span>, AxSel02[<span class="dv">9</span><span class="op">:</span><span class="dv">16</span>], AxUlt02<span class="fl">.5065</span>[<span class="dv">9</span><span class="op">:</span><span class="dv">16</span>], Ratio02Sel.Ult[<span class="dv">9</span><span class="op">:</span><span class="dv">16</span>] )</span>
<span id="cb28-81"><a href="exercises.html#cb28-81"></a>OutPartB1 &lt;-<span class="st"> </span><span class="kw">round</span>(OutPartB, <span class="dt">digits =</span> <span class="dv">4</span>)</span>
<span id="cb28-82"><a href="exercises.html#cb28-82"></a>OutPartB1[<span class="dv">1</span>,] &lt;-<span class="st"> </span>Age1</span>
<span id="cb28-83"><a href="exercises.html#cb28-83"></a>OutPartB1[<span class="dv">5</span>,] &lt;-<span class="st"> </span>Age2</span>
<span id="cb28-84"><a href="exercises.html#cb28-84"></a><span class="kw">rownames</span>(OutPartB1) &lt;-<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb28-85"><a href="exercises.html#cb28-85"></a>  <span class="st">&quot;Age&quot;</span>,  <span class="st">&quot;Select and Ultimate, i=2%&quot;</span>, <span class="st">&quot;Ultimate, i=2%&quot;</span>,<span class="st">&quot;Ratio&quot;</span>, </span>
<span id="cb28-86"><a href="exercises.html#cb28-86"></a>  <span class="st">&quot;Age&quot;</span>,  <span class="st">&quot;Select and Ultimate, i=2%&quot;</span>, <span class="st">&quot;Ultimate, i=2%&quot;</span>, <span class="st">&quot;Ratio&quot;</span>)</span>
<span id="cb28-87"><a href="exercises.html#cb28-87"></a><span class="co">#knitr::kable(OutPartB1, align = &quot;r&quot;, caption=&quot;Select and Ultimate Female Canadian APVs&quot;)</span></span></code></pre></div>
</div>
</div>
</div>
<div id="section-4.5-exercises" class="section level4 unnumbered">
<h4>Section 4.5 Exercises</h4>
<p><strong>Exercise 4.5.1. Dog Survival Distributions and Actuarial Present Values.</strong> The analysis in Section <a href="#Sec:CanineMort"><strong>??</strong></a> suggests that breed is an important factor for dog survival. To underscore this point for a broader audience, let us look at survival for a type of small dog, a “Jack Russell Terrier”, and a large dog, a “German Shepherd Dog”. We can make differences in survival distributions between small and large dogs even more meaningful by also computing selected actuarial present values that summarize future expected costs.</p>
<p>You should begin your analysis by downloading the data, available in Appendix Section <a href="appendix-data-dictionary.html#Sec:CanineMortality">3.3</a>.</p>
<p>The data have been re-worked so that they can be used for your analysis. Here is a bit more code needed to convert data fields appropriately and to separate the file into two subsets, one for Terriers and one for German Shepherds.</p>
<h5 style="text-align: center;">
<a id="displayCode.Exer4.5.1A" href="javascript:togglecode('toggleCode.Exer4.5.1A','displayCode.Exer4.5.1A');"><i><strong>Show R Code to Pre-Process the Data</strong></i></a>
</h5>
<div id="toggleCode.Exer4.5.1A" style="display: none">
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="exercises.html#cb29-1"></a><span class="co"># Read in Revised Data</span></span>
<span id="cb29-2"><a href="exercises.html#cb29-2"></a>DogMortA &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;DogSurvivalData1.csv&quot;</span>)</span>
<span id="cb29-3"><a href="exercises.html#cb29-3"></a>DogMort &lt;-<span class="st"> </span>DogMortA[,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb29-4"><a href="exercises.html#cb29-4"></a>DogMort<span class="op">$</span>dateBirth &lt;-<span class="st"> </span><span class="kw">as.Date</span>(DogMort<span class="op">$</span>dateBirth, <span class="st">&quot;%Y-%m-%d&quot;</span>) </span>
<span id="cb29-5"><a href="exercises.html#cb29-5"></a>DogMort<span class="op">$</span>dateDeath &lt;-<span class="st"> </span><span class="kw">as.Date</span>(DogMort<span class="op">$</span>dateDeath, <span class="st">&quot;%Y-%m-%d&quot;</span>)</span>
<span id="cb29-6"><a href="exercises.html#cb29-6"></a>DogMort<span class="op">$</span>AgeAtDeath &lt;-<span class="st"> </span>(<span class="kw">as.numeric</span>(DogMort<span class="op">$</span>dateDeath) <span class="op">-</span><span class="st"> </span><span class="kw">as.numeric</span>(DogMort<span class="op">$</span>dateBirth))<span class="op">/</span><span class="fl">365.25</span></span>
<span id="cb29-7"><a href="exercises.html#cb29-7"></a>DogTerr &lt;-<span class="st"> </span><span class="kw">subset</span>(DogMort, Breed <span class="op">==</span><span class="st"> &quot;Jack Russell Terrier&quot;</span>)</span>
<span id="cb29-8"><a href="exercises.html#cb29-8"></a>DogGShep &lt;-<span class="st"> </span><span class="kw">subset</span>(DogMort, Breed <span class="op">==</span><span class="st"> &quot;German Shepherd Dog&quot;</span>)</span></code></pre></div>
</div>
<p>For these data:</p>
<ol style="list-style-type: lower-alpha">
<li>Compute one-year mortality rates for both Terriers and German Shepherds. Do this over <span class="math inline">\(x=0, \ldots, 20\)</span>. Graph the results.</li>
<li>Because you may be working with products with events occurring more frequently than once a year, you decide to follow the strategy introduced in Section <a href="#Sec:BasicConceptsmthly"><strong>??</strong></a> and look at mortality rates occurring on a quarterly basis. Repeat the analysis from part (a) using quarterly rates.</li>
<li>The results of earlier analyses indicate substantial volatility in the both quarterly rates and annual rates at later ages. One approach to mitigate this volatility is to smooth the rates. A simpler approach is to use longer periods (hence increasing exposure and reducing volatility). Repeat the analysis in part (a) using rates on a once every two year basis.</li>
<li>To see how these rates might be used, you decide to repeat the analysis in Section <a href="#Sec:DogCostCare"><strong>??</strong></a> and compute an actuarial present value of the lifetime cost of surgical vet care. Use the same assumptions as in that section with the initial annual cost as 458, <span class="math inline">\(i=0.03\)</span> interest rate and a 11 percent annual growth in surgical care costs. However, use the dog mortality from part (a). Do this for <span class="math inline">\(x=2, 5, 12\)</span>, for both breeds. You will see that that your results on German Shepherds differ slightly from those presented in Section <a href="#Sec:DogCostCare"><strong>??</strong></a>; comment on why this is so.</li>
</ol>
<h5 style="text-align: center;">
<a id="displayTheory.Exer4.5.1" href="javascript:toggleTheory('toggleTheory.Exer4.5.1','displayCode.Exer4.5.1');"><i><strong>Exercise 4.5.1 Answers</strong></i></a>
</h5>
<div id="toggleTheory.Exer4.5.1" style="display: none">
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="exercises.html#cb30-1"></a><span class="kw">library</span>(data.table)</span>
<span id="cb30-2"><a href="exercises.html#cb30-2"></a><span class="kw">library</span>(survival)</span>
<span id="cb30-3"><a href="exercises.html#cb30-3"></a><span class="co"># Read in Revised Data</span></span>
<span id="cb30-4"><a href="exercises.html#cb30-4"></a>DogMortA &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/DogSurvivalData1.csv&quot;</span>)</span>
<span id="cb30-5"><a href="exercises.html#cb30-5"></a>DogMort &lt;-<span class="st"> </span>DogMortA[,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb30-6"><a href="exercises.html#cb30-6"></a>DogMort<span class="op">$</span>dateBirth &lt;-<span class="st"> </span><span class="kw">as.Date</span>(DogMort<span class="op">$</span>dateBirth, <span class="st">&quot;%Y-%m-%d&quot;</span>) </span>
<span id="cb30-7"><a href="exercises.html#cb30-7"></a>DogMort<span class="op">$</span>dateDeath &lt;-<span class="st"> </span><span class="kw">as.Date</span>(DogMort<span class="op">$</span>dateDeath, <span class="st">&quot;%Y-%m-%d&quot;</span>)</span>
<span id="cb30-8"><a href="exercises.html#cb30-8"></a>DogMort<span class="op">$</span>AgeAtDeath &lt;-<span class="st"> </span>(<span class="kw">as.numeric</span>(DogMort<span class="op">$</span>dateDeath) <span class="op">-</span><span class="st"> </span><span class="kw">as.numeric</span>(DogMort<span class="op">$</span>dateBirth))<span class="op">/</span><span class="fl">365.25</span></span>
<span id="cb30-9"><a href="exercises.html#cb30-9"></a>DogTerr &lt;-<span class="st"> </span><span class="kw">subset</span>(DogMort, Breed <span class="op">==</span><span class="st"> &quot;Jack Russell Terrier&quot;</span>)</span>
<span id="cb30-10"><a href="exercises.html#cb30-10"></a>DogGShep &lt;-<span class="st"> </span><span class="kw">subset</span>(DogMort, Breed <span class="op">==</span><span class="st"> &quot;German Shepherd Dog&quot;</span>)</span>
<span id="cb30-11"><a href="exercises.html#cb30-11"></a></span>
<span id="cb30-12"><a href="exercises.html#cb30-12"></a>fitTerr &lt;-<span class="st"> </span><span class="kw">survfit</span>(<span class="kw">Surv</span>(AgeAtDeath) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data=</span>DogTerr)</span>
<span id="cb30-13"><a href="exercises.html#cb30-13"></a>fitGShep &lt;-<span class="st"> </span><span class="kw">survfit</span>(<span class="kw">Surv</span>(AgeAtDeath) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data=</span>DogGShep)</span></code></pre></div>
<p><strong>Part A</strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="exercises.html#cb31-1"></a>seqA1 &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">20</span></span>
<span id="cb31-2"><a href="exercises.html#cb31-2"></a>seqA2 &lt;-<span class="st"> </span>seqA1 <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb31-3"><a href="exercises.html#cb31-3"></a>qxTerrA  &lt;-<span class="st"> </span>(<span class="kw">summary</span>(fitTerr,  <span class="dt">time =</span> seqA1)<span class="op">$</span>surv <span class="op">-</span><span class="st">   </span><span class="kw">summary</span>(fitTerr,  <span class="dt">time =</span> seqA2)<span class="op">$</span>surv)   <span class="op">/</span><span class="kw">summary</span>(fitTerr,  <span class="dt">time =</span> seqA1)<span class="op">$</span>surv</span>
<span id="cb31-4"><a href="exercises.html#cb31-4"></a>qxGShepA &lt;-<span class="st"> </span>(<span class="kw">summary</span>(fitGShep, <span class="dt">time =</span> seqA1)<span class="op">$</span>surv <span class="op">-</span><span class="st"> </span><span class="kw">c</span>(<span class="kw">summary</span>(fitGShep, <span class="dt">time =</span> seqA2)<span class="op">$</span>surv,<span class="dv">0</span>))<span class="op">/</span><span class="kw">summary</span>(fitGShep, <span class="dt">time =</span> seqA1)<span class="op">$</span>surv</span>
<span id="cb31-5"><a href="exercises.html#cb31-5"></a><span class="kw">plot</span>(seqA1,qxTerrA, <span class="dt">xlab =</span> <span class="st">&quot;Age&quot;</span>, <span class="dt">ylab =</span> <span class="kw">expression</span>(q[x]))</span>
<span id="cb31-6"><a href="exercises.html#cb31-6"></a><span class="kw">lines</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">16</span>, qxGShepA, <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-28"></span>
<img src="LifeCon_files/figure-html/unnamed-chunk-28-1.png" alt="One-year Dog Mortality Rates, Blue Solid Line is for German Shepherds" width="576" />
<p class="caption">
Figure 1.2: One-year Dog Mortality Rates, Blue Solid Line is for German Shepherds
</p>
</div>
<p><strong>Part B</strong></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="exercises.html#cb32-1"></a>seqB1 &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">20</span>, <span class="dt">by =</span> <span class="fl">0.25</span>)</span>
<span id="cb32-2"><a href="exercises.html#cb32-2"></a>seqB2 &lt;-<span class="st"> </span>seqB1 <span class="op">+</span><span class="st"> </span><span class="fl">0.25</span></span>
<span id="cb32-3"><a href="exercises.html#cb32-3"></a>qxTerrB  &lt;-<span class="st"> </span>(<span class="kw">summary</span>(fitTerr,  <span class="dt">time =</span> seqB1)<span class="op">$</span>surv <span class="op">-</span><span class="st">   </span><span class="kw">summary</span>(fitTerr,  <span class="dt">time =</span> seqB2)<span class="op">$</span>surv)   <span class="op">/</span><span class="kw">summary</span>(fitTerr,  <span class="dt">time =</span> seqB1)<span class="op">$</span>surv</span>
<span id="cb32-4"><a href="exercises.html#cb32-4"></a>qxGShepB &lt;-<span class="st"> </span>(<span class="kw">summary</span>(fitGShep, <span class="dt">time =</span> seqB1)<span class="op">$</span>surv <span class="op">-</span><span class="st"> </span><span class="kw">c</span>(<span class="kw">summary</span>(fitGShep, <span class="dt">time =</span> seqB2)<span class="op">$</span>surv,<span class="dv">0</span>))<span class="op">/</span><span class="kw">summary</span>(fitGShep, <span class="dt">time =</span> seqB1)<span class="op">$</span>surv</span>
<span id="cb32-5"><a href="exercises.html#cb32-5"></a><span class="kw">plot</span>(seqB1,qxTerrB, <span class="dt">xlab =</span> <span class="st">&quot;Age&quot;</span>, <span class="dt">ylab =</span> <span class="kw">expression</span>(q[x]))</span>
<span id="cb32-6"><a href="exercises.html#cb32-6"></a><span class="kw">lines</span>(seqB1[<span class="dv">1</span><span class="op">:</span><span class="dv">67</span>], qxGShepB, <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-29"></span>
<img src="LifeCon_files/figure-html/unnamed-chunk-29-1.png" alt="Quarterly Dog Mortality Rates, Blue Solid Line is for German Shepherds" width="576" />
<p class="caption">
Figure 1.3: Quarterly Dog Mortality Rates, Blue Solid Line is for German Shepherds
</p>
</div>
<p><strong>Part C</strong></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="exercises.html#cb33-1"></a>seqC1 &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">20</span>, <span class="dt">by =</span> <span class="dv">2</span>)</span>
<span id="cb33-2"><a href="exercises.html#cb33-2"></a>seqC2 &lt;-<span class="st"> </span>seqC1 <span class="op">+</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb33-3"><a href="exercises.html#cb33-3"></a>qxTerrC  &lt;-<span class="st"> </span>(<span class="kw">summary</span>(fitTerr,  <span class="dt">time =</span> seqC1)<span class="op">$</span>surv <span class="op">-</span><span class="st"> </span><span class="kw">c</span>(<span class="kw">summary</span>(fitTerr,  <span class="dt">time =</span> seqC2)<span class="op">$</span>surv,<span class="dv">0</span>))<span class="op">/</span><span class="kw">summary</span>(fitTerr,  <span class="dt">time =</span> seqC1)<span class="op">$</span>surv</span>
<span id="cb33-4"><a href="exercises.html#cb33-4"></a>qxGShepC &lt;-<span class="st"> </span>(<span class="kw">summary</span>(fitGShep, <span class="dt">time =</span> seqC1)<span class="op">$</span>surv <span class="op">-</span><span class="st"> </span><span class="kw">c</span>(<span class="kw">summary</span>(fitGShep, <span class="dt">time =</span> seqC2)<span class="op">$</span>surv,<span class="dv">0</span>))<span class="op">/</span><span class="kw">summary</span>(fitGShep, <span class="dt">time =</span> seqC1)<span class="op">$</span>surv</span>
<span id="cb33-5"><a href="exercises.html#cb33-5"></a><span class="kw">plot</span>(seqC1,qxTerrC, <span class="dt">xlab =</span> <span class="st">&quot;Age&quot;</span>, <span class="dt">ylab =</span> <span class="kw">expression</span>(q[x]))</span>
<span id="cb33-6"><a href="exercises.html#cb33-6"></a><span class="kw">lines</span>(seqC1[<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>], qxGShepC, <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-30"></span>
<img src="LifeCon_files/figure-html/unnamed-chunk-30-1.png" alt="Two-year Dog Mortality Rates, Blue Solid Line is for German Shepherds" width="576" />
<p class="caption">
Figure 1.4: Two-year Dog Mortality Rates, Blue Solid Line is for German Shepherds
</p>
</div>
<p><strong>Part D</strong></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="exercises.html#cb34-1"></a>DogAnn &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">x=</span>x, <span class="dt">q.x=</span>qx){</span>
<span id="cb34-2"><a href="exercises.html#cb34-2"></a>  Term &lt;-<span class="st"> </span><span class="kw">length</span>(q.x) <span class="op">-</span><span class="st"> </span>(x<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb34-3"><a href="exercises.html#cb34-3"></a>  kpx &lt;-<span class="st"> </span><span class="dv">1</span> </span>
<span id="cb34-4"><a href="exercises.html#cb34-4"></a>  APV  &lt;-<span class="st"> </span><span class="dv">0</span> </span>
<span id="cb34-5"><a href="exercises.html#cb34-5"></a> <span class="cf">if</span> (Term<span class="op">&gt;</span><span class="dv">0</span>){ <span class="cf">for</span>(k <span class="cf">in</span> <span class="dv">0</span><span class="op">:</span>(Term<span class="dv">-1</span>)){ </span>
<span id="cb34-6"><a href="exercises.html#cb34-6"></a>    <span class="cf">if</span> (k<span class="op">&gt;</span><span class="dv">1</span>) {kpx &lt;-<span class="st"> </span>kpx<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>q.x[x<span class="op">+</span><span class="dv">1</span><span class="op">+</span>k])}</span>
<span id="cb34-7"><a href="exercises.html#cb34-7"></a>    APV  &lt;-<span class="st"> </span>APV  <span class="op">+</span><span class="st"> </span>kpx <span class="op">*</span><span class="st">  </span>(<span class="dv">1</span><span class="op">/</span><span class="fl">1.03</span>)<span class="op">^</span>k   <span class="op">*</span><span class="fl">1.11</span><span class="op">^</span>k <span class="op">*</span><span class="dv">458</span></span>
<span id="cb34-8"><a href="exercises.html#cb34-8"></a>    }}</span>
<span id="cb34-9"><a href="exercises.html#cb34-9"></a> <span class="kw">return</span>(APV)</span>
<span id="cb34-10"><a href="exercises.html#cb34-10"></a>  }</span>
<span id="cb34-11"><a href="exercises.html#cb34-11"></a><span class="kw">DogAnn</span>(<span class="dt">x=</span><span class="dv">2</span>, <span class="dt">q.x=</span>qxTerrA)</span>
<span id="cb34-12"><a href="exercises.html#cb34-12"></a><span class="kw">DogAnn</span>(<span class="dt">x=</span><span class="dv">5</span>, <span class="dt">q.x=</span>qxTerrA)</span>
<span id="cb34-13"><a href="exercises.html#cb34-13"></a><span class="kw">DogAnn</span>(<span class="dt">x=</span><span class="dv">12</span>, <span class="dt">q.x=</span>qxTerrA)</span>
<span id="cb34-14"><a href="exercises.html#cb34-14"></a><span class="kw">DogAnn</span>(<span class="dt">x=</span><span class="dv">2</span>, <span class="dt">q.x=</span>qxGShepA)</span>
<span id="cb34-15"><a href="exercises.html#cb34-15"></a><span class="kw">DogAnn</span>(<span class="dt">x=</span><span class="dv">5</span>, <span class="dt">q.x=</span>qxGShepA)</span>
<span id="cb34-16"><a href="exercises.html#cb34-16"></a><span class="kw">DogAnn</span>(<span class="dt">x=</span><span class="dv">12</span>, <span class="dt">q.x=</span>qxGShepA)</span></code></pre></div>
<pre><code>[1] 7605.312
[1] 5111.737
[1] 1795.301
[1] 5444.105
[1] 3420.25
[1] 1184.634</code></pre>
<p>Note that the mortality estimates in this exercise are based only on data for a specific breed. In contrast, the analysis in Section <a href="#Sec:DogCostCare"><strong>??</strong></a> used a Cox proportional hazards to regression model to use data from all breeds to form mortality estimates.</p>
<hr />
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="method-exercises.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["LifeCon.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
